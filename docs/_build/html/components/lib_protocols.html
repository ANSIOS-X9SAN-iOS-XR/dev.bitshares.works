

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Protocols &mdash; BItShares Developers Portal  documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Operations" href="lib_operations.html" />
    <link rel="prev" title="db folder - object/index" href="lib_db.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> BItShares Developers Portal
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Introduction</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro/architectures.html">Introduction &amp; Architectures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/environments.html">Development Environments</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="components.html">System Components Elements</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="lib_database.html">Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="lib_block.html">Block</a></li>
<li class="toctree-l2"><a class="reference internal" href="lib_db.html">db folder - object/index</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Protocols</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#components-and-descriptions">Components and Descriptions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#base">Base</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id1">base</a></li>
<li class="toctree-l4"><a class="reference internal" href="#block">block</a></li>
<li class="toctree-l4"><a class="reference internal" href="#address">address</a></li>
<li class="toctree-l4"><a class="reference internal" href="#authority">authority</a></li>
<li class="toctree-l4"><a class="reference internal" href="#special-authority">special_authority</a></li>
<li class="toctree-l4"><a class="reference internal" href="#chain-parameters">chain_parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#types">types</a></li>
<li class="toctree-l4"><a class="reference internal" href="#operations">operations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#account">Account</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id4">account</a></li>
<li class="toctree-l4"><a class="reference internal" href="#memo">memo</a></li>
<li class="toctree-l4"><a class="reference internal" href="#balance">balance</a></li>
<li class="toctree-l4"><a class="reference internal" href="#transfer">transfer</a></li>
<li class="toctree-l4"><a class="reference internal" href="#confidential">confidential</a></li>
<li class="toctree-l4"><a class="reference internal" href="#custom">custom</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#asset">Asset</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#assert">assert</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id9">asset</a></li>
<li class="toctree-l4"><a class="reference internal" href="#asset-ops">asset_ops</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fba">fba</a></li>
<li class="toctree-l4"><a class="reference internal" href="#buyback">buyback</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#transaction">Transaction</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#market">market</a></li>
<li class="toctree-l4"><a class="reference internal" href="#proposal">proposal</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id10">transaction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#withdraw-permission">withdraw_permission</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#fee">Fee</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#fee-schedule">fee_schedule</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#vote">Vote</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#vesting">vesting</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id11">vote</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#bts-holders">BTS Holders</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#committee-member">committee_member</a></li>
<li class="toctree-l4"><a class="reference internal" href="#witness">witness</a></li>
<li class="toctree-l4"><a class="reference internal" href="#worker">worker</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#other">Other</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#config">config</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ext">ext</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="lib_operations.html">Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="lib_evalustors.html">Evaluators</a></li>
<li class="toctree-l2"><a class="reference internal" href="lib_objects.html">Object Elements</a></li>
<li class="toctree-l2"><a class="reference internal" href="lib_plugins.html">Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="lib_chain_db.html">Chain - db_xxx.cpp</a></li>
<li class="toctree-l2"><a class="reference internal" href="lib_net.html">Net</a></li>
<li class="toctree-l2"><a class="reference internal" href="lib_app.html">libraries - app</a></li>
<li class="toctree-l2"><a class="reference internal" href="lib_wallet.html">libraries - wallet</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../development/installation.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bts_guide/accounts/bts_account.html">BitShares Accounts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/integration.html">Integration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/interaction.html">Blockchain Interaction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/testnets.html">Testnets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/bsip.html">BitShares Improvement Proposal</a></li>
<li class="toctree-l1"><a class="reference internal" href="../supports_dev/supports.html">Support and Optimizations</a></li>
</ul>
<p class="caption"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/api_about.html">1. API Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/restrictions.html">2. API Access and Restrictions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/calls.html">3. Available Calls, Object, and IDs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/blockchain_api.html">4. Blockchain API(s)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/wallet_api.html">5. Wallet API - Calls</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/objects_ids.html">6. Objects and IDs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/namespaces.html">7. Graphene - Namespaces</a></li>
</ul>
<p class="caption"><span class="caption-text">Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../bts_guide/tutorials/index.html">Developer Guide (Tutorials)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bts_guide/index_faq.html">Frequently Asked Questions (FAQ)</a></li>
</ul>
<p class="caption"><span class="caption-text">References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../references/info_comunities.html">BitShares Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/info_comunities.html#bitshares-blockchain">BitShares Blockchain</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/tech_articles.html">BitShares Developers’ Contributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/tech_articles.html#articles">Articles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/githubrepo.html">BitShares Repositories</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">BItShares Developers Portal</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="components.html">System Components Elements</a> &raquo;</li>
        
      <li>Protocols</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="protocols">
<span id="lib-protocols"></span><h1>Protocols<a class="headerlink" href="#protocols" title="Permalink to this headline">¶</a></h1>
<p><em>BitShares Core - graphene::chain</em></p>
<p>This document purpose: to bring BitShares Protocols information (files) close to users.</p>
<p>These are a collection of the BitShares Protocols information. Sometimes it’s difficult to find and read through all of them.  The original files locate: (..\libraries\chain\include\graphene\chain\protocol\xxx.hpp)</p>
<hr class="docutils" />
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#components-and-descriptions" id="id12">Components and Descriptions</a></li>
<li><a class="reference internal" href="#base" id="id13">Base</a><ul>
<li><a class="reference internal" href="#id1" id="id14">base</a><ul>
<li><a class="reference internal" href="#section-operation-design-principles-design-principles" id="id15">&#64;section operation_design_principles Design Principles</a></li>
<li><a class="reference internal" href="#subsection-balance-calculation-balance-calculation-principle" id="id16">&#64;subsection balance_calculation Balance Calculation Principle</a></li>
<li><a class="reference internal" href="#subsection-fee-calculation-explicit-fee-principle" id="id17">&#64;subsection fee_calculation Explicit Fee Principle</a></li>
<li><a class="reference internal" href="#subsection-defined-authority-explicit-authority" id="id18">&#64;subsection defined_authority Explicit Authority</a></li>
<li><a class="reference internal" href="#subsection-relevancy-principle-explicit-relevant-accounts" id="id19">&#64;subsection relevancy_principle Explicit Relevant Accounts</a></li>
</ul>
</li>
<li><a class="reference internal" href="#block" id="id20">block</a></li>
<li><a class="reference internal" href="#address" id="id21">address</a></li>
<li><a class="reference internal" href="#authority" id="id22">authority</a></li>
<li><a class="reference internal" href="#special-authority" id="id23">special_authority</a></li>
<li><a class="reference internal" href="#chain-parameters" id="id24">chain_parameters</a></li>
<li><a class="reference internal" href="#types" id="id25">types</a></li>
<li><a class="reference internal" href="#operations" id="id26">operations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#account" id="id27">Account</a><ul>
<li><a class="reference internal" href="#id4" id="id28">account</a></li>
<li><a class="reference internal" href="#memo" id="id29">memo</a></li>
<li><a class="reference internal" href="#balance" id="id30">balance</a></li>
<li><a class="reference internal" href="#transfer" id="id31">transfer</a></li>
<li><a class="reference internal" href="#confidential" id="id32">confidential</a><ul>
<li><a class="reference internal" href="#section-referral-program-referral-progam" id="id33">section referral_program Referral Progam</a></li>
<li><a class="reference internal" href="#section-transaction-fees-fees" id="id34">section transaction_fees Fees</a></li>
</ul>
</li>
<li><a class="reference internal" href="#custom" id="id35">custom</a></li>
</ul>
</li>
<li><a class="reference internal" href="#asset" id="id36">Asset</a><ul>
<li><a class="reference internal" href="#assert" id="id37">assert</a></li>
<li><a class="reference internal" href="#id9" id="id38">asset</a></li>
<li><a class="reference internal" href="#asset-ops" id="id39">asset_ops</a></li>
<li><a class="reference internal" href="#fba" id="id40">fba</a></li>
<li><a class="reference internal" href="#buyback" id="id41">buyback</a></li>
</ul>
</li>
<li><a class="reference internal" href="#transaction" id="id42">Transaction</a><ul>
<li><a class="reference internal" href="#market" id="id43">market</a></li>
<li><a class="reference internal" href="#proposal" id="id44">proposal</a></li>
<li><a class="reference internal" href="#id10" id="id45">transaction</a></li>
<li><a class="reference internal" href="#withdraw-permission" id="id46">withdraw_permission</a></li>
</ul>
</li>
<li><a class="reference internal" href="#fee" id="id47">Fee</a><ul>
<li><a class="reference internal" href="#fee-schedule" id="id48">fee_schedule</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vote" id="id49">Vote</a><ul>
<li><a class="reference internal" href="#vesting" id="id50">vesting</a></li>
<li><a class="reference internal" href="#id11" id="id51">vote</a></li>
</ul>
</li>
<li><a class="reference internal" href="#bts-holders" id="id52">BTS Holders</a><ul>
<li><a class="reference internal" href="#committee-member" id="id53">committee_member</a></li>
<li><a class="reference internal" href="#witness" id="id54">witness</a></li>
<li><a class="reference internal" href="#worker" id="id55">worker</a></li>
</ul>
</li>
<li><a class="reference internal" href="#other" id="id56">Other</a><ul>
<li><a class="reference internal" href="#config" id="id57">config</a></li>
<li><a class="reference internal" href="#ext" id="id58">ext</a></li>
</ul>
</li>
</ul>
</div>
<hr class="docutils" />
<div class="section" id="components-and-descriptions">
<h2><a class="toc-backref" href="#id12">Components and Descriptions</a><a class="headerlink" href="#components-and-descriptions" title="Permalink to this headline">¶</a></h2>
<p><em>graphene::chain::</em></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Operations have the <a class="reference internal" href="lib_operations.html#lib-operations"><span class="std std-ref">Operations</span></a> page to list all operations. Therefore, if a protocol includes any operations, only listed the operation’s name. Please check the <a class="reference internal" href="lib_operations.html#lib-operations"><span class="std std-ref">Operations</span></a> page.</p>
</div>
</div>
<hr class="docutils" />
<div class="section" id="base">
<h2><a class="toc-backref" href="#id13">Base</a><a class="headerlink" href="#base" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id1">
<h3><a class="toc-backref" href="#id14">base</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Operations</li>
<li>Transactions</li>
<li>A set of valid comands for mutating the globally shared state.</li>
<li>An operation can be thought of like a function that will modify the global shared state of the blockchain.  The members of each struct are like function arguments and each operation can potentially generate a return value.</li>
<li>Operations can be grouped into transactions (&#64;ref transaction) to ensure that they occur in a particular order and that all operations apply successfully or no operations apply.</li>
<li>Each operation is a fully defined state transition and can exist in a transaction on its own.</li>
</ul>
<div class="section" id="section-operation-design-principles-design-principles">
<h4><a class="toc-backref" href="#id15">&#64;section operation_design_principles Design Principles</a><a class="headerlink" href="#section-operation-design-principles-design-principles" title="Permalink to this headline">¶</a></h4>
<p>Operations have been carefully designed to include all of the information necessary to interpret them outside the context of the blockchain.   This means that information about current chain state is included in the operation even though it could be inferred from a subset of the data.   This makes the expected outcome of each operation well defined and easily understood without access to chain state.</p>
</div>
<div class="section" id="subsection-balance-calculation-balance-calculation-principle">
<h4><a class="toc-backref" href="#id16">&#64;subsection balance_calculation Balance Calculation Principle</a><a class="headerlink" href="#subsection-balance-calculation-balance-calculation-principle" title="Permalink to this headline">¶</a></h4>
<p>We have stipulated that the current account balance may be entirely calculated from just the subset of operations that are relevant to that account.  There should be no need to process the entire blockchain inorder to know your account’s balance.</p>
</div>
<div class="section" id="subsection-fee-calculation-explicit-fee-principle">
<h4><a class="toc-backref" href="#id17">&#64;subsection fee_calculation Explicit Fee Principle</a><a class="headerlink" href="#subsection-fee-calculation-explicit-fee-principle" title="Permalink to this headline">¶</a></h4>
<p>Blockchain fees can change from time to time and it is important that a signed transaction explicitly agree to the fees it will be paying.  This aids with account balance updates and ensures that the sender agreed to the fee prior to making the transaction.</p>
</div>
<div class="section" id="subsection-defined-authority-explicit-authority">
<h4><a class="toc-backref" href="#id18">&#64;subsection defined_authority Explicit Authority</a><a class="headerlink" href="#subsection-defined-authority-explicit-authority" title="Permalink to this headline">¶</a></h4>
<p>Each operation shall contain enough information to know which accounts must authorize the operation.  This principle enables authority verification to occur in a centralized, optimized, and parallel manner.</p>
</div>
<div class="section" id="subsection-relevancy-principle-explicit-relevant-accounts">
<h4><a class="toc-backref" href="#id19">&#64;subsection relevancy_principle Explicit Relevant Accounts</a><a class="headerlink" href="#subsection-relevancy-principle-explicit-relevant-accounts" title="Permalink to this headline">¶</a></h4>
<p>Each operation contains enough information to enumerate all accounts for which the operation should apear in its account history.  This principle enables us to easily define and enforce the &#64;balance_calculation. This is superset of the &#64;ref defined_authority</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">void_result</span><span class="p">{};</span>
<span class="k">typedef</span> <span class="n">fc</span><span class="o">::</span><span class="n">static_variant</span><span class="o">&lt;</span><span class="n">void_result</span><span class="p">,</span><span class="n">object_id_type</span><span class="p">,</span><span class="n">asset</span><span class="o">&gt;</span> <span class="n">operation_result</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">base_operation</span>
<span class="p">{</span>
        <span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
        <span class="n">share_type</span> <span class="n">calculate_fee</span><span class="p">(</span><span class="k">const</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">params</span><span class="p">)</span><span class="k">const</span>
        <span class="p">{</span>
                <span class="k">return</span> <span class="n">params</span><span class="p">.</span><span class="n">fee</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="kt">void</span> <span class="n">get_required_authorities</span><span class="p">(</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">authority</span><span class="o">&gt;&amp;</span> <span class="p">)</span><span class="k">const</span><span class="p">{}</span>
        <span class="kt">void</span> <span class="n">get_required_active_authorities</span><span class="p">(</span> <span class="n">flat_set</span><span class="o">&lt;</span><span class="n">account_id_type</span><span class="o">&gt;&amp;</span> <span class="p">)</span><span class="k">const</span><span class="p">{}</span>
        <span class="kt">void</span> <span class="n">get_required_owner_authorities</span><span class="p">(</span> <span class="n">flat_set</span><span class="o">&lt;</span><span class="n">account_id_type</span><span class="o">&gt;&amp;</span> <span class="p">)</span><span class="k">const</span><span class="p">{}</span>
        <span class="kt">void</span> <span class="n">validate</span><span class="p">()</span><span class="k">const</span><span class="p">{}</span>

        <span class="k">static</span> <span class="kt">uint64_t</span> <span class="n">calculate_data_fee</span><span class="p">(</span> <span class="kt">uint64_t</span> <span class="n">bytes</span><span class="p">,</span> <span class="kt">uint64_t</span> <span class="n">price_per_kbyte</span> <span class="p">);</span>
<span class="p">};</span>
</pre></div>
</div>
<ul class="simple">
<li>For future expansion many structus include a single member of type extensions_type that can be changed when updating a protocol.  You can always add new types to a static_variant without breaking backward compatibility.</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">typedef</span> <span class="n">static_variant</span><span class="o">&lt;</span><span class="n">void_t</span><span class="o">&gt;</span>      <span class="n">future_extensions</span><span class="p">;</span>
</pre></div>
</div>
<ul class="simple">
<li>A flat_set is used to make sure that only one extension of each type is added and that they are added in order.</li>
<li><strong>Note</strong> static_variant compares only the type tag and not the  content</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">typedef</span> <span class="n">flat_set</span><span class="o">&lt;</span><span class="n">future_extensions</span><span class="o">&gt;</span> <span class="n">extensions_type</span><span class="p">;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="block">
<h3><a class="toc-backref" href="#id20">block</a><a class="headerlink" href="#block" title="Permalink to this headline">¶</a></h3>
<p><a href="#id2"><span class="problematic" id="id3">*</span></a>See listed <a class="reference internal" href="lib_block.html#lib-block"><span class="std std-ref">block`information section</span></a></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">block_header</span><span class="p">{</span>  <span class="p">};</span>
<span class="k">struct</span> <span class="nl">signed_block_header</span> <span class="p">:</span> <span class="k">public</span> <span class="n">block_header</span><span class="p">{</span>  <span class="p">}</span>
<span class="k">struct</span> <span class="nl">signed_block</span> <span class="p">:</span> <span class="k">public</span> <span class="n">signed_block_header</span><span class="p">{</span>  <span class="p">};</span>
</pre></div>
</div>
</div>
<div class="section" id="address">
<h3><a class="toc-backref" href="#id21">address</a><a class="headerlink" href="#address" title="Permalink to this headline">¶</a></h3>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="n">fc</span> <span class="p">{</span> <span class="k">namespace</span> <span class="n">ecc</span> <span class="p">{</span>
  <span class="k">class</span>  <span class="nc">public_key</span><span class="p">;</span>
  <span class="k">typedef</span> <span class="n">fc</span><span class="o">::</span><span class="n">array</span><span class="o">&lt;</span><span class="kt">char</span><span class="p">,</span><span class="mi">33</span><span class="o">&gt;</span>  <span class="n">public_key_data</span><span class="p">;</span>
<span class="p">}</span> <span class="p">}</span> <span class="c1">// fc::ecc</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">struct</span> <span class="n">public_key_type</span><span class="p">;</span>
</pre></div>
</div>
<ul class="simple">
<li>A 160 bit hash of a public key</li>
<li>An address can be converted to or from a base58 string with 32 bit checksum.</li>
<li>An address is calculated as ripemd160( sha512( compressed_ecc_public_key ) )</li>
<li>When converted to a string, checksum calculated as the first 4 bytes ripemd160( address ) is appended to the binary address before converting to base58.</li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">address</span>
<span class="p">{</span>
  <span class="k">public</span><span class="o">:</span>
        <span class="n">address</span><span class="p">();</span>                                          <span class="c1">///&lt; constructs empty / null address</span>
        <span class="k">explicit</span> <span class="nf">address</span><span class="p">(</span> <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">base58str</span> <span class="p">);</span>       <span class="c1">///&lt; converts to binary, validates checksum</span>
        <span class="n">address</span><span class="p">(</span> <span class="k">const</span> <span class="n">fc</span><span class="o">::</span><span class="n">ecc</span><span class="o">::</span><span class="n">public_key</span><span class="o">&amp;</span> <span class="n">pub</span> <span class="p">);</span>              <span class="c1">///&lt; converts to binary</span>
        <span class="k">explicit</span> <span class="nf">address</span><span class="p">(</span> <span class="k">const</span> <span class="n">fc</span><span class="o">::</span><span class="n">ecc</span><span class="o">::</span><span class="n">public_key_data</span><span class="o">&amp;</span> <span class="n">pub</span> <span class="p">);</span> <span class="c1">///&lt; converts to binary</span>
        <span class="n">address</span><span class="p">(</span> <span class="k">const</span> <span class="n">pts_address</span><span class="o">&amp;</span> <span class="n">pub</span> <span class="p">);</span>                       <span class="c1">///&lt; converts to binary</span>
        <span class="n">address</span><span class="p">(</span> <span class="k">const</span> <span class="n">public_key_type</span><span class="o">&amp;</span> <span class="n">pubkey</span> <span class="p">);</span>

        <span class="k">static</span> <span class="kt">bool</span> <span class="nf">is_valid</span><span class="p">(</span> <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">base58str</span><span class="p">,</span> <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">prefix</span> <span class="o">=</span> <span class="n">GRAPHENE_ADDRESS_PREFIX</span> <span class="p">);</span>

        <span class="k">explicit</span> <span class="k">operator</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">()</span><span class="k">const</span><span class="p">;</span> <span class="c1">///&lt; converts to base58 + checksum</span>

        <span class="k">friend</span> <span class="kt">size_t</span> <span class="nf">hash_value</span><span class="p">(</span> <span class="k">const</span> <span class="n">address</span><span class="o">&amp;</span> <span class="n">v</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">const</span> <span class="kt">void</span><span class="o">*</span> <span class="n">tmp</span> <span class="o">=</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="k">const</span> <span class="kt">void</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">addr</span><span class="p">.</span><span class="n">_hash</span><span class="o">+</span><span class="mi">2</span><span class="p">);</span>

          <span class="k">const</span> <span class="kt">size_t</span><span class="o">*</span> <span class="n">tmp2</span> <span class="o">=</span> <span class="k">reinterpret_cast</span><span class="o">&lt;</span><span class="k">const</span> <span class="kt">size_t</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">tmp</span><span class="p">);</span>
          <span class="k">return</span> <span class="o">*</span><span class="n">tmp2</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">fc</span><span class="o">::</span><span class="n">ripemd160</span> <span class="n">addr</span><span class="p">;</span>
<span class="p">};</span>

<span class="kr">inline</span> <span class="kt">bool</span> <span class="k">operator</span> <span class="o">==</span> <span class="p">(</span> <span class="k">const</span> <span class="n">address</span><span class="o">&amp;</span> <span class="n">a</span><span class="p">,</span> <span class="k">const</span> <span class="n">address</span><span class="o">&amp;</span> <span class="n">b</span> <span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">a</span><span class="p">.</span><span class="n">addr</span> <span class="o">==</span> <span class="n">b</span><span class="p">.</span><span class="n">addr</span><span class="p">;</span> <span class="p">}</span>
<span class="kr">inline</span> <span class="kt">bool</span> <span class="k">operator</span> <span class="o">!=</span> <span class="p">(</span> <span class="k">const</span> <span class="n">address</span><span class="o">&amp;</span> <span class="n">a</span><span class="p">,</span> <span class="k">const</span> <span class="n">address</span><span class="o">&amp;</span> <span class="n">b</span> <span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">a</span><span class="p">.</span><span class="n">addr</span> <span class="o">!=</span> <span class="n">b</span><span class="p">.</span><span class="n">addr</span><span class="p">;</span> <span class="p">}</span>
<span class="kr">inline</span> <span class="kt">bool</span> <span class="k">operator</span> <span class="o">&lt;</span>  <span class="p">(</span> <span class="k">const</span> <span class="n">address</span><span class="o">&amp;</span> <span class="n">a</span><span class="p">,</span> <span class="k">const</span> <span class="n">address</span><span class="o">&amp;</span> <span class="n">b</span> <span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">a</span><span class="p">.</span><span class="n">addr</span> <span class="o">&lt;</span>  <span class="n">b</span><span class="p">.</span><span class="n">addr</span><span class="p">;</span> <span class="p">}</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="n">fc</span>
<span class="p">{</span>
  <span class="kt">void</span> <span class="n">to_variant</span><span class="p">(</span> <span class="k">const</span> <span class="n">graphene</span><span class="o">::</span><span class="n">chain</span><span class="o">::</span><span class="n">address</span><span class="o">&amp;</span> <span class="n">var</span><span class="p">,</span>  <span class="n">fc</span><span class="o">::</span><span class="n">variant</span><span class="o">&amp;</span> <span class="n">vo</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">max_depth</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">);</span>
  <span class="kt">void</span> <span class="nf">from_variant</span><span class="p">(</span> <span class="k">const</span> <span class="n">fc</span><span class="o">::</span><span class="n">variant</span><span class="o">&amp;</span> <span class="n">var</span><span class="p">,</span>  <span class="n">graphene</span><span class="o">::</span><span class="n">chain</span><span class="o">::</span><span class="n">address</span><span class="o">&amp;</span> <span class="n">vo</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">max_depth</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">);</span>
<span class="p">}</span>

<span class="k">namespace</span> <span class="n">std</span>
<span class="p">{</span>
  <span class="k">template</span><span class="o">&lt;&gt;</span>
  <span class="k">struct</span> <span class="n">hash</span><span class="o">&lt;</span><span class="n">graphene</span><span class="o">::</span><span class="n">chain</span><span class="o">::</span><span class="n">address</span><span class="o">&gt;</span>
  <span class="p">{</span>
        <span class="k">public</span><span class="o">:</span>
        <span class="kt">size_t</span> <span class="k">operator</span><span class="p">()(</span><span class="k">const</span> <span class="n">graphene</span><span class="o">::</span><span class="n">chain</span><span class="o">::</span><span class="n">address</span> <span class="o">&amp;</span><span class="n">a</span><span class="p">)</span> <span class="k">const</span>
        <span class="p">{</span>
           <span class="k">return</span> <span class="p">(</span><span class="kt">uint64_t</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">addr</span><span class="p">.</span><span class="n">_hash</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">&lt;&lt;</span><span class="mi">32</span><span class="p">)</span> <span class="o">|</span> <span class="kt">uint64_t</span><span class="p">(</span> <span class="n">a</span><span class="p">.</span><span class="n">addr</span><span class="p">.</span><span class="n">_hash</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">);</span>
        <span class="p">}</span>
  <span class="p">};</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="authority">
<h3><a class="toc-backref" href="#id22">authority</a><a class="headerlink" href="#authority" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>class authority</li>
<li>Identifies a weighted set of keys and accounts that must approve operations.</li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>struct authority
{
        authority(){}
        template&lt;class ...Args&gt;
        authority(uint32_t threshhold, Args... auths)
                 : weight_threshold(threshhold)
        {
                 add_authorities(auths...);
        }

        enum classification
        {
                 /** the key that is authorized to change owner, active, and voting keys */
                 owner  = 0,
                 /** the key that is able to perform normal operations */
                 active = 1,
                 key    = 2
        };
        void add_authority( const public_key_type&amp; k, weight_type w )
        {
                 key_auths[k] = w;
        }
        void add_authority( const address&amp; k, weight_type w )
        {
                 address_auths[k] = w;
        }
        void add_authority( account_id_type k, weight_type w )
        {
                 account_auths[k] = w;
        }
        bool is_impossible()const
        {
                 uint64_t auth_weights = 0;
                 for( const auto&amp; item : account_auths ) auth_weights += item.second;
                 for( const auto&amp; item : key_auths ) auth_weights += item.second;
                 for( const auto&amp; item : address_auths ) auth_weights += item.second;
                 return auth_weights &lt; weight_threshold;
        }

        template&lt;typename AuthType&gt;
        void add_authorities(AuthType k, weight_type w)
        {
                 add_authority(k, w);
        }
        template&lt;typename AuthType, class ...Args&gt;
        void add_authorities(AuthType k, weight_type w, Args... auths)
        {
                 add_authority(k, w);
                 add_authorities(auths...);
        }

        vector&lt;public_key_type&gt; get_keys() const
        {
                 vector&lt;public_key_type&gt; result;
                 result.reserve( key_auths.size() );
                 for( const auto&amp; k : key_auths )
                                result.push_back(k.first);
                 return result;
        }
        vector&lt;address&gt; get_addresses() const
        {
                 vector&lt;address&gt; result;
                 result.reserve( address_auths.size() );
                 for( const auto&amp; k : address_auths )
                                result.push_back(k.first);
                 return result;
        }

        friend bool operator == ( const authority&amp; a, const authority&amp; b )
        {
                 return (a.weight_threshold == b.weight_threshold) &amp;&amp;
                                                (a.account_auths == b.account_auths) &amp;&amp;
                                                (a.key_auths == b.key_auths) &amp;&amp;
                                                (a.address_auths == b.address_auths);
        }
        uint32_t num_auths()const { return account_auths.size() + key_auths.size() + address_auths.size(); }
        void     clear() { account_auths.clear(); key_auths.clear(); }

        static authority null_authority()
        {
                 return authority( 1, GRAPHENE_NULL_ACCOUNT, 1 );
        }

        uint32_t                              weight_threshold = 0;
        flat_map&lt;account_id_type,weight_type&gt; account_auths;
        flat_map&lt;public_key_type,weight_type&gt; key_auths;
        /** needed for backward compatibility only */
        flat_map&lt;address,weight_type&gt;         address_auths;
 };
</pre></div>
</div>
<ul class="simple">
<li>Add all account members of the given authority to the given flat_set.</li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">add_authority_accounts</span><span class="p">(</span>
   <span class="n">flat_set</span><span class="o">&lt;</span><span class="n">account_id_type</span><span class="o">&gt;&amp;</span> <span class="n">result</span><span class="p">,</span>
   <span class="k">const</span> <span class="n">authority</span><span class="o">&amp;</span> <span class="n">a</span>
   <span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="special-authority">
<h3><a class="toc-backref" href="#id23">special_authority</a><a class="headerlink" href="#special-authority" title="Permalink to this headline">¶</a></h3>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">no_special_authority</span> <span class="p">{};</span>

<span class="k">struct</span> <span class="n">top_holders_special_authority</span>
<span class="p">{</span>
   <span class="n">asset_id_type</span> <span class="n">asset</span><span class="p">;</span>
   <span class="kt">uint8_t</span>       <span class="n">num_top_holders</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">typedef</span> <span class="n">static_variant</span><span class="o">&lt;</span>
   <span class="n">no_special_authority</span><span class="p">,</span>
   <span class="n">top_holders_special_authority</span>
   <span class="o">&gt;</span> <span class="n">special_authority</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">validate_special_authority</span><span class="p">(</span> <span class="k">const</span> <span class="n">special_authority</span><span class="o">&amp;</span> <span class="n">auth</span> <span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="chain-parameters">
<span id="protocol-chain-param"></span><h3><a class="toc-backref" href="#id24">chain_parameters</a><a class="headerlink" href="#chain-parameters" title="Permalink to this headline">¶</a></h3>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">fee_schedule</span><span class="p">;</span>

<span class="k">typedef</span> <span class="n">static_variant</span><span class="o">&lt;&gt;</span>  <span class="n">parameter_extension</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">chain_parameters</span>
<span class="p">{</span>
        <span class="cm">/** using a smart ref breaks the circular dependency created between operations and the fee schedule */</span>
        <span class="n">smart_ref</span><span class="o">&lt;</span><span class="n">fee_schedule</span><span class="o">&gt;</span> <span class="n">current_fees</span><span class="p">;</span>                       <span class="c1">///&lt; current schedule of fees</span>
        <span class="kt">uint8_t</span>                 <span class="n">block_interval</span>                      <span class="o">=</span> <span class="n">GRAPHENE_DEFAULT_BLOCK_INTERVAL</span><span class="p">;</span>
        <span class="kt">uint32_t</span>                <span class="n">maintenance_interval</span>                <span class="o">=</span> <span class="n">GRAPHENE_DEFAULT_MAINTENANCE_INTERVAL</span><span class="p">;</span>
        <span class="kt">uint8_t</span>                 <span class="n">maintenance_skip_slots</span>              <span class="o">=</span> <span class="n">GRAPHENE_DEFAULT_MAINTENANCE_SKIP_SLOTS</span><span class="p">;</span>
        <span class="kt">uint32_t</span>                <span class="n">committee_proposal_review_period</span>    <span class="o">=</span> <span class="n">GRAPHENE_DEFAULT_COMMITTEE_PROPOSAL_REVIEW_PERIOD_SEC</span><span class="p">;</span>
        <span class="kt">uint32_t</span>                <span class="n">maximum_transaction_size</span>            <span class="o">=</span> <span class="n">GRAPHENE_DEFAULT_MAX_TRANSACTION_SIZE</span><span class="p">;</span>
        <span class="kt">uint32_t</span>                <span class="n">maximum_block_size</span>                  <span class="o">=</span> <span class="n">GRAPHENE_DEFAULT_MAX_BLOCK_SIZE</span><span class="p">;</span>
        <span class="kt">uint32_t</span>                <span class="n">maximum_time_until_expiration</span>       <span class="o">=</span> <span class="n">GRAPHENE_DEFAULT_MAX_TIME_UNTIL_EXPIRATION</span><span class="p">;</span>
        <span class="kt">uint32_t</span>                <span class="n">maximum_proposal_lifetime</span>           <span class="o">=</span> <span class="n">GRAPHENE_DEFAULT_MAX_PROPOSAL_LIFETIME_SEC</span><span class="p">;</span>
        <span class="kt">uint8_t</span>                 <span class="n">maximum_asset_whitelist_authorities</span> <span class="o">=</span> <span class="n">GRAPHENE_DEFAULT_MAX_ASSET_WHITELIST_AUTHORITIES</span><span class="p">;</span>
        <span class="kt">uint8_t</span>                 <span class="n">maximum_asset_feed_publishers</span>       <span class="o">=</span> <span class="n">GRAPHENE_DEFAULT_MAX_ASSET_FEED_PUBLISHERS</span><span class="p">;</span>
        <span class="kt">uint16_t</span>                <span class="n">maximum_witness_count</span>               <span class="o">=</span> <span class="n">GRAPHENE_DEFAULT_MAX_WITNESSES</span><span class="p">;</span>
        <span class="kt">uint16_t</span>                <span class="n">maximum_committee_count</span>             <span class="o">=</span> <span class="n">GRAPHENE_DEFAULT_MAX_COMMITTEE</span><span class="p">;</span>
        <span class="kt">uint16_t</span>                <span class="n">maximum_authority_membership</span>        <span class="o">=</span> <span class="n">GRAPHENE_DEFAULT_MAX_AUTHORITY_MEMBERSHIP</span><span class="p">;</span>
        <span class="kt">uint16_t</span>                <span class="n">reserve_percent_of_fee</span>              <span class="o">=</span> <span class="n">GRAPHENE_DEFAULT_BURN_PERCENT_OF_FEE</span><span class="p">;</span>
        <span class="kt">uint16_t</span>                <span class="n">network_percent_of_fee</span>              <span class="o">=</span> <span class="n">GRAPHENE_DEFAULT_NETWORK_PERCENT_OF_FEE</span><span class="p">;</span>
        <span class="kt">uint16_t</span>                <span class="n">lifetime_referrer_percent_of_fee</span>    <span class="o">=</span> <span class="n">GRAPHENE_DEFAULT_LIFETIME_REFERRER_PERCENT_OF_FEE</span><span class="p">;</span>
        <span class="kt">uint32_t</span>                <span class="n">cashback_vesting_period_seconds</span>     <span class="o">=</span> <span class="n">GRAPHENE_DEFAULT_CASHBACK_VESTING_PERIOD_SEC</span><span class="p">;</span>
        <span class="n">share_type</span>              <span class="n">cashback_vesting_threshold</span>          <span class="o">=</span> <span class="n">GRAPHENE_DEFAULT_CASHBACK_VESTING_THRESHOLD</span><span class="p">;</span>
        <span class="kt">bool</span>                    <span class="n">count_non_member_votes</span>              <span class="o">=</span> <span class="nb">true</span><span class="p">;</span> <span class="c1">///&lt; set to false to restrict voting privlegages to member accounts</span>
        <span class="kt">bool</span>                    <span class="n">allow_non_member_whitelists</span>         <span class="o">=</span> <span class="nb">false</span><span class="p">;</span> <span class="c1">///&lt; true if non-member accounts may set whitelists and blacklists; false otherwise</span>
        <span class="n">share_type</span>              <span class="n">witness_pay_per_block</span>               <span class="o">=</span> <span class="n">GRAPHENE_DEFAULT_WITNESS_PAY_PER_BLOCK</span><span class="p">;</span>
        <span class="kt">uint32_t</span>                <span class="n">witness_pay_vesting_seconds</span>         <span class="o">=</span> <span class="n">GRAPHENE_DEFAULT_WITNESS_PAY_VESTING_SECONDS</span><span class="p">;</span>
        <span class="n">share_type</span>              <span class="n">worker_budget_per_day</span>               <span class="o">=</span> <span class="n">GRAPHENE_DEFAULT_WORKER_BUDGET_PER_DAY</span><span class="p">;</span>
        <span class="kt">uint16_t</span>                <span class="n">max_predicate_opcode</span>                <span class="o">=</span> <span class="n">GRAPHENE_DEFAULT_MAX_ASSERT_OPCODE</span><span class="p">;</span>
        <span class="n">share_type</span>              <span class="n">fee_liquidation_threshold</span>           <span class="o">=</span> <span class="n">GRAPHENE_DEFAULT_FEE_LIQUIDATION_THRESHOLD</span><span class="p">;</span>
        <span class="kt">uint16_t</span>                <span class="n">accounts_per_fee_scale</span>              <span class="o">=</span> <span class="n">GRAPHENE_DEFAULT_ACCOUNTS_PER_FEE_SCALE</span><span class="p">;</span>
        <span class="kt">uint8_t</span>                 <span class="n">account_fee_scale_bitshifts</span>         <span class="o">=</span> <span class="n">GRAPHENE_DEFAULT_ACCOUNT_FEE_SCALE_BITSHIFTS</span><span class="p">;</span>
        <span class="kt">uint8_t</span>                 <span class="n">max_authority_depth</span>                 <span class="o">=</span> <span class="n">GRAPHENE_MAX_SIG_CHECK_DEPTH</span><span class="p">;</span>
        <span class="n">extensions_type</span>         <span class="n">extensions</span><span class="p">;</span>

        <span class="cm">/** defined in fee_schedule.cpp */</span>
        <span class="kt">void</span> <span class="nf">validate</span><span class="p">()</span><span class="k">const</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<p><strong>The descriptions of valuables</strong></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">GRAPHENE_DEFAULT_BLOCK_INTERVAL:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">interval in seconds between blocks</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">GRAPHENE_DEFAULT_MAINTENANCE_INTERVAL:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">interval in sections between blockchain maintenance events</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">GRAPHENE_DEFAULT_MAINTENANCE_SKIP_SLOTS:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">number of block_intervals to skip at maintenance time</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">GRAPHENE_DEFAULT_COMMITTEE_PROPOSAL_REVIEW_PERIOD_SEC:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">minimum time in seconds that a proposed transaction requiring committee authority may not be signed, prior to expiration</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">GRAPHENE_DEFAULT_MAX_TRANSACTION_SIZE:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">maximum allowable size in bytes for a transaction</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">GRAPHENE_DEFAULT_MAX_BLOCK_SIZE:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">aximum allowable size in bytes for a block</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">GRAPHENE_DEFAULT_MAX_TIME_UNTIL_EXPIRATION:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">maximum lifetime in seconds for transactions to be valid, before expiring</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">GRAPHENE_DEFAULT_MAX_PROPOSAL_LIFETIME_SEC:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">maximum lifetime in seconds for proposed transactions to be kept, before expiring</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">GRAPHENE_DEFAULT_MAX_ASSET_WHITELIST_AUTHORITIES:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">maximum number of accounts which an asset may list as authorities for its whitelist OR blacklist</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">GRAPHENE_DEFAULT_MAX_ASSET_FEED_PUBLISHERS:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">the maximum number of feed publishers for a given asset</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">GRAPHENE_DEFAULT_MAX_WITNESSES:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">maximum number of active witnesses</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">GRAPHENE_DEFAULT_MAX_COMMITTEE:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">aximum number of active committee_members</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">GRAPHENE_DEFAULT_MAX_AUTHORITY_MEMBERSHIP:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">largest number of keys/accounts an authority can have</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">GRAPHENE_DEFAULT_BURN_PERCENT_OF_FEE:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">the percentage of the network’s allocation of a fee that is taken out of circulation</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">GRAPHENE_DEFAULT_NETWORK_PERCENT_OF_FEE:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">percent of transaction fees paid to network</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">GRAPHENE_DEFAULT_LIFETIME_REFERRER_PERCENT_OF_FEE:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">percent of transaction fees paid to network</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">GRAPHENE_DEFAULT_CASHBACK_VESTING_PERIOD_SEC:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">time after cashback rewards are accrued before they become liquid</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">GRAPHENE_DEFAULT_CASHBACK_VESTING_THRESHOLD:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">the maximum cashback that can be received without vesting</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">GRAPHENE_DEFAULT_WITNESS_PAY_PER_BLOCK:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">CORE to be allocated to witnesses (per block)</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">GRAPHENE_DEFAULT_WITNESS_PAY_VESTING_SECONDS:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">vesting_seconds parameter for witness VBO’s</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">GRAPHENE_DEFAULT_WORKER_BUDGET_PER_DAY:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">CORE to be allocated to workers (per day)</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">GRAPHENE_DEFAULT_MAX_ASSERT_OPCODE:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">predicate_opcode must be less than this number</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">GRAPHENE_DEFAULT_FEE_LIQUIDATION_THRESHOLD:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">value in CORE at which accumulated fees in blockchain-issued market assets should be liquidated</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">GRAPHENE_DEFAULT_ACCOUNTS_PER_FEE_SCALE:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">number of accounts between fee scalings</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">GRAPHENE_DEFAULT_ACCOUNT_FEE_SCALE_BITSHIFTS:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">number of times to left bitshift account registration fee at each scaling</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">GRAPHENE_MAX_SIG_CHECK_DEPTH:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="types">
<h3><a class="toc-backref" href="#id25">types</a><a class="headerlink" href="#types" title="Permalink to this headline">¶</a></h3>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">graphene</span><span class="o">::</span><span class="n">db</span><span class="p">;</span>

<span class="k">using</span>                               <span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="p">;</span>
<span class="k">using</span>                               <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="p">;</span>
<span class="k">using</span>                               <span class="n">std</span><span class="o">::</span><span class="n">unordered_map</span><span class="p">;</span>
<span class="k">using</span>                               <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">;</span>
<span class="k">using</span>                               <span class="n">std</span><span class="o">::</span><span class="n">deque</span><span class="p">;</span>
<span class="k">using</span>                               <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="p">;</span>
<span class="k">using</span>                               <span class="n">std</span><span class="o">::</span><span class="n">weak_ptr</span><span class="p">;</span>
<span class="k">using</span>                               <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="p">;</span>
<span class="k">using</span>                               <span class="n">std</span><span class="o">::</span><span class="n">set</span><span class="p">;</span>
<span class="k">using</span>                               <span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="p">;</span>
<span class="k">using</span>                               <span class="n">std</span><span class="o">::</span><span class="n">enable_shared_from_this</span><span class="p">;</span>
<span class="k">using</span>                               <span class="n">std</span><span class="o">::</span><span class="n">tie</span><span class="p">;</span>
<span class="k">using</span>                               <span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">;</span>

<span class="k">using</span>                               <span class="n">fc</span><span class="o">::</span><span class="n">smart_ref</span><span class="p">;</span>
<span class="k">using</span>                               <span class="n">fc</span><span class="o">::</span><span class="n">variant_object</span><span class="p">;</span>
<span class="k">using</span>                               <span class="n">fc</span><span class="o">::</span><span class="n">variant</span><span class="p">;</span>
<span class="k">using</span>                               <span class="n">fc</span><span class="o">::</span><span class="n">enum_type</span><span class="p">;</span>
<span class="k">using</span>                               <span class="n">fc</span><span class="o">::</span><span class="n">optional</span><span class="p">;</span>
<span class="k">using</span>                               <span class="n">fc</span><span class="o">::</span><span class="n">unsigned_int</span><span class="p">;</span>
<span class="k">using</span>                               <span class="n">fc</span><span class="o">::</span><span class="n">signed_int</span><span class="p">;</span>
<span class="k">using</span>                               <span class="n">fc</span><span class="o">::</span><span class="n">time_point_sec</span><span class="p">;</span>
<span class="k">using</span>                               <span class="n">fc</span><span class="o">::</span><span class="n">time_point</span><span class="p">;</span>
<span class="k">using</span>                               <span class="n">fc</span><span class="o">::</span><span class="n">safe</span><span class="p">;</span>
<span class="k">using</span>                               <span class="n">fc</span><span class="o">::</span><span class="n">flat_map</span><span class="p">;</span>
<span class="k">using</span>                               <span class="n">fc</span><span class="o">::</span><span class="n">flat_set</span><span class="p">;</span>
<span class="k">using</span>                               <span class="n">fc</span><span class="o">::</span><span class="n">static_variant</span><span class="p">;</span>
<span class="k">using</span>                               <span class="n">fc</span><span class="o">::</span><span class="n">ecc</span><span class="o">::</span><span class="n">range_proof_type</span><span class="p">;</span>
<span class="k">using</span>                               <span class="n">fc</span><span class="o">::</span><span class="n">ecc</span><span class="o">::</span><span class="n">range_proof_info</span><span class="p">;</span>
<span class="k">using</span>                               <span class="n">fc</span><span class="o">::</span><span class="n">ecc</span><span class="o">::</span><span class="n">commitment_type</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">void_t</span><span class="p">{};</span>

<span class="k">typedef</span> <span class="n">fc</span><span class="o">::</span><span class="n">ecc</span><span class="o">::</span><span class="n">private_key</span>        <span class="n">private_key_type</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">fc</span><span class="o">::</span><span class="n">sha256</span> <span class="n">chain_id_type</span><span class="p">;</span>

<span class="k">typedef</span> <span class="n">boost</span><span class="o">::</span><span class="n">rational</span><span class="o">&lt;</span> <span class="kt">int32_t</span> <span class="o">&gt;</span>   <span class="n">ratio_type</span><span class="p">;</span>

<span class="k">enum</span> <span class="n">asset_issuer_permission_flags</span>
<span class="p">{</span>
  <span class="n">charge_market_fee</span>    <span class="o">=</span> <span class="mh">0x01</span><span class="p">,</span> <span class="cm">/**&lt; an issuer-specified percentage of all market trades in this asset is paid to the issuer */</span>
  <span class="n">white_list</span>           <span class="o">=</span> <span class="mh">0x02</span><span class="p">,</span> <span class="cm">/**&lt; accounts must be whitelisted in order to hold this asset */</span>
  <span class="n">override_authority</span>   <span class="o">=</span> <span class="mh">0x04</span><span class="p">,</span> <span class="cm">/**&lt; issuer may transfer asset back to himself */</span>
  <span class="n">transfer_restricted</span>  <span class="o">=</span> <span class="mh">0x08</span><span class="p">,</span> <span class="cm">/**&lt; require the issuer to be one party to every transfer */</span>
  <span class="n">disable_force_settle</span> <span class="o">=</span> <span class="mh">0x10</span><span class="p">,</span> <span class="cm">/**&lt; disable force settling */</span>
  <span class="n">global_settle</span>        <span class="o">=</span> <span class="mh">0x20</span><span class="p">,</span> <span class="cm">/**&lt; allow the bitasset issuer to force a global settling -- this may be set in permissions, but not flags */</span>
  <span class="n">disable_confidential</span> <span class="o">=</span> <span class="mh">0x40</span><span class="p">,</span> <span class="cm">/**&lt; allow the asset to be used with confidential transactions */</span>
  <span class="n">witness_fed_asset</span>    <span class="o">=</span> <span class="mh">0x80</span><span class="p">,</span> <span class="cm">/**&lt; allow the asset to be fed by witnesses */</span>
  <span class="n">committee_fed_asset</span>  <span class="o">=</span> <span class="mh">0x100</span> <span class="cm">/**&lt; allow the asset to be fed by the committee */</span>
<span class="p">};</span>

<span class="k">const</span> <span class="k">static</span> <span class="kt">uint32_t</span> <span class="n">ASSET_ISSUER_PERMISSION_MASK</span> <span class="o">=</span> <span class="n">charge_market_fee</span><span class="o">|</span><span class="n">white_list</span><span class="o">|</span><span class="n">override_authority</span><span class="o">|</span><span class="n">transfer_restricted</span><span class="o">|</span><span class="n">disable_force_settle</span><span class="o">|</span><span class="n">global_settle</span><span class="o">|</span><span class="n">disable_confidential</span>
  <span class="o">|</span><span class="n">witness_fed_asset</span><span class="o">|</span><span class="n">committee_fed_asset</span><span class="p">;</span>

<span class="k">const</span> <span class="k">static</span> <span class="kt">uint32_t</span> <span class="n">UIA_ASSET_ISSUER_PERMISSION_MASK</span> <span class="o">=</span> <span class="n">charge_market_fee</span><span class="o">|</span><span class="n">white_list</span><span class="o">|</span><span class="n">override_authority</span><span class="o">|</span><span class="n">transfer_restricted</span><span class="o">|</span><span class="n">disable_confidential</span><span class="p">;</span>

<span class="k">enum</span> <span class="n">reserved_spaces</span>
<span class="p">{</span>
  <span class="n">relative_protocol_ids</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
  <span class="n">protocol_ids</span>          <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
  <span class="n">implementation_ids</span>    <span class="o">=</span> <span class="mi">2</span>
<span class="p">};</span>

<span class="kr">inline</span> <span class="kt">bool</span> <span class="nf">is_relative</span><span class="p">(</span> <span class="n">object_id_type</span> <span class="n">o</span> <span class="p">){</span> <span class="k">return</span> <span class="n">o</span><span class="p">.</span><span class="n">space</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">;</span> <span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li>List all object types from all namespaces here so they can be easily reflected and displayed in debug output.  If a 3rd party  wants to extend the core code then they will have to change the packed_object::type field from enum_type to uint16 to avoid warnings when converting packed_objects to/from json.</li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">enum</span> <span class="n">object_type</span>
<span class="p">{</span>
  <span class="n">null_object_type</span><span class="p">,</span>
  <span class="n">base_object_type</span><span class="p">,</span>
  <span class="n">account_object_type</span><span class="p">,</span>
  <span class="n">asset_object_type</span><span class="p">,</span>
  <span class="n">force_settlement_object_type</span><span class="p">,</span>
  <span class="n">committee_member_object_type</span><span class="p">,</span>
  <span class="n">witness_object_type</span><span class="p">,</span>
  <span class="n">limit_order_object_type</span><span class="p">,</span>
  <span class="n">call_order_object_type</span><span class="p">,</span>
  <span class="n">custom_object_type</span><span class="p">,</span>
  <span class="n">proposal_object_type</span><span class="p">,</span>
  <span class="n">operation_history_object_type</span><span class="p">,</span>
  <span class="n">withdraw_permission_object_type</span><span class="p">,</span>
  <span class="n">vesting_balance_object_type</span><span class="p">,</span>
  <span class="n">worker_object_type</span><span class="p">,</span>
  <span class="n">balance_object_type</span><span class="p">,</span>
  <span class="n">OBJECT_TYPE_COUNT</span> <span class="c1">///&lt; Sentry value which contains the number of different object types</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">impl_object_type</span>
<span class="p">{</span>
  <span class="n">impl_global_property_object_type</span><span class="p">,</span>
  <span class="n">impl_dynamic_global_property_object_type</span><span class="p">,</span>
  <span class="n">impl_reserved0_object_type</span><span class="p">,</span>      <span class="c1">// formerly index_meta_object_type, TODO: delete me</span>
  <span class="n">impl_asset_dynamic_data_type</span><span class="p">,</span>
  <span class="n">impl_asset_bitasset_data_type</span><span class="p">,</span>
  <span class="n">impl_account_balance_object_type</span><span class="p">,</span>
  <span class="n">impl_account_statistics_object_type</span><span class="p">,</span>
  <span class="n">impl_transaction_object_type</span><span class="p">,</span>
  <span class="n">impl_block_summary_object_type</span><span class="p">,</span>
  <span class="n">impl_account_transaction_history_object_type</span><span class="p">,</span>
  <span class="n">impl_blinded_balance_object_type</span><span class="p">,</span>
  <span class="n">impl_chain_property_object_type</span><span class="p">,</span>
  <span class="n">impl_witness_schedule_object_type</span><span class="p">,</span>
  <span class="n">impl_budget_record_object_type</span><span class="p">,</span>
  <span class="n">impl_special_authority_object_type</span><span class="p">,</span>
  <span class="n">impl_buyback_object_type</span><span class="p">,</span>
  <span class="n">impl_fba_accumulator_object_type</span><span class="p">,</span>
  <span class="n">impl_collateral_bid_object_type</span>
<span class="p">};</span>


<span class="k">class</span> <span class="nc">account_object</span><span class="p">;</span>
<span class="k">class</span> <span class="nc">committee_member_object</span><span class="p">;</span>
<span class="k">class</span> <span class="nc">witness_object</span><span class="p">;</span>
<span class="k">class</span> <span class="nc">asset_object</span><span class="p">;</span>
<span class="k">class</span> <span class="nc">force_settlement_object</span><span class="p">;</span>
<span class="k">class</span> <span class="nc">limit_order_object</span><span class="p">;</span>
<span class="k">class</span> <span class="nc">call_order_object</span><span class="p">;</span>
<span class="k">class</span> <span class="nc">custom_object</span><span class="p">;</span>
<span class="k">class</span> <span class="nc">proposal_object</span><span class="p">;</span>
<span class="k">class</span> <span class="nc">operation_history_object</span><span class="p">;</span>
<span class="k">class</span> <span class="nc">withdraw_permission_object</span><span class="p">;</span>
<span class="k">class</span> <span class="nc">vesting_balance_object</span><span class="p">;</span>
<span class="k">class</span> <span class="nc">worker_object</span><span class="p">;</span>
<span class="k">class</span> <span class="nc">balance_object</span><span class="p">;</span>
<span class="k">class</span> <span class="nc">blinded_balance_object</span><span class="p">;</span>


<span class="k">typedef</span> <span class="n">object_id</span><span class="o">&lt;</span> <span class="n">protocol_ids</span><span class="p">,</span> <span class="n">account_object_type</span><span class="p">,</span>            <span class="n">account_object</span><span class="o">&gt;</span>               <span class="n">account_id_type</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">object_id</span><span class="o">&lt;</span> <span class="n">protocol_ids</span><span class="p">,</span> <span class="n">asset_object_type</span><span class="p">,</span>              <span class="n">asset_object</span><span class="o">&gt;</span>                 <span class="n">asset_id_type</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">object_id</span><span class="o">&lt;</span> <span class="n">protocol_ids</span><span class="p">,</span> <span class="n">force_settlement_object_type</span><span class="p">,</span>   <span class="n">force_settlement_object</span><span class="o">&gt;</span>      <span class="n">force_settlement_id_type</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">object_id</span><span class="o">&lt;</span> <span class="n">protocol_ids</span><span class="p">,</span> <span class="n">committee_member_object_type</span><span class="p">,</span>   <span class="n">committee_member_object</span><span class="o">&gt;</span>      <span class="n">committee_member_id_type</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">object_id</span><span class="o">&lt;</span> <span class="n">protocol_ids</span><span class="p">,</span> <span class="n">witness_object_type</span><span class="p">,</span>            <span class="n">witness_object</span><span class="o">&gt;</span>               <span class="n">witness_id_type</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">object_id</span><span class="o">&lt;</span> <span class="n">protocol_ids</span><span class="p">,</span> <span class="n">limit_order_object_type</span><span class="p">,</span>        <span class="n">limit_order_object</span><span class="o">&gt;</span>           <span class="n">limit_order_id_type</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">object_id</span><span class="o">&lt;</span> <span class="n">protocol_ids</span><span class="p">,</span> <span class="n">call_order_object_type</span><span class="p">,</span>         <span class="n">call_order_object</span><span class="o">&gt;</span>            <span class="n">call_order_id_type</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">object_id</span><span class="o">&lt;</span> <span class="n">protocol_ids</span><span class="p">,</span> <span class="n">custom_object_type</span><span class="p">,</span>             <span class="n">custom_object</span><span class="o">&gt;</span>                <span class="n">custom_id_type</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">object_id</span><span class="o">&lt;</span> <span class="n">protocol_ids</span><span class="p">,</span> <span class="n">proposal_object_type</span><span class="p">,</span>           <span class="n">proposal_object</span><span class="o">&gt;</span>              <span class="n">proposal_id_type</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">object_id</span><span class="o">&lt;</span> <span class="n">protocol_ids</span><span class="p">,</span> <span class="n">operation_history_object_type</span><span class="p">,</span>  <span class="n">operation_history_object</span><span class="o">&gt;</span>     <span class="n">operation_history_id_type</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">object_id</span><span class="o">&lt;</span> <span class="n">protocol_ids</span><span class="p">,</span> <span class="n">withdraw_permission_object_type</span><span class="p">,</span><span class="n">withdraw_permission_object</span><span class="o">&gt;</span>   <span class="n">withdraw_permission_id_type</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">object_id</span><span class="o">&lt;</span> <span class="n">protocol_ids</span><span class="p">,</span> <span class="n">vesting_balance_object_type</span><span class="p">,</span>    <span class="n">vesting_balance_object</span><span class="o">&gt;</span>       <span class="n">vesting_balance_id_type</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">object_id</span><span class="o">&lt;</span> <span class="n">protocol_ids</span><span class="p">,</span> <span class="n">worker_object_type</span><span class="p">,</span>             <span class="n">worker_object</span><span class="o">&gt;</span>                <span class="n">worker_id_type</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">object_id</span><span class="o">&lt;</span> <span class="n">protocol_ids</span><span class="p">,</span> <span class="n">balance_object_type</span><span class="p">,</span>            <span class="n">balance_object</span><span class="o">&gt;</span>               <span class="n">balance_id_type</span><span class="p">;</span>

<span class="c1">// implementation types</span>
<span class="k">class</span> <span class="nc">global_property_object</span><span class="p">;</span>
<span class="k">class</span> <span class="nc">dynamic_global_property_object</span><span class="p">;</span>
<span class="k">class</span> <span class="nc">asset_dynamic_data_object</span><span class="p">;</span>
<span class="k">class</span> <span class="nc">asset_bitasset_data_object</span><span class="p">;</span>
<span class="k">class</span> <span class="nc">account_balance_object</span><span class="p">;</span>
<span class="k">class</span> <span class="nc">account_statistics_object</span><span class="p">;</span>
<span class="k">class</span> <span class="nc">transaction_object</span><span class="p">;</span>
<span class="k">class</span> <span class="nc">block_summary_object</span><span class="p">;</span>
<span class="k">class</span> <span class="nc">account_transaction_history_object</span><span class="p">;</span>
<span class="k">class</span> <span class="nc">chain_property_object</span><span class="p">;</span>
<span class="k">class</span> <span class="nc">witness_schedule_object</span><span class="p">;</span>
<span class="k">class</span> <span class="nc">budget_record_object</span><span class="p">;</span>
<span class="k">class</span> <span class="nc">special_authority_object</span><span class="p">;</span>
<span class="k">class</span> <span class="nc">buyback_object</span><span class="p">;</span>
<span class="k">class</span> <span class="nc">fba_accumulator_object</span><span class="p">;</span>
<span class="k">class</span> <span class="nc">collateral_bid_object</span><span class="p">;</span>

<span class="k">typedef</span> <span class="n">object_id</span><span class="o">&lt;</span> <span class="n">implementation_ids</span><span class="p">,</span> <span class="n">impl_global_property_object_type</span><span class="p">,</span>  <span class="n">global_property_object</span><span class="o">&gt;</span>                    <span class="n">global_property_id_type</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">object_id</span><span class="o">&lt;</span> <span class="n">implementation_ids</span><span class="p">,</span> <span class="n">impl_dynamic_global_property_object_type</span><span class="p">,</span>  <span class="n">dynamic_global_property_object</span><span class="o">&gt;</span>    <span class="n">dynamic_global_property_id_type</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">object_id</span><span class="o">&lt;</span> <span class="n">implementation_ids</span><span class="p">,</span> <span class="n">impl_asset_dynamic_data_type</span><span class="p">,</span>      <span class="n">asset_dynamic_data_object</span><span class="o">&gt;</span>                 <span class="n">asset_dynamic_data_id_type</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">object_id</span><span class="o">&lt;</span> <span class="n">implementation_ids</span><span class="p">,</span> <span class="n">impl_asset_bitasset_data_type</span><span class="p">,</span>     <span class="n">asset_bitasset_data_object</span><span class="o">&gt;</span>                <span class="n">asset_bitasset_data_id_type</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">object_id</span><span class="o">&lt;</span> <span class="n">implementation_ids</span><span class="p">,</span> <span class="n">impl_account_balance_object_type</span><span class="p">,</span>  <span class="n">account_balance_object</span><span class="o">&gt;</span>                    <span class="n">account_balance_id_type</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">object_id</span><span class="o">&lt;</span> <span class="n">implementation_ids</span><span class="p">,</span> <span class="n">impl_account_statistics_object_type</span><span class="p">,</span><span class="n">account_statistics_object</span><span class="o">&gt;</span>                <span class="n">account_statistics_id_type</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">object_id</span><span class="o">&lt;</span> <span class="n">implementation_ids</span><span class="p">,</span> <span class="n">impl_transaction_object_type</span><span class="p">,</span>      <span class="n">transaction_object</span><span class="o">&gt;</span>                        <span class="n">transaction_obj_id_type</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">object_id</span><span class="o">&lt;</span> <span class="n">implementation_ids</span><span class="p">,</span> <span class="n">impl_block_summary_object_type</span><span class="p">,</span>    <span class="n">block_summary_object</span><span class="o">&gt;</span>                      <span class="n">block_summary_id_type</span><span class="p">;</span>

<span class="k">typedef</span> <span class="n">object_id</span><span class="o">&lt;</span> <span class="n">implementation_ids</span><span class="p">,</span>
                                  <span class="n">impl_account_transaction_history_object_type</span><span class="p">,</span>
                                  <span class="n">account_transaction_history_object</span><span class="o">&gt;</span>       <span class="n">account_transaction_history_id_type</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">object_id</span><span class="o">&lt;</span> <span class="n">implementation_ids</span><span class="p">,</span> <span class="n">impl_chain_property_object_type</span><span class="p">,</span>   <span class="n">chain_property_object</span><span class="o">&gt;</span>                     <span class="n">chain_property_id_type</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">object_id</span><span class="o">&lt;</span> <span class="n">implementation_ids</span><span class="p">,</span> <span class="n">impl_witness_schedule_object_type</span><span class="p">,</span> <span class="n">witness_schedule_object</span><span class="o">&gt;</span>                   <span class="n">witness_schedule_id_type</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">object_id</span><span class="o">&lt;</span> <span class="n">implementation_ids</span><span class="p">,</span> <span class="n">impl_budget_record_object_type</span><span class="p">,</span> <span class="n">budget_record_object</span> <span class="o">&gt;</span>                        <span class="n">budget_record_id_type</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">object_id</span><span class="o">&lt;</span> <span class="n">implementation_ids</span><span class="p">,</span> <span class="n">impl_blinded_balance_object_type</span><span class="p">,</span> <span class="n">blinded_balance_object</span> <span class="o">&gt;</span>                    <span class="n">blinded_balance_id_type</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">object_id</span><span class="o">&lt;</span> <span class="n">implementation_ids</span><span class="p">,</span> <span class="n">impl_special_authority_object_type</span><span class="p">,</span> <span class="n">special_authority_object</span> <span class="o">&gt;</span>                <span class="n">special_authority_id_type</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">object_id</span><span class="o">&lt;</span> <span class="n">implementation_ids</span><span class="p">,</span> <span class="n">impl_buyback_object_type</span><span class="p">,</span> <span class="n">buyback_object</span> <span class="o">&gt;</span>                                    <span class="n">buyback_id_type</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">object_id</span><span class="o">&lt;</span> <span class="n">implementation_ids</span><span class="p">,</span> <span class="n">impl_fba_accumulator_object_type</span><span class="p">,</span> <span class="n">fba_accumulator_object</span> <span class="o">&gt;</span>                    <span class="n">fba_accumulator_id_type</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">object_id</span><span class="o">&lt;</span> <span class="n">implementation_ids</span><span class="p">,</span> <span class="n">impl_collateral_bid_object_type</span><span class="p">,</span> <span class="n">collateral_bid_object</span> <span class="o">&gt;</span>                      <span class="n">collateral_bid_id_type</span><span class="p">;</span>

<span class="k">typedef</span> <span class="n">fc</span><span class="o">::</span><span class="n">array</span><span class="o">&lt;</span><span class="kt">char</span><span class="p">,</span> <span class="n">GRAPHENE_MAX_ASSET_SYMBOL_LENGTH</span><span class="o">&gt;</span>    <span class="n">symbol_type</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">fc</span><span class="o">::</span><span class="n">ripemd160</span>                                        <span class="n">block_id_type</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">fc</span><span class="o">::</span><span class="n">ripemd160</span>                                        <span class="n">checksum_type</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">fc</span><span class="o">::</span><span class="n">ripemd160</span>                                        <span class="n">transaction_id_type</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">fc</span><span class="o">::</span><span class="n">sha256</span>                                           <span class="n">digest_type</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">fc</span><span class="o">::</span><span class="n">ecc</span><span class="o">::</span><span class="n">compact_signature</span>                           <span class="n">signature_type</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">safe</span><span class="o">&lt;</span><span class="kt">int64_t</span><span class="o">&gt;</span>                                        <span class="n">share_type</span><span class="p">;</span>
<span class="k">typedef</span> <span class="kt">uint16_t</span>                                             <span class="n">weight_type</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">public_key_type</span>
<span class="p">{</span>
   <span class="k">struct</span> <span class="n">binary_key</span>
   <span class="p">{</span>
          <span class="n">binary_key</span><span class="p">()</span> <span class="p">{}</span>
          <span class="kt">uint32_t</span>                 <span class="n">check</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
          <span class="n">fc</span><span class="o">::</span><span class="n">ecc</span><span class="o">::</span><span class="n">public_key_data</span> <span class="n">data</span><span class="p">;</span>
   <span class="p">};</span>
   <span class="n">fc</span><span class="o">::</span><span class="n">ecc</span><span class="o">::</span><span class="n">public_key_data</span> <span class="n">key_data</span><span class="p">;</span>
   <span class="n">public_key_type</span><span class="p">();</span>
   <span class="n">public_key_type</span><span class="p">(</span> <span class="k">const</span> <span class="n">fc</span><span class="o">::</span><span class="n">ecc</span><span class="o">::</span><span class="n">public_key_data</span><span class="o">&amp;</span> <span class="n">data</span> <span class="p">);</span>
   <span class="n">public_key_type</span><span class="p">(</span> <span class="k">const</span> <span class="n">fc</span><span class="o">::</span><span class="n">ecc</span><span class="o">::</span><span class="n">public_key</span><span class="o">&amp;</span> <span class="n">pubkey</span> <span class="p">);</span>
   <span class="k">explicit</span> <span class="nf">public_key_type</span><span class="p">(</span> <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">base58str</span> <span class="p">);</span>
   <span class="k">operator</span> <span class="n">fc</span><span class="o">::</span><span class="n">ecc</span><span class="o">::</span><span class="n">public_key_data</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
   <span class="k">operator</span> <span class="n">fc</span><span class="o">::</span><span class="n">ecc</span><span class="o">::</span><span class="n">public_key</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
   <span class="k">explicit</span> <span class="k">operator</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
   <span class="k">friend</span> <span class="kt">bool</span> <span class="k">operator</span> <span class="o">==</span> <span class="p">(</span> <span class="k">const</span> <span class="n">public_key_type</span><span class="o">&amp;</span> <span class="n">p1</span><span class="p">,</span> <span class="k">const</span> <span class="n">fc</span><span class="o">::</span><span class="n">ecc</span><span class="o">::</span><span class="n">public_key</span><span class="o">&amp;</span> <span class="n">p2</span><span class="p">);</span>
   <span class="k">friend</span> <span class="kt">bool</span> <span class="k">operator</span> <span class="o">==</span> <span class="p">(</span> <span class="k">const</span> <span class="n">public_key_type</span><span class="o">&amp;</span> <span class="n">p1</span><span class="p">,</span> <span class="k">const</span> <span class="n">public_key_type</span><span class="o">&amp;</span> <span class="n">p2</span><span class="p">);</span>
   <span class="k">friend</span> <span class="kt">bool</span> <span class="k">operator</span> <span class="o">!=</span> <span class="p">(</span> <span class="k">const</span> <span class="n">public_key_type</span><span class="o">&amp;</span> <span class="n">p1</span><span class="p">,</span> <span class="k">const</span> <span class="n">public_key_type</span><span class="o">&amp;</span> <span class="n">p2</span><span class="p">);</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">extended_public_key_type</span>
<span class="p">{</span>
  <span class="k">struct</span> <span class="n">binary_key</span>
  <span class="p">{</span>
         <span class="n">binary_key</span><span class="p">()</span> <span class="p">{}</span>
         <span class="kt">uint32_t</span>                   <span class="n">check</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
         <span class="n">fc</span><span class="o">::</span><span class="n">ecc</span><span class="o">::</span><span class="n">extended_key_data</span> <span class="n">data</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="n">fc</span><span class="o">::</span><span class="n">ecc</span><span class="o">::</span><span class="n">extended_key_data</span> <span class="n">key_data</span><span class="p">;</span>

  <span class="n">extended_public_key_type</span><span class="p">();</span>
  <span class="n">extended_public_key_type</span><span class="p">(</span> <span class="k">const</span> <span class="n">fc</span><span class="o">::</span><span class="n">ecc</span><span class="o">::</span><span class="n">extended_key_data</span><span class="o">&amp;</span> <span class="n">data</span> <span class="p">);</span>
  <span class="n">extended_public_key_type</span><span class="p">(</span> <span class="k">const</span> <span class="n">fc</span><span class="o">::</span><span class="n">ecc</span><span class="o">::</span><span class="n">extended_public_key</span><span class="o">&amp;</span> <span class="n">extpubkey</span> <span class="p">);</span>
  <span class="k">explicit</span> <span class="nf">extended_public_key_type</span><span class="p">(</span> <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">base58str</span> <span class="p">);</span>
  <span class="k">operator</span> <span class="n">fc</span><span class="o">::</span><span class="n">ecc</span><span class="o">::</span><span class="n">extended_public_key</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
  <span class="k">explicit</span> <span class="k">operator</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
  <span class="k">friend</span> <span class="kt">bool</span> <span class="k">operator</span> <span class="o">==</span> <span class="p">(</span> <span class="k">const</span> <span class="n">extended_public_key_type</span><span class="o">&amp;</span> <span class="n">p1</span><span class="p">,</span> <span class="k">const</span> <span class="n">fc</span><span class="o">::</span><span class="n">ecc</span><span class="o">::</span><span class="n">extended_public_key</span><span class="o">&amp;</span> <span class="n">p2</span><span class="p">);</span>
  <span class="k">friend</span> <span class="kt">bool</span> <span class="k">operator</span> <span class="o">==</span> <span class="p">(</span> <span class="k">const</span> <span class="n">extended_public_key_type</span><span class="o">&amp;</span> <span class="n">p1</span><span class="p">,</span> <span class="k">const</span> <span class="n">extended_public_key_type</span><span class="o">&amp;</span> <span class="n">p2</span><span class="p">);</span>
  <span class="k">friend</span> <span class="kt">bool</span> <span class="k">operator</span> <span class="o">!=</span> <span class="p">(</span> <span class="k">const</span> <span class="n">extended_public_key_type</span><span class="o">&amp;</span> <span class="n">p1</span><span class="p">,</span> <span class="k">const</span> <span class="n">extended_public_key_type</span><span class="o">&amp;</span> <span class="n">p2</span><span class="p">);</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">extended_private_key_type</span>
<span class="p">{</span>
  <span class="k">struct</span> <span class="n">binary_key</span>
  <span class="p">{</span>
         <span class="n">binary_key</span><span class="p">()</span> <span class="p">{}</span>
         <span class="kt">uint32_t</span>                   <span class="n">check</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
         <span class="n">fc</span><span class="o">::</span><span class="n">ecc</span><span class="o">::</span><span class="n">extended_key_data</span> <span class="n">data</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="n">fc</span><span class="o">::</span><span class="n">ecc</span><span class="o">::</span><span class="n">extended_key_data</span> <span class="n">key_data</span><span class="p">;</span>

  <span class="n">extended_private_key_type</span><span class="p">();</span>
  <span class="n">extended_private_key_type</span><span class="p">(</span> <span class="k">const</span> <span class="n">fc</span><span class="o">::</span><span class="n">ecc</span><span class="o">::</span><span class="n">extended_key_data</span><span class="o">&amp;</span> <span class="n">data</span> <span class="p">);</span>
  <span class="n">extended_private_key_type</span><span class="p">(</span> <span class="k">const</span> <span class="n">fc</span><span class="o">::</span><span class="n">ecc</span><span class="o">::</span><span class="n">extended_private_key</span><span class="o">&amp;</span> <span class="n">extprivkey</span> <span class="p">);</span>
  <span class="k">explicit</span> <span class="nf">extended_private_key_type</span><span class="p">(</span> <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">base58str</span> <span class="p">);</span>
  <span class="k">operator</span> <span class="n">fc</span><span class="o">::</span><span class="n">ecc</span><span class="o">::</span><span class="n">extended_private_key</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
  <span class="k">explicit</span> <span class="k">operator</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
  <span class="k">friend</span> <span class="kt">bool</span> <span class="k">operator</span> <span class="o">==</span> <span class="p">(</span> <span class="k">const</span> <span class="n">extended_private_key_type</span><span class="o">&amp;</span> <span class="n">p1</span><span class="p">,</span> <span class="k">const</span> <span class="n">fc</span><span class="o">::</span><span class="n">ecc</span><span class="o">::</span><span class="n">extended_private_key</span><span class="o">&amp;</span> <span class="n">p2</span><span class="p">);</span>
  <span class="k">friend</span> <span class="kt">bool</span> <span class="k">operator</span> <span class="o">==</span> <span class="p">(</span> <span class="k">const</span> <span class="n">extended_private_key_type</span><span class="o">&amp;</span> <span class="n">p1</span><span class="p">,</span> <span class="k">const</span> <span class="n">extended_private_key_type</span><span class="o">&amp;</span> <span class="n">p2</span><span class="p">);</span>
  <span class="k">friend</span> <span class="kt">bool</span> <span class="k">operator</span> <span class="o">!=</span> <span class="p">(</span> <span class="k">const</span> <span class="n">extended_private_key_type</span><span class="o">&amp;</span> <span class="n">p1</span><span class="p">,</span> <span class="k">const</span> <span class="n">extended_private_key_type</span><span class="o">&amp;</span> <span class="n">p2</span><span class="p">);</span>
<span class="p">};</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="n">fc</span>
<span class="p">{</span>
        <span class="kt">void</span> <span class="n">to_variant</span><span class="p">(</span> <span class="k">const</span> <span class="n">graphene</span><span class="o">::</span><span class="n">chain</span><span class="o">::</span><span class="n">public_key_type</span><span class="o">&amp;</span> <span class="n">var</span><span class="p">,</span>  <span class="n">fc</span><span class="o">::</span><span class="n">variant</span><span class="o">&amp;</span> <span class="n">vo</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">max_depth</span> <span class="o">=</span> <span class="mi">2</span> <span class="p">);</span>
        <span class="kt">void</span> <span class="nf">from_variant</span><span class="p">(</span> <span class="k">const</span> <span class="n">fc</span><span class="o">::</span><span class="n">variant</span><span class="o">&amp;</span> <span class="n">var</span><span class="p">,</span>  <span class="n">graphene</span><span class="o">::</span><span class="n">chain</span><span class="o">::</span><span class="n">public_key_type</span><span class="o">&amp;</span> <span class="n">vo</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">max_depth</span> <span class="o">=</span> <span class="mi">2</span> <span class="p">);</span>
        <span class="kt">void</span> <span class="nf">to_variant</span><span class="p">(</span> <span class="k">const</span> <span class="n">graphene</span><span class="o">::</span><span class="n">chain</span><span class="o">::</span><span class="n">extended_public_key_type</span><span class="o">&amp;</span> <span class="n">var</span><span class="p">,</span> <span class="n">fc</span><span class="o">::</span><span class="n">variant</span><span class="o">&amp;</span> <span class="n">vo</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">max_depth</span> <span class="o">=</span> <span class="mi">2</span> <span class="p">);</span>
        <span class="kt">void</span> <span class="nf">from_variant</span><span class="p">(</span> <span class="k">const</span> <span class="n">fc</span><span class="o">::</span><span class="n">variant</span><span class="o">&amp;</span> <span class="n">var</span><span class="p">,</span> <span class="n">graphene</span><span class="o">::</span><span class="n">chain</span><span class="o">::</span><span class="n">extended_public_key_type</span><span class="o">&amp;</span> <span class="n">vo</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">max_depth</span> <span class="o">=</span> <span class="mi">2</span> <span class="p">);</span>
        <span class="kt">void</span> <span class="nf">to_variant</span><span class="p">(</span> <span class="k">const</span> <span class="n">graphene</span><span class="o">::</span><span class="n">chain</span><span class="o">::</span><span class="n">extended_private_key_type</span><span class="o">&amp;</span> <span class="n">var</span><span class="p">,</span> <span class="n">fc</span><span class="o">::</span><span class="n">variant</span><span class="o">&amp;</span> <span class="n">vo</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">max_depth</span> <span class="o">=</span> <span class="mi">2</span> <span class="p">);</span>
        <span class="kt">void</span> <span class="nf">from_variant</span><span class="p">(</span> <span class="k">const</span> <span class="n">fc</span><span class="o">::</span><span class="n">variant</span><span class="o">&amp;</span> <span class="n">var</span><span class="p">,</span> <span class="n">graphene</span><span class="o">::</span><span class="n">chain</span><span class="o">::</span><span class="n">extended_private_key_type</span><span class="o">&amp;</span> <span class="n">vo</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">max_depth</span> <span class="o">=</span> <span class="mi">2</span> <span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="operations">
<h3><a class="toc-backref" href="#id26">operations</a><a class="headerlink" href="#operations" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>operations</li>
<li>Defines the set of valid operations as a discriminated union type.</li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span> <span class="n">fc</span><span class="o">::</span><span class="n">static_variant</span><span class="o">&lt;</span>
        <span class="n">transfer_operation</span><span class="p">,</span>
        <span class="n">limit_order_create_operation</span><span class="p">,</span>
        <span class="n">limit_order_cancel_operation</span><span class="p">,</span>
        <span class="n">call_order_update_operation</span><span class="p">,</span>
        <span class="n">fill_order_operation</span><span class="p">,</span>           <span class="c1">// VIRTUAL</span>
        <span class="n">account_create_operation</span><span class="p">,</span>
        <span class="n">account_update_operation</span><span class="p">,</span>
        <span class="n">account_whitelist_operation</span><span class="p">,</span>
        <span class="n">account_upgrade_operation</span><span class="p">,</span>
        <span class="n">account_transfer_operation</span><span class="p">,</span>
        <span class="n">asset_create_operation</span><span class="p">,</span>
        <span class="n">asset_update_operation</span><span class="p">,</span>
        <span class="n">asset_update_bitasset_operation</span><span class="p">,</span>
        <span class="n">asset_update_feed_producers_operation</span><span class="p">,</span>
        <span class="n">asset_issue_operation</span><span class="p">,</span>
        <span class="n">asset_reserve_operation</span><span class="p">,</span>
        <span class="n">asset_fund_fee_pool_operation</span><span class="p">,</span>
        <span class="n">asset_settle_operation</span><span class="p">,</span>
        <span class="n">asset_global_settle_operation</span><span class="p">,</span>
        <span class="n">asset_publish_feed_operation</span><span class="p">,</span>
        <span class="n">witness_create_operation</span><span class="p">,</span>
        <span class="n">witness_update_operation</span><span class="p">,</span>
        <span class="n">proposal_create_operation</span><span class="p">,</span>
        <span class="n">proposal_update_operation</span><span class="p">,</span>
        <span class="n">proposal_delete_operation</span><span class="p">,</span>
        <span class="n">withdraw_permission_create_operation</span><span class="p">,</span>
        <span class="n">withdraw_permission_update_operation</span><span class="p">,</span>
        <span class="n">withdraw_permission_claim_operation</span><span class="p">,</span>
        <span class="n">withdraw_permission_delete_operation</span><span class="p">,</span>
        <span class="n">committee_member_create_operation</span><span class="p">,</span>
        <span class="n">committee_member_update_operation</span><span class="p">,</span>
        <span class="n">committee_member_update_global_parameters_operation</span><span class="p">,</span>
        <span class="n">vesting_balance_create_operation</span><span class="p">,</span>
        <span class="n">vesting_balance_withdraw_operation</span><span class="p">,</span>
        <span class="n">worker_create_operation</span><span class="p">,</span>
        <span class="n">custom_operation</span><span class="p">,</span>
        <span class="n">assert_operation</span><span class="p">,</span>
        <span class="n">balance_claim_operation</span><span class="p">,</span>
        <span class="n">override_transfer_operation</span><span class="p">,</span>
        <span class="n">transfer_to_blind_operation</span><span class="p">,</span>
        <span class="n">blind_transfer_operation</span><span class="p">,</span>
        <span class="n">transfer_from_blind_operation</span><span class="p">,</span>
        <span class="n">asset_settle_cancel_operation</span><span class="p">,</span>  <span class="c1">// VIRTUAL</span>
        <span class="n">asset_claim_fees_operation</span><span class="p">,</span>
        <span class="n">fba_distribute_operation</span><span class="p">,</span>       <span class="c1">// VIRTUAL</span>
        <span class="n">bid_collateral_operation</span><span class="p">,</span>
        <span class="n">execute_bid_operation</span><span class="p">,</span>          <span class="c1">// VIRTUAL</span>
        <span class="n">asset_claim_pool_operation</span><span class="p">,</span>
        <span class="n">asset_update_issuer_operation</span>
        <span class="o">&gt;</span> <span class="n">operation</span><span class="p">;</span>
</pre></div>
</div>
<ul class="simple">
<li>Appends required authorities to the result vector.  The authorities appended are not the same as those returned by get_required_auth</li>
<li>Return a set of required authorities for &#64;ref op.</li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">operation_get_required_authorities</span><span class="p">(</span> <span class="k">const</span> <span class="n">operation</span><span class="o">&amp;</span> <span class="n">op</span><span class="p">,</span>
         <span class="n">flat_set</span><span class="o">&lt;</span><span class="n">account_id_type</span><span class="o">&gt;&amp;</span> <span class="n">active</span><span class="p">,</span>
         <span class="n">flat_set</span><span class="o">&lt;</span><span class="n">account_id_type</span><span class="o">&gt;&amp;</span> <span class="n">owner</span><span class="p">,</span>
         <span class="n">vector</span><span class="o">&lt;</span><span class="n">authority</span><span class="o">&gt;&amp;</span>  <span class="n">other</span> <span class="p">);</span>

<span class="kt">void</span> <span class="nf">operation_validate</span><span class="p">(</span> <span class="k">const</span> <span class="n">operation</span><span class="o">&amp;</span> <span class="n">op</span> <span class="p">);</span>
</pre></div>
</div>
<ul class="simple">
<li>necessary to support nested operations inside the <cite>proposal_create_operation</cite></li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">op_wrapper</span>
<span class="p">{</span>
  <span class="k">public</span><span class="o">:</span>
   <span class="n">op_wrapper</span><span class="p">(</span><span class="k">const</span> <span class="n">operation</span><span class="o">&amp;</span> <span class="n">op</span> <span class="o">=</span> <span class="n">operation</span><span class="p">())</span><span class="o">:</span><span class="n">op</span><span class="p">(</span><span class="n">op</span><span class="p">){}</span>
   <span class="n">operation</span> <span class="n">op</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="account">
<h2><a class="toc-backref" href="#id27">Account</a><a class="headerlink" href="#account" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id4">
<h3><a class="toc-backref" href="#id28">account</a><a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">bool</span> <span class="nf">is_valid_name</span><span class="p">(</span> <span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">s</span> <span class="p">);</span>
<span class="kt">bool</span> <span class="nf">is_cheap_name</span><span class="p">(</span> <span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">n</span> <span class="p">);</span>
</pre></div>
</div>
<ul class="simple">
<li>These are the fields which can be updated by the active authority.</li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">account_options</span>
<span class="p">{</span>
  <span class="n">public_key_type</span>  <span class="n">memo_key</span><span class="p">;</span>
  <span class="n">account_id_type</span>  <span class="n">voting_account</span> <span class="o">=</span> <span class="n">GRAPHENE_PROXY_TO_SELF_ACCOUNT</span><span class="p">;</span>

  <span class="kt">uint16_t</span> <span class="n">num_witness</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="kt">uint16_t</span> <span class="n">num_committee</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

  <span class="n">flat_set</span><span class="o">&lt;</span><span class="n">vote_id_type</span><span class="o">&gt;</span>   <span class="n">votes</span><span class="p">;</span>
  <span class="n">extensions_type</span>          <span class="n">extensions</span><span class="p">;</span>

  <span class="c1">/// Whether this account is voting</span>
  <span class="kr">inline</span> <span class="kt">bool</span>              <span class="nf">is_voting</span><span class="p">()</span> <span class="k">const</span>
  <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span> <span class="n">voting_account</span> <span class="o">!=</span> <span class="n">GRAPHENE_PROXY_TO_SELF_ACCOUNT</span> <span class="o">||</span> <span class="o">!</span><span class="n">votes</span><span class="p">.</span><span class="n">empty</span><span class="p">()</span> <span class="p">);</span>
  <span class="p">}</span>

  <span class="kt">void</span> <span class="nf">validate</span><span class="p">()</span><span class="k">const</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<p><strong>The description of `account_options` elements</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="9%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">&#160;</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>public_key_type</td>
<td>memo_key</td>
<td><ul class="first simple">
<li>The memo key is the key this account will typically use to encrypt/sign transaction memos and other non-validated account activities. This field is here</li>
</ul>
<blockquote class="last">
<div>to prevent confusion if the active authority has zero or multiple keys in it.</div></blockquote>
</td>
</tr>
<tr class="row-odd"><td>account_id_type</td>
<td>(<a href="#id5"><span class="problematic" id="id6">**</span></a>2)</td>
<td><ul class="first simple">
<li>If this field is set to an account ID other than GRAPHENE_PROXY_TO_SELF_ACCOUNT, then this account’s votes will be ignored;</li>
</ul>
<p class="last">its stake will be counted as voting for the referenced account’s selected votes instead.</p>
</td>
</tr>
<tr class="row-even"><td>uint16_t</td>
<td>num_witness = 0;</td>
<td><ul class="first last simple">
<li>The number of active witnesses this account votes the blockchain should appoint Must not exceed the actual number of witnesses voted for in &#64;ref votes</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>uint16_t</td>
<td>num_committee = 0;</td>
<td><ul class="first last simple">
<li>The number of active committee members this account votes the blockchain should appoint Must not exceed the actual number of committee members voted for in &#64;ref votes</li>
</ul>
</td>
</tr>
<tr class="row-even"><td>flat_set&lt;vote_id_type&gt;</td>
<td>votes;</td>
<td><ul class="first last simple">
<li>This is the list of vote IDs this account votes for. The weight of these votes is determined by this account’s balance of core asset.</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>extensions_type</td>
<td>extensions;</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<p>(<a href="#id7"><span class="problematic" id="id8">**</span></a>2:  voting_account = GRAPHENE_PROXY_TO_SELF_ACCOUNT; )</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="nl">account_create_operation</span> <span class="p">:</span> <span class="k">public</span> <span class="n">base_operation</span>
</pre></div>
</div>
</div>
<div class="section" id="memo">
<h3><a class="toc-backref" href="#id29">memo</a><a class="headerlink" href="#memo" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>defines the keys used to derive the shared secret</li>
<li>Because account authorities and keys can change at any time, each memo must capture the specific keys used to derive the shared secret.  In order to read the cipher message you will need one of the two private keys.</li>
</ul>
<ul class="simple">
<li>If &#64;ref from == &#64;ref to and &#64;ref from == 0 then no encryption is used, the memo is public.</li>
<li>If &#64;ref from == &#64;ref to and &#64;ref from != 0 then invalid memo data</li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">memo_data</span>
<span class="p">{</span>
        <span class="n">public_key_type</span> <span class="n">from</span><span class="p">;</span>
        <span class="n">public_key_type</span> <span class="n">to</span><span class="p">;</span>
        <span class="cm">/**</span>
<span class="cm">         * 64 bit nonce format:</span>
<span class="cm">         * [  8 bits | 56 bits   ]</span>
<span class="cm">         * [ entropy | timestamp ]</span>
<span class="cm">         * Timestamp is number of microseconds since the epoch</span>
<span class="cm">         * Entropy is a byte taken from the hash of a new private key</span>
<span class="cm">         *</span>
<span class="cm">         * This format is not mandated or verified; it is chosen to ensure uniqueness of key-IV pairs only. This should</span>
<span class="cm">         * be unique with high probability as long as the generating host has a high-resolution clock OR a strong source</span>
<span class="cm">         * of entropy for generating private keys.</span>
<span class="cm">         */</span>
        <span class="kt">uint64_t</span> <span class="n">nonce</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

        <span class="cm">/** This field contains the AES encrypted packed @ref memo_message */</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span> <span class="n">message</span><span class="p">;</span>

        <span class="c1">/// @note custom_nonce is for debugging only; do not set to a nonzero value in production</span>
        <span class="kt">void</span>        <span class="nf">set_message</span><span class="p">(</span><span class="k">const</span> <span class="n">fc</span><span class="o">::</span><span class="n">ecc</span><span class="o">::</span><span class="n">private_key</span><span class="o">&amp;</span> <span class="n">priv</span><span class="p">,</span>
        <span class="k">const</span> <span class="n">fc</span><span class="o">::</span><span class="n">ecc</span><span class="o">::</span><span class="n">public_key</span><span class="o">&amp;</span> <span class="n">pub</span><span class="p">,</span> <span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">msg</span><span class="p">,</span> <span class="kt">uint64_t</span> <span class="n">custom_nonce</span> <span class="o">=</span> <span class="mi">0</span><span class="p">);</span>

        <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">get_message</span><span class="p">(</span><span class="k">const</span> <span class="n">fc</span><span class="o">::</span><span class="n">ecc</span><span class="o">::</span><span class="n">private_key</span><span class="o">&amp;</span> <span class="n">priv</span><span class="p">,</span>
        <span class="k">const</span> <span class="n">fc</span><span class="o">::</span><span class="n">ecc</span><span class="o">::</span><span class="n">public_key</span><span class="o">&amp;</span> <span class="n">pub</span><span class="p">)</span><span class="k">const</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li>defines a message and checksum to enable validation of successful decryption</li>
<li>When encrypting/decrypting a checksum is required to determine whether or not decryption was successful.</li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">memo_message</span>
<span class="p">{</span>
        <span class="n">memo_message</span><span class="p">(){}</span>
        <span class="n">memo_message</span><span class="p">(</span> <span class="kt">uint32_t</span> <span class="n">checksum</span><span class="p">,</span> <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">text</span> <span class="p">)</span>
        <span class="o">:</span><span class="n">checksum</span><span class="p">(</span><span class="n">checksum</span><span class="p">),</span><span class="n">text</span><span class="p">(</span><span class="n">text</span><span class="p">){}</span>

        <span class="kt">uint32_t</span>    <span class="n">checksum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">text</span><span class="p">;</span>

        <span class="n">string</span>  <span class="nf">serialize</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
        <span class="k">static</span>  <span class="n">memo_message</span> <span class="nf">deserialize</span><span class="p">(</span><span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">serial</span><span class="p">);</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
<div class="section" id="balance">
<h3><a class="toc-backref" href="#id30">balance</a><a class="headerlink" href="#balance" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="91%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head">(Operations)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&#160;</td>
<td><ul class="first last simple">
<li>balance_claim_operation</li>
</ul>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="transfer">
<h3><a class="toc-backref" href="#id31">transfer</a><a class="headerlink" href="#transfer" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="91%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head">(Operations)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&#160;</td>
<td><ul class="first last simple">
<li>transfer_operation</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td><ul class="first last simple">
<li>override_transfer_operation</li>
</ul>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="confidential">
<h3><a class="toc-backref" href="#id32">confidential</a><a class="headerlink" href="#confidential" title="Permalink to this headline">¶</a></h3>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">using</span> <span class="n">fc</span><span class="o">::</span><span class="n">ecc</span><span class="o">::</span><span class="n">blind_factor_type</span><span class="p">;</span>
</pre></div>
</div>
<ul class="simple">
<li>stealth Stealth Transfer</li>
<li>Operations related to stealth transfer of value</li>
<li>Stealth Transfers enable users to maintain their finanical privacy against even though all transactions are public.  Every account has three balances:<ul>
<li><ol class="first arabic">
<li>Public Balance - everyone can see the balance changes and the parties involved</li>
</ol>
</li>
<li><ol class="first arabic" start="2">
<li>Blinded Balance - everyone can see who is transacting but not the amounts involved</li>
</ol>
</li>
<li><ol class="first arabic" start="3">
<li>Stealth Balance - both the amounts and parties involved are obscured</li>
</ol>
</li>
</ul>
</li>
<li>Account owners may set a flag that allows their account to receive(or not) transfers of these kinds. Asset issuers can enable or disable the use of each of these types of accounts.</li>
<li>Using the “temp account” which has no permissions required, users can transfer a stealth balance to the temp account and then use the temp account to register a new account.  In this way users can use stealth funds to create anonymous accounts with which they can perform other actions that are not compatible with blinded balances (such as market orders)</li>
</ul>
<div class="section" id="section-referral-program-referral-progam">
<h4><a class="toc-backref" href="#id33">section referral_program Referral Progam</a><a class="headerlink" href="#section-referral-program-referral-progam" title="Permalink to this headline">¶</a></h4>
<p>Stealth transfers that do not specify any account id cannot pay referral fees so 100% of the transaction fee is paid to the network.</p>
</div>
<div class="section" id="section-transaction-fees-fees">
<h4><a class="toc-backref" href="#id34">section transaction_fees Fees</a><a class="headerlink" href="#section-transaction-fees-fees" title="Permalink to this headline">¶</a></h4>
<p>Stealth transfers can have an arbitrarylly large size and therefore the transaction fee for stealth transfers is based purley on the data size of the transaction.</p>
<ul class="simple">
<li>stealth</li>
<li>This data is encrypted and stored in the encrypted memo portion of the blind output.</li>
<li>set to the first 4 bytes of the shared secret used to encrypt the memo.  Used to verify that decryption was successful.</li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">blind_memo</span>
<span class="p">{</span>
   <span class="n">account_id_type</span>     <span class="n">from</span><span class="p">;</span>
   <span class="n">share_type</span>          <span class="n">amount</span><span class="p">;</span>
   <span class="n">string</span>              <span class="n">message</span><span class="p">;</span>
   <span class="kt">uint32_t</span>            <span class="n">check</span><span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<ul class="simple">
<li>stealth</li>
<li>provided to maintain the invariant that all authority required by an operation is explicit in the operation.  Must match blinded_balance_id-&gt;owner</li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">blind_input</span>
<span class="p">{</span>
   <span class="n">fc</span><span class="o">::</span><span class="n">ecc</span><span class="o">::</span><span class="n">commitment_type</span>      <span class="n">commitment</span><span class="p">;</span>
   <span class="n">authority</span>                      <span class="n">owner</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<ul class="simple">
<li>When sending a stealth tranfer we assume users are unable to scan the full blockchain; therefore, payments require confirmation data to be passed out of band.   We assume this out-of-band channel is not secure and therefore the contents of the confirmation must be encrypted</li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">stealth_confirmation</span>
<span class="p">{</span>
   <span class="k">struct</span> <span class="n">memo_data</span>
   <span class="p">{</span>
          <span class="n">optional</span><span class="o">&lt;</span><span class="n">public_key_type</span><span class="o">&gt;</span> <span class="n">from</span><span class="p">;</span>
          <span class="n">asset</span>                     <span class="n">amount</span><span class="p">;</span>
          <span class="n">fc</span><span class="o">::</span><span class="n">sha256</span>                <span class="n">blinding_factor</span><span class="p">;</span>
          <span class="n">fc</span><span class="o">::</span><span class="n">ecc</span><span class="o">::</span><span class="n">commitment_type</span>  <span class="n">commitment</span><span class="p">;</span>
          <span class="kt">uint32_t</span>                  <span class="n">check</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
   <span class="p">};</span>

   <span class="k">operator</span> <span class="nf">string</span><span class="p">()</span><span class="k">const</span><span class="p">;</span> <span class="cm">/** Packs *this then encodes as base58 encoded string. */</span>

   <span class="n">stealth_confirmation</span><span class="p">(</span> <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">base58</span> <span class="p">);</span> <span class="cm">/** Unpacks from a base58 string */</span>
   <span class="n">stealth_confirmation</span><span class="p">(){}</span>

   <span class="n">public_key_type</span>           <span class="n">one_time_key</span><span class="p">;</span>
   <span class="n">optional</span><span class="o">&lt;</span><span class="n">public_key_type</span><span class="o">&gt;</span> <span class="n">to</span><span class="p">;</span>
   <span class="n">vector</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span>              <span class="n">encrypted_memo</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<ul class="simple">
<li>class blind_output</li>
<li>Defines data required to create a new blind commitment</li>
<li>stealth</li>
<li>The blinded output that must be proven to be greater than 0</li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">blind_output</span>
<span class="p">{</span>
   <span class="n">fc</span><span class="o">::</span><span class="n">ecc</span><span class="o">::</span><span class="n">commitment_type</span>                <span class="n">commitment</span><span class="p">;</span>
   <span class="n">range_proof_type</span>                        <span class="n">range_proof</span><span class="p">;</span>  <span class="cm">/** only required if there is more than one blind output */</span>
   <span class="n">authority</span>                               <span class="n">owner</span><span class="p">;</span>
   <span class="n">optional</span><span class="o">&lt;</span><span class="n">stealth_confirmation</span><span class="o">&gt;</span>          <span class="n">stealth_memo</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="92%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head">(Operations)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&#160;</td>
<td><ul class="first last simple">
<li>transfer_to_blind_operation</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td><ul class="first last simple">
<li>transfer_from_blind_operation</li>
</ul>
</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td><ul class="first last simple">
<li>blind_transfer_operation</li>
</ul>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="custom">
<h3><a class="toc-backref" href="#id35">custom</a><a class="headerlink" href="#custom" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="91%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head">(Operations)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&#160;</td>
<td><ul class="first last simple">
<li>custom_operation</li>
</ul>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="asset">
<h2><a class="toc-backref" href="#id36">Asset</a><a class="headerlink" href="#asset" title="Permalink to this headline">¶</a></h2>
<div class="section" id="assert">
<h3><a class="toc-backref" href="#id37">assert</a><a class="headerlink" href="#assert" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Used to verify that account_id-&gt;name is equal to the given string literal.</li>
<li>Perform state-independent checks.  Verify account_name is a valid account name.</li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">account_name_eq_lit_predicate</span>
<span class="p">{</span>
        <span class="n">account_id_type</span> <span class="n">account_id</span><span class="p">;</span>
        <span class="n">string</span>          <span class="n">name</span><span class="p">;</span>
        <span class="kt">bool</span>   <span class="nf">validate</span><span class="p">()</span><span class="k">const</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<ul class="simple">
<li>Used to verify that asset_id-&gt;symbol is equal to the given string literal.</li>
<li>Perform state independent checks.  Verify symbol is a valid asset symbol.</li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">asset_symbol_eq_lit_predicate</span>
<span class="p">{</span>
        <span class="n">asset_id_type</span>   <span class="n">asset_id</span><span class="p">;</span>
        <span class="n">string</span>          <span class="n">symbol</span><span class="p">;</span>
        <span class="kt">bool</span> <span class="nf">validate</span><span class="p">()</span><span class="k">const</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<ul class="simple">
<li>Used to verify that a specific block is part of the blockchain history.  This helps protect some high-value transactions to newly created IDs.</li>
<li>The block ID must be within the last 2^16 blocks.</li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">block_id_predicate</span>
<span class="p">{</span>
        <span class="n">block_id_type</span> <span class="n">id</span><span class="p">;</span>
        <span class="kt">bool</span> <span class="nf">validate</span><span class="p">()</span><span class="k">const</span><span class="p">{</span> <span class="k">return</span> <span class="nb">true</span><span class="p">;</span> <span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
<ul class="simple">
<li>When defining predicates do not make the protocol dependent upon implementation details.</li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span> <span class="n">static_variant</span><span class="o">&lt;</span>
        <span class="n">account_name_eq_lit_predicate</span><span class="p">,</span>
        <span class="n">asset_symbol_eq_lit_predicate</span><span class="p">,</span>
        <span class="n">block_id_predicate</span>
 <span class="o">&gt;</span> <span class="n">predicate</span><span class="p">;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="91%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head">(Operations)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&#160;</td>
<td><ul class="first last simple">
<li>assert_operation</li>
</ul>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id9">
<h3><a class="toc-backref" href="#id38">asset</a><a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>extern const int64_t scaled_precision_lut[];

struct `price`;

struct asset
{
  asset( share_type a = 0, asset_id_type id = asset_id_type() )
        :amount(a),asset_id(id){}

  share_type    amount;
  asset_id_type asset_id;

  asset&amp; operator += ( const asset&amp; o )
        {
                 FC_ASSERT( asset_id == o.asset_id );
                 amount += o.amount;
                 return *this;
        }
        asset&amp; operator -= ( const asset&amp; o )
        {
                 FC_ASSERT( asset_id == o.asset_id );
                 amount -= o.amount;
                 return *this;
        }
        asset operator -()const { return asset( -amount, asset_id ); }

        friend bool operator == ( const asset&amp; a, const asset&amp; b )
        {
                 return std::tie( a.asset_id, a.amount ) == std::tie( b.asset_id, b.amount );
        }
        friend bool operator &lt; ( const asset&amp; a, const asset&amp; b )
        {
                 FC_ASSERT( a.asset_id == b.asset_id );
                 return a.amount &lt; b.amount;
        }
        friend inline bool operator &lt;= ( const asset&amp; a, const asset&amp; b )
        {
                 return !(b &lt; a);
        }

        friend inline bool operator != ( const asset&amp; a, const asset&amp; b )
        {
                 return !(a == b);
        }
        friend inline bool operator &gt; ( const asset&amp; a, const asset&amp; b )
        {
                 return (b &lt; a);
        }
        friend inline bool operator &gt;= ( const asset&amp; a, const asset&amp; b )
        {
                 return !(a &lt; b);
        }

        friend asset operator - ( const asset&amp; a, const asset&amp; b )
        {
                 FC_ASSERT( a.asset_id == b.asset_id );
                 return asset( a.amount - b.amount, a.asset_id );
        }
        friend asset operator + ( const asset&amp; a, const asset&amp; b )
        {
                 FC_ASSERT( a.asset_id == b.asset_id );
                 return asset( a.amount + b.amount, a.asset_id );
        }

        static share_type scaled_precision( uint8_t precision )
        {
                 FC_ASSERT( precision &lt; 19 );
                 return scaled_precision_lut[ precision ];
        }

        asset multiply_and_round_up( const price&amp; p )const; ///&lt; Multiply and round up
};
</pre></div>
</div>
<ul class="simple">
<li>The price struct stores asset prices in the Graphene system.</li>
<li>A price is defined as a ratio between two assets, and represents a possible exchange rate between those two assets. prices are generally not stored in any simplified form, i.e. a price of (1000 CORE)/(20 USD) is perfectly normal.</li>
<li>The assets within a price are labeled base and quote. Throughout the Graphene code base, the convention used is that the base asset is the asset being sold, and the quote asset is the asset being purchased, where the price is represented as base/quote, so in the example price above the seller is looking to sell CORE asset and get USD in return.</li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">price</span>
<span class="p">{</span>
        <span class="k">explicit</span> <span class="n">price</span><span class="p">(</span><span class="k">const</span> <span class="n">asset</span><span class="o">&amp;</span> <span class="n">_base</span> <span class="o">=</span> <span class="n">asset</span><span class="p">(),</span> <span class="k">const</span> <span class="n">asset</span> <span class="n">_quote</span> <span class="o">=</span> <span class="n">asset</span><span class="p">())</span>
                 <span class="o">:</span> <span class="n">base</span><span class="p">(</span><span class="n">_base</span><span class="p">),</span><span class="n">quote</span><span class="p">(</span><span class="n">_quote</span><span class="p">){}</span>

        <span class="n">asset</span> <span class="n">base</span><span class="p">;</span>
        <span class="n">asset</span> <span class="n">quote</span><span class="p">;</span>

        <span class="k">static</span> <span class="n">price</span> <span class="nf">max</span><span class="p">(</span><span class="n">asset_id_type</span> <span class="n">base</span><span class="p">,</span> <span class="n">asset_id_type</span> <span class="n">quote</span> <span class="p">);</span>
        <span class="k">static</span> <span class="n">price</span> <span class="nf">min</span><span class="p">(</span><span class="n">asset_id_type</span> <span class="n">base</span><span class="p">,</span> <span class="n">asset_id_type</span> <span class="n">quote</span> <span class="p">);</span>

        <span class="k">static</span> <span class="n">price</span> <span class="nf">call_price</span><span class="p">(</span><span class="k">const</span> <span class="n">asset</span><span class="o">&amp;</span> <span class="n">debt</span><span class="p">,</span> <span class="k">const</span> <span class="n">asset</span><span class="o">&amp;</span> <span class="n">collateral</span><span class="p">,</span> <span class="kt">uint16_t</span> <span class="n">collateral_ratio</span><span class="p">);</span>

        <span class="c1">/// The unit price for an asset type A is defined to be a price such that for any asset m, m*A=m</span>
        <span class="k">static</span> <span class="n">price</span> <span class="nf">unit_price</span><span class="p">(</span><span class="n">asset_id_type</span> <span class="n">a</span> <span class="o">=</span> <span class="n">asset_id_type</span><span class="p">())</span> <span class="p">{</span> <span class="k">return</span> <span class="n">price</span><span class="p">(</span><span class="n">asset</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">a</span><span class="p">),</span> <span class="n">asset</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">a</span><span class="p">));</span> <span class="p">}</span>

        <span class="n">price</span> <span class="nf">max</span><span class="p">()</span><span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">price</span><span class="o">::</span><span class="n">max</span><span class="p">(</span> <span class="n">base</span><span class="p">.</span><span class="n">asset_id</span><span class="p">,</span> <span class="n">quote</span><span class="p">.</span><span class="n">asset_id</span> <span class="p">);</span> <span class="p">}</span>
        <span class="n">price</span> <span class="nf">min</span><span class="p">()</span><span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">price</span><span class="o">::</span><span class="n">min</span><span class="p">(</span> <span class="n">base</span><span class="p">.</span><span class="n">asset_id</span><span class="p">,</span> <span class="n">quote</span><span class="p">.</span><span class="n">asset_id</span> <span class="p">);</span> <span class="p">}</span>

        <span class="kt">double</span> <span class="nf">to_real</span><span class="p">()</span><span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="kt">double</span><span class="p">(</span><span class="n">base</span><span class="p">.</span><span class="n">amount</span><span class="p">.</span><span class="n">value</span><span class="p">)</span><span class="o">/</span><span class="kt">double</span><span class="p">(</span><span class="n">quote</span><span class="p">.</span><span class="n">amount</span><span class="p">.</span><span class="n">value</span><span class="p">);</span> <span class="p">}</span>

        <span class="kt">bool</span> <span class="nf">is_null</span><span class="p">()</span><span class="k">const</span><span class="p">;</span>
        <span class="kt">void</span> <span class="nf">validate</span><span class="p">()</span><span class="k">const</span><span class="p">;</span>
<span class="p">};</span>

<span class="n">price</span> <span class="k">operator</span> <span class="o">/</span> <span class="p">(</span> <span class="k">const</span> <span class="n">asset</span><span class="o">&amp;</span> <span class="n">base</span><span class="p">,</span> <span class="k">const</span> <span class="n">asset</span><span class="o">&amp;</span> <span class="n">quote</span> <span class="p">);</span>
<span class="kr">inline</span> <span class="n">price</span> <span class="k">operator</span><span class="o">~</span><span class="p">(</span> <span class="k">const</span> <span class="n">price</span><span class="o">&amp;</span> <span class="n">p</span> <span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">price</span><span class="p">{</span><span class="n">p</span><span class="p">.</span><span class="n">quote</span><span class="p">,</span><span class="n">p</span><span class="p">.</span><span class="n">base</span><span class="p">};</span> <span class="p">}</span>

<span class="kt">bool</span>  <span class="k">operator</span> <span class="o">&lt;</span>  <span class="p">(</span> <span class="k">const</span> <span class="n">price</span><span class="o">&amp;</span> <span class="n">a</span><span class="p">,</span> <span class="k">const</span> <span class="n">price</span><span class="o">&amp;</span> <span class="n">b</span> <span class="p">);</span>
<span class="kt">bool</span>  <span class="k">operator</span> <span class="o">==</span> <span class="p">(</span> <span class="k">const</span> <span class="n">price</span><span class="o">&amp;</span> <span class="n">a</span><span class="p">,</span> <span class="k">const</span> <span class="n">price</span><span class="o">&amp;</span> <span class="n">b</span> <span class="p">);</span>

<span class="kr">inline</span> <span class="kt">bool</span>  <span class="k">operator</span> <span class="o">&gt;</span>  <span class="p">(</span> <span class="k">const</span> <span class="n">price</span><span class="o">&amp;</span> <span class="n">a</span><span class="p">,</span> <span class="k">const</span> <span class="n">price</span><span class="o">&amp;</span> <span class="n">b</span> <span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="p">(</span><span class="n">b</span> <span class="o">&lt;</span> <span class="n">a</span><span class="p">);</span> <span class="p">}</span>
<span class="kr">inline</span> <span class="kt">bool</span>  <span class="k">operator</span> <span class="o">&lt;=</span> <span class="p">(</span> <span class="k">const</span> <span class="n">price</span><span class="o">&amp;</span> <span class="n">a</span><span class="p">,</span> <span class="k">const</span> <span class="n">price</span><span class="o">&amp;</span> <span class="n">b</span> <span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="o">!</span><span class="p">(</span><span class="n">b</span> <span class="o">&lt;</span> <span class="n">a</span><span class="p">);</span> <span class="p">}</span>
<span class="kr">inline</span> <span class="kt">bool</span>  <span class="k">operator</span> <span class="o">&gt;=</span> <span class="p">(</span> <span class="k">const</span> <span class="n">price</span><span class="o">&amp;</span> <span class="n">a</span><span class="p">,</span> <span class="k">const</span> <span class="n">price</span><span class="o">&amp;</span> <span class="n">b</span> <span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="o">!</span><span class="p">(</span><span class="n">a</span> <span class="o">&lt;</span> <span class="n">b</span><span class="p">);</span> <span class="p">}</span>
<span class="kr">inline</span> <span class="kt">bool</span>  <span class="k">operator</span> <span class="o">!=</span> <span class="p">(</span> <span class="k">const</span> <span class="n">price</span><span class="o">&amp;</span> <span class="n">a</span><span class="p">,</span> <span class="k">const</span> <span class="n">price</span><span class="o">&amp;</span> <span class="n">b</span> <span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="o">!</span><span class="p">(</span><span class="n">a</span> <span class="o">==</span> <span class="n">b</span><span class="p">);</span> <span class="p">}</span>

<span class="n">asset</span> <span class="k">operator</span> <span class="o">*</span>  <span class="p">(</span> <span class="k">const</span> <span class="n">asset</span><span class="o">&amp;</span> <span class="n">a</span><span class="p">,</span> <span class="k">const</span> <span class="n">price</span><span class="o">&amp;</span> <span class="n">b</span> <span class="p">);</span> <span class="c1">///&lt; Multiply and round down</span>

<span class="n">price</span> <span class="k">operator</span> <span class="o">*</span>  <span class="p">(</span> <span class="k">const</span> <span class="n">price</span><span class="o">&amp;</span> <span class="n">p</span><span class="p">,</span> <span class="k">const</span> <span class="n">ratio_type</span><span class="o">&amp;</span> <span class="n">r</span> <span class="p">);</span>
<span class="n">price</span> <span class="k">operator</span> <span class="o">/</span>  <span class="p">(</span> <span class="k">const</span> <span class="n">price</span><span class="o">&amp;</span> <span class="n">p</span><span class="p">,</span> <span class="k">const</span> <span class="n">ratio_type</span><span class="o">&amp;</span> <span class="n">r</span> <span class="p">);</span>

<span class="kr">inline</span> <span class="n">price</span><span class="o">&amp;</span> <span class="k">operator</span> <span class="o">*=</span>  <span class="p">(</span> <span class="n">price</span><span class="o">&amp;</span> <span class="n">p</span><span class="p">,</span> <span class="k">const</span> <span class="n">ratio_type</span><span class="o">&amp;</span> <span class="n">r</span> <span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">p</span> <span class="o">=</span> <span class="n">p</span> <span class="o">*</span> <span class="n">r</span><span class="p">;</span> <span class="p">}</span>
<span class="kr">inline</span> <span class="n">price</span><span class="o">&amp;</span> <span class="k">operator</span> <span class="o">/=</span>  <span class="p">(</span> <span class="n">price</span><span class="o">&amp;</span> <span class="n">p</span><span class="p">,</span> <span class="k">const</span> <span class="n">ratio_type</span><span class="o">&amp;</span> <span class="n">r</span> <span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">p</span> <span class="o">=</span> <span class="n">p</span> <span class="o">/</span> <span class="n">r</span><span class="p">;</span> <span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li>class price_feed</li>
<li>defines market parameters for margin positions</li>
<li>Required maintenance collateral is defined as a fixed point number with a maximum value of 10.000 and a minimum value of 1.000.  (denominated in GRAPHENE_COLLATERAL_RATIO_DENOM)</li>
<li>A black swan event occurs when value_of_collateral equals value_of_debt, to avoid a black swan a margin call is executed when value_of_debt * required_maintenance_collateral equals value_of_collateral using rate.</li>
<li>Default requirement is $1.75 of collateral per $1 of debt</li>
<li>BlackSwan —&gt; SQR —&gt; MCR —-&gt; SP</li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span>struct price_feed
{

        **Forced settlements will evaluate using this price, defined as BITASSET / COLLATERAL**
        price settlement_price;

        - Price at which automatically exchanging this asset for CORE from fee pool occurs (used for paying fees)
        price core_exchange_rate;

        - Fixed point between 1.000 and 10.000, implied fixed point denominator is GRAPHENE_COLLATERAL_RATIO_DENOM */
        uint16_t maintenance_collateral_ratio = GRAPHENE_DEFAULT_MAINTENANCE_COLLATERAL_RATIO;

        - Fixed point between 1.000 and 10.000, implied fixed point denominator is GRAPHENE_COLLATERAL_RATIO_DENOM */
        uint16_t maximum_short_squeeze_ratio = GRAPHENE_DEFAULT_MAX_SHORT_SQUEEZE_RATIO;

        - When updating a call order the following condition must be maintained:
        - debt * maintenance_price() &lt; collateral
        - debt * settlement_price    &lt; debt * maintenance
        - debt * maintenance_price() &lt; debt * max_short_squeeze_price()
        - price maintenance_price()const;
        - When selling collateral to pay off debt, the least amount of debt to receive should be
        - min_usd = max_short_squeeze_price() * collateral
        - This is provided to ensure that a black swan cannot be trigged due to poor liquidity alone, it must be confirmed by having the max_short_squeeze_price() move below the black swan price.

        price max_short_squeeze_price()const;

        friend bool operator == ( const price_feed&amp; a, const price_feed&amp; b )
        {
          return std::tie( a.settlement_price, a.maintenance_collateral_ratio, a.maximum_short_squeeze_ratio ) ==
          std::tie( b.settlement_price, b.maintenance_collateral_ratio, b.maximum_short_squeeze_ratio );
        }

        void validate() const;
        bool            is_for( asset_id_type asset_id ) const;
};
</pre></div>
</div>
</div>
<div class="section" id="asset-ops">
<h3><a class="toc-backref" href="#id39">asset_ops</a><a class="headerlink" href="#asset-ops" title="Permalink to this headline">¶</a></h3>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">bool</span> <span class="nf">is_valid_symbol</span><span class="p">(</span> <span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">symbol</span> <span class="p">);</span>
</pre></div>
</div>
<ul class="simple">
<li>The asset_options struct contains options available on all assets in the network</li>
<li><strong>Note</strong>: Changes to this struct will break protocol compatibility</li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">asset_options</span> <span class="p">{</span>
        <span class="n">share_type</span>  <span class="n">max_supply</span> <span class="o">=</span> <span class="n">GRAPHENE_MAX_SHARE_SUPPLY</span><span class="p">;</span>
        <span class="kt">uint16_t</span>    <span class="n">market_fee_percent</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">share_type</span>  <span class="n">max_market_fee</span> <span class="o">=</span> <span class="n">GRAPHENE_MAX_SHARE_SUPPLY</span><span class="p">;</span>

        <span class="kt">uint16_t</span>    <span class="n">issuer_permissions</span> <span class="o">=</span> <span class="n">UIA_ASSET_ISSUER_PERMISSION_MASK</span><span class="p">;</span>
        <span class="kt">uint16_t</span>    <span class="n">flags</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

        <span class="n">price</span>       <span class="n">core_exchange_rate</span> <span class="o">=</span> <span class="n">price</span><span class="p">(</span><span class="n">asset</span><span class="p">(),</span> <span class="n">asset</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">asset_id_type</span><span class="p">(</span><span class="mi">1</span><span class="p">)));</span>

        <span class="n">flat_set</span><span class="o">&lt;</span><span class="n">account_id_type</span><span class="o">&gt;</span> <span class="n">whitelist_authorities</span><span class="p">;</span>
        <span class="n">flat_set</span><span class="o">&lt;</span><span class="n">account_id_type</span><span class="o">&gt;</span> <span class="n">blacklist_authorities</span><span class="p">;</span>

        <span class="n">flat_set</span><span class="o">&lt;</span><span class="n">asset_id_type</span><span class="o">&gt;</span>   <span class="n">whitelist_markets</span><span class="p">;</span>
        <span class="n">flat_set</span><span class="o">&lt;</span><span class="n">asset_id_type</span><span class="o">&gt;</span>   <span class="n">blacklist_markets</span><span class="p">;</span>

        <span class="n">string</span>          <span class="n">description</span><span class="p">;</span>
        <span class="n">extensions_type</span> <span class="n">extensions</span><span class="p">;</span>

        <span class="kt">void</span>            <span class="nf">validate</span><span class="p">()</span><span class="k">const</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<p><em>The descriptions of `asset_options` elements</em></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">max_supply = GRAPHENE_MAX_SHARE_SUPPLY;:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">The maximum supply of this asset which may exist at any given time. This can be as large as GRAPHENE_MAX_SHARE_SUPPLY</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">market_fee_percent = 0;:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">When this asset is traded on the markets, this percentage of the total traded will be exacted and paid to the issuer. This is a fixed point value, representing hundredths of a percent, i.e. a value of 100 in this field means a 1% fee is charged on market trades of this asset.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">max_market_fee = GRAPHENE_MAX_SHARE_SUPPLY;:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">Market fees calculated as &#64;ref market_fee_percent of the traded volume are capped to this value</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">issuer_permissions = UIA_ASSET_ISSUER_PERMISSION_MASK;:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">The flags which the issuer has permission to update. See &#64;ref asset_issuer_permission_flags</td>
</tr>
<tr class="field-odd field"><th class="field-name">flags = 0;:</th><td class="field-body">The currently active flags on this permission. See &#64;ref asset_issuer_permission_flags</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">core_exchange_rate = price(asset(), asset(0, asset_id_type(1)));:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">When a non-core asset is used to pay a fee, the blockchain must convert that asset to core asset in order to accept the fee. If this asset’s fee pool is funded, the chain will automatically deposite fees in this asset to its accumulated fees, and withdraw from the fee pool the same amount as converted at the core exchange rate.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">whitelist_authorities;:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">A set of accounts which maintain whitelists to consult for this asset. If whitelist_authorities is non-empty, then only accounts in whitelist_authorities are allowed to hold, use, or transfer the asset.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">blacklist_authorities;:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">A set of accounts which maintain blacklists to consult for this asset. If flags &amp; white_list is set, an account may only send, receive, trade, etc. in this asset if none of these accounts appears in its account_object::blacklisting_accounts field. If the account is blacklisted, it may not transact in this asset even if it is also whitelisted.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">whitelist_markets;:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">defines the assets that this asset may be traded against in the market</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">blacklist_markets;:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">defines the assets that this asset may not be traded against in the market, must not overlap whitelist</td>
</tr>
<tr class="field-odd field"><th class="field-name">description:</th><td class="field-body">data that describes the meaning/purpose of this asset, fee will be charged proportional to size of description.</td>
</tr>
<tr class="field-even field"><th class="field-name">extensions;:</th><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">validate()const;:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">Perform internal consistency checks. &#64;throws fc::exception if any check fails |</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>The bitasset_options struct contains configurable options available only to BitAssets.</li>
<li><strong>Note</strong> Changes to th is struct will break protocol compatibility</li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">bitasset_options</span> <span class="p">{</span>
        <span class="kt">uint32_t</span>      <span class="n">feed_lifetime_sec</span> <span class="o">=</span> <span class="n">GRAPHENE_DEFAULT_PRICE_FEED_LIFETIME</span><span class="p">;</span>
        <span class="kt">uint8_t</span>       <span class="n">minimum_feeds</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="kt">uint32_t</span>      <span class="n">force_settlement_delay_sec</span> <span class="o">=</span> <span class="n">GRAPHENE_DEFAULT_FORCE_SETTLEMENT_DELAY</span><span class="p">;</span>
        <span class="kt">uint16_t</span>      <span class="n">force_settlement_offset_percent</span> <span class="o">=</span> <span class="n">GRAPHENE_DEFAULT_FORCE_SETTLEMENT_OFFSET</span><span class="p">;</span>
        <span class="kt">uint16_t</span>      <span class="n">maximum_force_settlement_volume</span> <span class="o">=</span> <span class="n">GRAPHENE_DEFAULT_FORCE_SETTLEMENT_MAX_VOLUME</span><span class="p">;</span>
        <span class="n">asset_id_type</span>   <span class="n">short_backing_asset</span><span class="p">;</span>
        <span class="n">extensions_type</span> <span class="n">extensions</span><span class="p">;</span>

        <span class="kt">void</span> <span class="nf">validate</span><span class="p">()</span><span class="k">const</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<p><em>The descriptions of `bitasset_options` elements</em></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">feed_lifetime_sec = GRAPHENE_DEFAULT_PRICE_FEED_LIFETIME:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">Time before a price feed expires</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">minimum_feeds = 1;:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">Minimum number of unexpired feeds required to extract a median feed from</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">force_settlement_delay_sec = GRAPHENE_DEFAULT_FORCE_SETTLEMENT_DELAY;:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">This is the delay between the time a long requests settlement and the chain evaluates the settlement</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">force_settlement_offset_percent = GRAPHENE_DEFAULT_FORCE_SETTLEMENT_OFFSET;:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">This is the percent to adjust the feed price in the short’s favor in the event of a forced settlement</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">maximum_force_settlement_volume = GRAPHENE_DEFAULT_FORCE_SETTLEMENT_MAX_VOLUME;:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">Force settlement volume can be limited such that only a certain percentage of the total existing supply of the asset may be force-settled within any given chain maintenance interval. This field stores the percentage of the current supply which may be force settled within the current maintenance interval. If force settlements come due in an interval in which the maximum volume has already been settled, the new settlements will be enqueued and processed at the beginning of the next maintenance interval.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">short_backing_asset;:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">This specifies which asset type is used to collateralize short sales. This field may only be updated if the current supply of the asset is zero</td>
</tr>
<tr class="field-odd field"><th class="field-name">extensions;:</th><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">validate()const;:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">Perform internal consistency checks. &#64;throws fc::exception if any check fails</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="93%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head">(Operations)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&#160;</td>
<td><ul class="first last simple">
<li>balance_claim_operation</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td><ul class="first last simple">
<li>asset_create_operation</li>
</ul>
</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td><ul class="first last simple">
<li>asset_global_settle_operation</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td><ul class="first last simple">
<li>asset_settle_operation</li>
</ul>
</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td><ul class="first last simple">
<li>asset_settle_cancel_operation</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td><ul class="first last simple">
<li>sset_fund_fee_pool_operation</li>
</ul>
</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td><ul class="first last simple">
<li>asset_update_operation</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td><ul class="first last simple">
<li>asset_update_bitasset_operation</li>
</ul>
</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td><ul class="first last simple">
<li>asset_update_feed_producers_operation</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td><ul class="first last simple">
<li>asset_publish_feed_operation</li>
</ul>
</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td><ul class="first last simple">
<li>asset_issue_operation</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td><ul class="first last simple">
<li>asset_reserve_operation</li>
</ul>
</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td><ul class="first last simple">
<li>asset_claim_fees_operation</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td><ul class="first last simple">
<li>asset_update_issuer_operation</li>
</ul>
</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td><ul class="first last simple">
<li>asset_claim_pool_operation</li>
</ul>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="fba">
<h3><a class="toc-backref" href="#id40">fba</a><a class="headerlink" href="#fba" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="91%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head">(Operations)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&#160;</td>
<td><ul class="first last simple">
<li>fba_distribute_operation</li>
</ul>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="buyback">
<h3><a class="toc-backref" href="#id41">buyback</a><a class="headerlink" href="#buyback" title="Permalink to this headline">¶</a></h3>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">buyback_account_options</span>
<span class="p">{</span>
   <span class="n">asset_id_type</span>             <span class="n">asset_to_buy</span><span class="p">;</span>
   <span class="n">account_id_type</span>           <span class="n">asset_to_buy_issuer</span><span class="p">;</span>
   <span class="n">flat_set</span><span class="o">&lt;</span> <span class="n">asset_id_type</span> <span class="o">&gt;</span> <span class="n">markets</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<p><strong>The descriptions of `buyback` elements</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="12%" />
<col width="73%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head">&#160;</th>
<th class="head">descriptions</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>asset_id_type</td>
<td>asset_to_buy</td>
<td>The asset to buy.</td>
</tr>
<tr class="row-odd"><td>account_id_type</td>
<td>asset_to_buy_issuer</td>
<td>Issuer of the asset.  Must sign the transaction, must match issuer of specified asset.</td>
</tr>
<tr class="row-even"><td>flat_set&lt; asset_id_type &gt;</td>
<td>markets</td>
<td>What assets the account is willing to buy with. &lt;br /&gt;  Other assets will just sit there since the account has null authority.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="transaction">
<h2><a class="toc-backref" href="#id42">Transaction</a><a class="headerlink" href="#transaction" title="Permalink to this headline">¶</a></h2>
<div class="section" id="market">
<h3><a class="toc-backref" href="#id43">market</a><a class="headerlink" href="#market" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="93%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head">(Operations)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&#160;</td>
<td><ul class="first last simple">
<li>limit_order_create_operation</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td><ul class="first last simple">
<li>limit_order_cancel_operation</li>
</ul>
</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td><ul class="first last simple">
<li>call_order_update_operation</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td><ul class="first last simple">
<li>fill_order_operation</li>
</ul>
</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td><ul class="first last simple">
<li>bid_collateral_operation</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td><ul class="first last simple">
<li>execute_bid_operation</li>
</ul>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="proposal">
<h3><a class="toc-backref" href="#id44">proposal</a><a class="headerlink" href="#proposal" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><cite>proposed_transactions</cite>  The Graphene Transaction Proposal Protocol</li>
<li>Graphene allows users to propose a transaction which requires approval of multiple accounts in order to execute.</li>
<li>The user proposes a transaction using proposal_create_operation, then signatory accounts use proposal_update_operations to add or remove their approvals from this operation. When a sufficient number of approvals have been granted, the operations in the proposal are used to create a virtual transaction which is subsequently evaluated. Even if the transaction fails, the proposal will be kept until the expiration time, at which point, if sufficient approval is granted, the transaction will be evaluated a final time. This allows transactions which will not execute successfully until a given time to still be executed through the proposal mechanism. The first time the proposed transaction succeeds, the proposal will be regarded as resolved, and all future updates will be invalid.</li>
<li>The proposal system allows for arbitrarily complex or recursively nested authorities. If a recursive authority (i.e. an authority which requires approval of ‘nested’ authorities on other accounts) is required for a proposal, then a second proposal can be used to grant the nested authority’s approval. That is, a second proposal can be created which, when sufficiently approved, adds the approval of a nested authority to the first proposal. This multiple-proposal scheme can be used to acquire approval for an arbitrarily deep authority tree.</li>
<li><strong>Note</strong> that at any time, a proposal can be approved in a single transaction if sufficient signatures are available on the proposal_update_operation, as long as the authority tree to approve the proposal does not exceed the maximum recursion depth. In practice, however, it is easier to use proposals to acquire all approvals, as this leverages on-chain notification of all relevant parties that their approval is required. Off-chain multi-signature approval requires some off-chain mechanism for acquiring several signatures on a single transaction. This off-chain synchronization can be avoided using proposals.</li>
</ul>
<ul class="simple">
<li>op_wrapper is used to get around the circular definition of operation and proposals that contain them.</li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">op_wrapper</span><span class="p">;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="93%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head">(Operations)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&#160;</td>
<td><ul class="first last simple">
<li>proposal_create_operation</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td><ul class="first last simple">
<li>proposal_update_operation</li>
</ul>
</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td><ul class="first last simple">
<li>proposal_delete_operation</li>
</ul>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id10">
<h3><a class="toc-backref" href="#id45">transaction</a><a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>All transactions are sets of operations that must be applied atomically. Transactions must refer to a recent block that defines the context of the operation so that they assert a known binding to the object id’s referenced in the transaction.</li>
<li>Rather than specify a full block number, we only specify the lower 16 bits of the block number which means you can reference any block within the last 65,536 blocks which is 3.5 days with a 5 second block interval or 18 hours with a 1 second interval.</li>
<li>All transactions must expire so that the network does not have to maintain a permanent record of all transactions ever published.  A transaction may not have an expiration date too far in the future because this would require keeping too much transaction history in memory.</li>
<li>The block prefix is the first 4 bytes of the block hash of the reference block number, which is the second 4 bytes of the &#64;ref block_id_type (the first 4 bytes of the block ID are the block number)</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A transaction which selects a reference block cannot be migrated between forks outside the period of ref_block_num.time to (ref_block_num.time + rel_exp * interval). This fact can be used to protect market orders which should specify a relatively short re-org window of perhaps less than 1 minute. Normal payments should probably have a longer re-org window to ensure their transaction can still go through in the event of a momentary disruption in service.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It is not recommended to set the &#64;ref ref_block_num, &#64;ref ref_block_prefix, and &#64;ref expiration fields manually. Call the appropriate overload of &#64;ref set_expiration instead.</p>
</div>
<p><strong>groups operations that should be applied atomically</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">transaction</span>
<span class="p">{</span>
  <span class="cm">/**</span>
<span class="cm">   * Least significant 16 bits from the reference block number. If @ref relative_expiration is zero, this field</span>
<span class="cm">   * must be zero as well.</span>
<span class="cm">   */</span>
  <span class="kt">uint16_t</span>           <span class="n">ref_block_num</span>    <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="cm">/**</span>
<span class="cm">   * The first non-block-number 32-bits of the reference block ID. Recall that block IDs have 32 bits of block</span>
<span class="cm">   * number followed by the actual block hash, so this field should be set using the second 32 bits in the</span>
<span class="cm">   * @ref block_id_type</span>
<span class="cm">   */</span>
  <span class="kt">uint32_t</span>           <span class="n">ref_block_prefix</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

  <span class="cm">/**</span>
<span class="cm">   * This field specifies the absolute expiration for this transaction.</span>
<span class="cm">   */</span>
  <span class="n">fc</span><span class="o">::</span><span class="n">time_point_sec</span> <span class="n">expiration</span><span class="p">;</span>

  <span class="n">vector</span><span class="o">&lt;</span><span class="n">operation</span><span class="o">&gt;</span>  <span class="n">operations</span><span class="p">;</span>
  <span class="n">extensions_type</span>    <span class="n">extensions</span><span class="p">;</span>

  <span class="c1">/// Calculate the digest for a transaction</span>
  <span class="n">digest_type</span>         <span class="nf">digest</span><span class="p">()</span><span class="k">const</span><span class="p">;</span>
  <span class="n">transaction_id_type</span> <span class="nf">id</span><span class="p">()</span><span class="k">const</span><span class="p">;</span>
  <span class="kt">void</span>                <span class="nf">validate</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
  <span class="c1">/// Calculate the digest used for signature validation</span>
  <span class="n">digest_type</span>         <span class="nf">sig_digest</span><span class="p">(</span> <span class="k">const</span> <span class="n">chain_id_type</span><span class="o">&amp;</span> <span class="n">chain_id</span> <span class="p">)</span><span class="k">const</span><span class="p">;</span>

  <span class="kt">void</span> <span class="nf">set_expiration</span><span class="p">(</span> <span class="n">fc</span><span class="o">::</span><span class="n">time_point_sec</span> <span class="n">expiration_time</span> <span class="p">);</span>
  <span class="kt">void</span> <span class="nf">set_reference_block</span><span class="p">(</span> <span class="k">const</span> <span class="n">block_id_type</span><span class="o">&amp;</span> <span class="n">reference_block</span> <span class="p">);</span>

  <span class="c1">/// visit all operations</span>
  <span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">Visitor</span><span class="o">&gt;</span>
  <span class="n">vector</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">Visitor</span><span class="o">::</span><span class="n">result_type</span><span class="o">&gt;</span> <span class="n">visit</span><span class="p">(</span> <span class="n">Visitor</span><span class="o">&amp;&amp;</span> <span class="n">visitor</span> <span class="p">)</span>
  <span class="p">{</span>
         <span class="n">vector</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">Visitor</span><span class="o">::</span><span class="n">result_type</span><span class="o">&gt;</span> <span class="n">results</span><span class="p">;</span>
         <span class="k">for</span><span class="p">(</span> <span class="k">auto</span><span class="o">&amp;</span> <span class="nl">op</span> <span class="p">:</span> <span class="n">operations</span> <span class="p">)</span>
                <span class="n">results</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">op</span><span class="p">.</span><span class="n">visit</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">forward</span><span class="o">&lt;</span><span class="n">Visitor</span><span class="o">&gt;</span><span class="p">(</span> <span class="n">visitor</span> <span class="p">)</span> <span class="p">));</span>
         <span class="k">return</span> <span class="n">results</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">Visitor</span><span class="o">&gt;</span>
  <span class="n">vector</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">Visitor</span><span class="o">::</span><span class="n">result_type</span><span class="o">&gt;</span> <span class="n">visit</span><span class="p">(</span> <span class="n">Visitor</span><span class="o">&amp;&amp;</span> <span class="n">visitor</span> <span class="p">)</span><span class="k">const</span>
  <span class="p">{</span>
         <span class="n">vector</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">Visitor</span><span class="o">::</span><span class="n">result_type</span><span class="o">&gt;</span> <span class="n">results</span><span class="p">;</span>
         <span class="k">for</span><span class="p">(</span> <span class="k">auto</span><span class="o">&amp;</span> <span class="nl">op</span> <span class="p">:</span> <span class="n">operations</span> <span class="p">)</span>
                <span class="n">results</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">op</span><span class="p">.</span><span class="n">visit</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">forward</span><span class="o">&lt;</span><span class="n">Visitor</span><span class="o">&gt;</span><span class="p">(</span> <span class="n">visitor</span> <span class="p">)</span> <span class="p">));</span>
         <span class="k">return</span> <span class="n">results</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kt">void</span> <span class="n">get_required_authorities</span><span class="p">(</span> <span class="n">flat_set</span><span class="o">&lt;</span><span class="n">account_id_type</span><span class="o">&gt;&amp;</span> <span class="n">active</span><span class="p">,</span> <span class="n">flat_set</span><span class="o">&lt;</span><span class="n">account_id_type</span><span class="o">&gt;&amp;</span> <span class="n">owner</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">authority</span><span class="o">&gt;&amp;</span> <span class="n">other</span> <span class="p">)</span><span class="k">const</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<p><strong>adds a signature to a transaction</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="nl">signed_transaction</span> <span class="p">:</span> <span class="k">public</span> <span class="n">transaction</span>
<span class="p">{</span>
  <span class="n">signed_transaction</span><span class="p">(</span> <span class="k">const</span> <span class="n">transaction</span><span class="o">&amp;</span> <span class="n">trx</span> <span class="o">=</span> <span class="n">transaction</span><span class="p">()</span> <span class="p">)</span>
         <span class="o">:</span> <span class="n">transaction</span><span class="p">(</span><span class="n">trx</span><span class="p">){}</span>

  <span class="cm">/** signs and appends to signatures */</span>
  <span class="k">const</span> <span class="n">signature_type</span><span class="o">&amp;</span> <span class="n">sign</span><span class="p">(</span> <span class="k">const</span> <span class="n">private_key_type</span><span class="o">&amp;</span> <span class="n">key</span><span class="p">,</span> <span class="k">const</span> <span class="n">chain_id_type</span><span class="o">&amp;</span> <span class="n">chain_id</span> <span class="p">);</span>

  <span class="cm">/** returns signature but does not append */</span>
  <span class="n">signature_type</span> <span class="nf">sign</span><span class="p">(</span> <span class="k">const</span> <span class="n">private_key_type</span><span class="o">&amp;</span> <span class="n">key</span><span class="p">,</span> <span class="k">const</span> <span class="n">chain_id_type</span><span class="o">&amp;</span> <span class="n">chain_id</span> <span class="p">)</span><span class="k">const</span><span class="p">;</span>

  <span class="cm">/**</span>
<span class="cm">   *  The purpose of this method is to identify some subset of</span>
<span class="cm">   *  @ref available_keys that will produce sufficient signatures</span>
<span class="cm">   *  for a transaction.  The result is not always a minimal set of</span>
<span class="cm">   *  signatures, but any non-minimal result will still pass</span>
<span class="cm">   *  validation.</span>
<span class="cm">   */</span>
  <span class="n">set</span><span class="o">&lt;</span><span class="n">public_key_type</span><span class="o">&gt;</span> <span class="n">get_required_signatures</span><span class="p">(</span>
         <span class="k">const</span> <span class="n">chain_id_type</span><span class="o">&amp;</span> <span class="n">chain_id</span><span class="p">,</span>
         <span class="k">const</span> <span class="n">flat_set</span><span class="o">&lt;</span><span class="n">public_key_type</span><span class="o">&gt;&amp;</span> <span class="n">available_keys</span><span class="p">,</span>
         <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">function</span><span class="o">&lt;</span><span class="k">const</span> <span class="n">authority</span><span class="o">*</span><span class="p">(</span><span class="n">account_id_type</span><span class="p">)</span><span class="o">&gt;&amp;</span> <span class="n">get_active</span><span class="p">,</span>
         <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">function</span><span class="o">&lt;</span><span class="k">const</span> <span class="n">authority</span><span class="o">*</span><span class="p">(</span><span class="n">account_id_type</span><span class="p">)</span><span class="o">&gt;&amp;</span> <span class="n">get_owner</span><span class="p">,</span>
         <span class="kt">uint32_t</span> <span class="n">max_recursion</span> <span class="o">=</span> <span class="n">GRAPHENE_MAX_SIG_CHECK_DEPTH</span>
         <span class="p">)</span><span class="k">const</span><span class="p">;</span>

  <span class="kt">void</span> <span class="nf">verify_authority</span><span class="p">(</span>
         <span class="k">const</span> <span class="n">chain_id_type</span><span class="o">&amp;</span> <span class="n">chain_id</span><span class="p">,</span>
         <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">function</span><span class="o">&lt;</span><span class="k">const</span> <span class="n">authority</span><span class="o">*</span><span class="p">(</span><span class="n">account_id_type</span><span class="p">)</span><span class="o">&gt;&amp;</span> <span class="n">get_active</span><span class="p">,</span>
         <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">function</span><span class="o">&lt;</span><span class="k">const</span> <span class="n">authority</span><span class="o">*</span><span class="p">(</span><span class="n">account_id_type</span><span class="p">)</span><span class="o">&gt;&amp;</span> <span class="n">get_owner</span><span class="p">,</span>
         <span class="kt">uint32_t</span> <span class="n">max_recursion</span> <span class="o">=</span> <span class="n">GRAPHENE_MAX_SIG_CHECK_DEPTH</span> <span class="p">)</span><span class="k">const</span><span class="p">;</span>

  <span class="cm">/**</span>
<span class="cm">   * This is a slower replacement for get_required_signatures()</span>
<span class="cm">   * which returns a minimal set in all cases, including</span>
<span class="cm">   * some cases where get_required_signatures() returns a</span>
<span class="cm">   * non-minimal set.</span>
<span class="cm">   */</span>

  <span class="n">set</span><span class="o">&lt;</span><span class="n">public_key_type</span><span class="o">&gt;</span> <span class="n">minimize_required_signatures</span><span class="p">(</span>
         <span class="k">const</span> <span class="n">chain_id_type</span><span class="o">&amp;</span> <span class="n">chain_id</span><span class="p">,</span>
         <span class="k">const</span> <span class="n">flat_set</span><span class="o">&lt;</span><span class="n">public_key_type</span><span class="o">&gt;&amp;</span> <span class="n">available_keys</span><span class="p">,</span>
         <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">function</span><span class="o">&lt;</span><span class="k">const</span> <span class="n">authority</span><span class="o">*</span><span class="p">(</span><span class="n">account_id_type</span><span class="p">)</span><span class="o">&gt;&amp;</span> <span class="n">get_active</span><span class="p">,</span>
         <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">function</span><span class="o">&lt;</span><span class="k">const</span> <span class="n">authority</span><span class="o">*</span><span class="p">(</span><span class="n">account_id_type</span><span class="p">)</span><span class="o">&gt;&amp;</span> <span class="n">get_owner</span><span class="p">,</span>
         <span class="kt">uint32_t</span> <span class="n">max_recursion</span> <span class="o">=</span> <span class="n">GRAPHENE_MAX_SIG_CHECK_DEPTH</span>
         <span class="p">)</span> <span class="k">const</span><span class="p">;</span>

  <span class="n">flat_set</span><span class="o">&lt;</span><span class="n">public_key_type</span><span class="o">&gt;</span> <span class="n">get_signature_keys</span><span class="p">(</span> <span class="k">const</span> <span class="n">chain_id_type</span><span class="o">&amp;</span> <span class="n">chain_id</span> <span class="p">)</span><span class="k">const</span><span class="p">;</span>

  <span class="n">vector</span><span class="o">&lt;</span><span class="n">signature_type</span><span class="o">&gt;</span> <span class="n">signatures</span><span class="p">;</span>

  <span class="c1">/// Removes all operations and signatures</span>
  <span class="kt">void</span> <span class="nf">clear</span><span class="p">()</span> <span class="p">{</span> <span class="n">operations</span><span class="p">.</span><span class="n">clear</span><span class="p">();</span> <span class="n">signatures</span><span class="p">.</span><span class="n">clear</span><span class="p">();</span> <span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">verify_authority</span><span class="p">(</span> <span class="k">const</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">operation</span><span class="o">&gt;&amp;</span> <span class="n">ops</span><span class="p">,</span> <span class="k">const</span> <span class="n">flat_set</span><span class="o">&lt;</span><span class="n">public_key_type</span><span class="o">&gt;&amp;</span> <span class="n">sigs</span><span class="p">,</span>
                                          <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">function</span><span class="o">&lt;</span><span class="k">const</span> <span class="n">authority</span><span class="o">*</span><span class="p">(</span><span class="n">account_id_type</span><span class="p">)</span><span class="o">&gt;&amp;</span> <span class="n">get_active</span><span class="p">,</span>
                                          <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">function</span><span class="o">&lt;</span><span class="k">const</span> <span class="n">authority</span><span class="o">*</span><span class="p">(</span><span class="n">account_id_type</span><span class="p">)</span><span class="o">&gt;&amp;</span> <span class="n">get_owner</span><span class="p">,</span>
                                          <span class="kt">uint32_t</span> <span class="n">max_recursion</span> <span class="o">=</span> <span class="n">GRAPHENE_MAX_SIG_CHECK_DEPTH</span><span class="p">,</span>
                                          <span class="kt">bool</span> <span class="n">allow_committe</span> <span class="o">=</span> <span class="nb">false</span><span class="p">,</span>
                                          <span class="k">const</span> <span class="n">flat_set</span><span class="o">&lt;</span><span class="n">account_id_type</span><span class="o">&gt;&amp;</span> <span class="n">active_aprovals</span> <span class="o">=</span> <span class="n">flat_set</span><span class="o">&lt;</span><span class="n">account_id_type</span><span class="o">&gt;</span><span class="p">(),</span>
                                          <span class="k">const</span> <span class="n">flat_set</span><span class="o">&lt;</span><span class="n">account_id_type</span><span class="o">&gt;&amp;</span> <span class="n">owner_approvals</span> <span class="o">=</span> <span class="n">flat_set</span><span class="o">&lt;</span><span class="n">account_id_type</span><span class="o">&gt;</span><span class="p">());</span>
</pre></div>
</div>
<ul class="simple">
<li>captures the result of evaluating the operations contained in the transaction</li>
<li>When processing a transaction some operations generate new object IDs and these IDs cannot be known until the transaction is actually included into a block.  When a block is produced these new ids are captured and included with every transaction.  The index in operation_results should correspond to the same index in operations.</li>
<li>If an operation did not create any new object IDs then 0 should be returned.</li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="nl">processed_transaction</span> <span class="p">:</span> <span class="k">public</span> <span class="n">signed_transaction</span>
<span class="p">{</span>
  <span class="n">processed_transaction</span><span class="p">(</span> <span class="k">const</span> <span class="n">signed_transaction</span><span class="o">&amp;</span> <span class="n">trx</span> <span class="o">=</span> <span class="n">signed_transaction</span><span class="p">()</span> <span class="p">)</span>
         <span class="o">:</span> <span class="n">signed_transaction</span><span class="p">(</span><span class="n">trx</span><span class="p">){}</span>

  <span class="n">vector</span><span class="o">&lt;</span><span class="n">operation_result</span><span class="o">&gt;</span> <span class="n">operation_results</span><span class="p">;</span>

  <span class="n">digest_type</span> <span class="nf">merkle_digest</span><span class="p">()</span><span class="k">const</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
<div class="section" id="withdraw-permission">
<h3><a class="toc-backref" href="#id46">withdraw_permission</a><a class="headerlink" href="#withdraw-permission" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Create a new withdrawal permission</li>
<li>This operation creates a withdrawal permission, which allows some authorized account to withdraw from an authorizing account. This operation is primarily useful for scheduling recurring payments.</li>
<li>Withdrawal permissions define withdrawal periods, which is a span of time during which the authorized account may make a withdrawal. Any number of withdrawals may be made so long as the total amount withdrawn per period does not exceed the limit for any given period.</li>
<li>Withdrawal permissions authorize only a specific pairing, i.e. a permission only authorizes one specified authorized account to withdraw from one specified authorizing account. Withdrawals are limited and may not exceed he withdrawal limit. The withdrawal must be made in the same asset as the limit; attempts with withdraw any other asset type will be rejected.</li>
<li>The fee for this operation is paid by withdraw_from_account, and this account is required to authorize this operation.</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="93%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head">(Operations)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&#160;</td>
<td><ul class="first last simple">
<li>withdraw_permission_create_operation</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td><ul class="first last simple">
<li>withdraw_permission_update_operation</li>
</ul>
</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td><ul class="first last simple">
<li>withdraw_permission_claim_operation</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td><ul class="first last simple">
<li>withdraw_permission_delete_operation</li>
</ul>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="fee">
<h2><a class="toc-backref" href="#id47">Fee</a><a class="headerlink" href="#fee" title="Permalink to this headline">¶</a></h2>
<div class="section" id="fee-schedule">
<h3><a class="toc-backref" href="#id48">fee_schedule</a><a class="headerlink" href="#fee-schedule" title="Permalink to this headline">¶</a></h3>
<p>&gt; See: ..librarieschainincludegraphenechainprotocolfee_schedule.hpp</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span> <span class="k">struct</span> <span class="n">transform_to_fee_parameters</span><span class="p">;</span>
<span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="p">...</span><span class="n">T</span><span class="o">&gt;</span>
<span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">Operation</span><span class="o">&gt;</span>
<span class="k">typedef</span> <span class="n">transform_to_fee_parameters</span><span class="o">&lt;</span><span class="n">operation</span><span class="o">&gt;::</span><span class="n">type</span> <span class="n">fee_parameters</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">transform_to_fee_parameters</span><span class="o">&lt;</span><span class="n">fc</span><span class="o">::</span><span class="n">static_variant</span><span class="o">&lt;</span><span class="n">T</span><span class="p">...</span><span class="o">&gt;&gt;</span>

<span class="k">class</span> <span class="nc">fee_helper</span>
<span class="k">class</span> <span class="nc">fee_helper</span><span class="o">&lt;</span><span class="n">account_create_operation</span><span class="o">&gt;</span>
<span class="k">class</span> <span class="nc">fee_helper</span><span class="o">&lt;</span><span class="n">bid_collateral_operation</span><span class="o">&gt;</span>
<span class="k">class</span> <span class="nc">fee_helper</span><span class="o">&lt;</span><span class="n">asset_update_issuer_operation</span><span class="o">&gt;</span>
<span class="k">class</span> <span class="nc">fee_helper</span><span class="o">&lt;</span><span class="n">asset_claim_pool_operation</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><em>contains all of the parameters necessary to calculate the fee for any operation</em></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">fee_schedule</span>
<span class="p">{</span>
        <span class="n">fee_schedule</span><span class="p">();</span>

        <span class="k">static</span> <span class="n">fee_schedule</span> <span class="nf">get_default</span><span class="p">();</span>

        <span class="cm">/** Finds the appropriate fee parameter struct for the operation and then calculates the appropriate fee. */</span>
        <span class="n">asset</span> <span class="nf">calculate_fee</span><span class="p">(</span> <span class="k">const</span> <span class="n">operation</span><span class="o">&amp;</span> <span class="n">op</span><span class="p">,</span> <span class="k">const</span> <span class="n">price</span><span class="o">&amp;</span> <span class="n">core_exchange_rate</span> <span class="o">=</span> <span class="n">price</span><span class="o">::</span><span class="n">unit_price</span><span class="p">()</span> <span class="p">)</span><span class="k">const</span><span class="p">;</span>
        <span class="n">asset</span> <span class="nf">set_fee</span><span class="p">(</span> <span class="n">operation</span><span class="o">&amp;</span> <span class="n">op</span><span class="p">,</span> <span class="k">const</span> <span class="n">price</span><span class="o">&amp;</span> <span class="n">core_exchange_rate</span> <span class="o">=</span> <span class="n">price</span><span class="o">::</span><span class="n">unit_price</span><span class="p">()</span> <span class="p">)</span><span class="k">const</span><span class="p">;</span>

        <span class="kt">void</span> <span class="nf">zero_all_fees</span><span class="p">();</span>

        <span class="cm">/** Validates all of the parameters are present and accounted for.*/</span>
        <span class="kt">void</span> <span class="nf">validate</span><span class="p">()</span><span class="k">const</span><span class="p">;</span>

        <span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">Operation</span><span class="o">&gt;</span>
        <span class="k">const</span> <span class="k">typename</span> <span class="n">Operation</span><span class="o">::</span><span class="n">fee_parameters_type</span><span class="o">&amp;</span> <span class="n">get</span><span class="p">()</span><span class="k">const</span>
        <span class="p">{</span>
          <span class="k">return</span> <span class="n">fee_helper</span><span class="o">&lt;</span><span class="n">Operation</span><span class="o">&gt;</span><span class="p">().</span><span class="n">cget</span><span class="p">(</span><span class="n">parameters</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">Operation</span><span class="o">&gt;</span>
        <span class="k">typename</span> <span class="n">Operation</span><span class="o">::</span><span class="n">fee_parameters_type</span><span class="o">&amp;</span> <span class="n">get</span><span class="p">()</span>
        <span class="p">{</span>
          <span class="k">return</span> <span class="n">fee_helper</span><span class="o">&lt;</span><span class="n">Operation</span><span class="o">&gt;</span><span class="p">().</span><span class="n">get</span><span class="p">(</span><span class="n">parameters</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="cm">/** @note must be sorted by fee_parameters.which() and have no duplicates */</span>
        <span class="n">flat_set</span><span class="o">&lt;</span><span class="n">fee_parameters</span><span class="o">&gt;</span> <span class="n">parameters</span><span class="p">;</span>
        <span class="kt">uint32_t</span>                 <span class="n">scale</span> <span class="o">=</span> <span class="n">GRAPHENE_100_PERCENT</span><span class="p">;</span>    <span class="c1">///&lt; fee * scale / GRAPHENE_100_PERCENT</span>
<span class="p">};</span>

<span class="k">typedef</span> <span class="n">fee_schedule</span> <span class="n">fee_schedule_type</span><span class="p">;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="vote">
<h2><a class="toc-backref" href="#id49">Vote</a><a class="headerlink" href="#vote" title="Permalink to this headline">¶</a></h2>
<div class="section" id="vesting">
<h3><a class="toc-backref" href="#id50">vesting</a><a class="headerlink" href="#vesting" title="Permalink to this headline">¶</a></h3>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">linear_vesting_policy_initializer</span>
<span class="p">{</span>
  <span class="cm">/** while vesting begins on begin_timestamp, none may be claimed before vesting_cliff_seconds have passed */</span>
  <span class="n">fc</span><span class="o">::</span><span class="n">time_point_sec</span> <span class="n">begin_timestamp</span><span class="p">;</span>
  <span class="kt">uint32_t</span>           <span class="n">vesting_cliff_seconds</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="kt">uint32_t</span>           <span class="n">vesting_duration_seconds</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">cdd_vesting_policy_initializer</span>
<span class="p">{</span>
  <span class="cm">/** while coindays may accrue over time, none may be claimed before the start_claim time */</span>
  <span class="n">fc</span><span class="o">::</span><span class="n">time_point_sec</span> <span class="n">start_claim</span><span class="p">;</span>
  <span class="kt">uint32_t</span>           <span class="n">vesting_seconds</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="n">cdd_vesting_policy_initializer</span><span class="p">(</span> <span class="kt">uint32_t</span> <span class="n">vest_sec</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">fc</span><span class="o">::</span><span class="n">time_point_sec</span> <span class="n">sc</span> <span class="o">=</span> <span class="n">fc</span><span class="o">::</span><span class="n">time_point_sec</span><span class="p">()</span> <span class="p">)</span><span class="o">:</span><span class="n">start_claim</span><span class="p">(</span><span class="n">sc</span><span class="p">),</span><span class="n">vesting_seconds</span><span class="p">(</span><span class="n">vest_sec</span><span class="p">){}</span>
<span class="p">};</span>

<span class="k">typedef</span> <span class="n">fc</span><span class="o">::</span><span class="n">static_variant</span><span class="o">&lt;</span><span class="n">linear_vesting_policy_initializer</span><span class="p">,</span> <span class="n">cdd_vesting_policy_initializer</span><span class="o">&gt;</span> <span class="n">vesting_policy_initializer</span><span class="p">;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="93%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head">(Operations)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&#160;</td>
<td><ul class="first last simple">
<li>vesting_balance_create_operation</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td><ul class="first last simple">
<li>vesting_balance_withdraw_operation</li>
</ul>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id11">
<h3><a class="toc-backref" href="#id51">vote</a><a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>An ID for some votable object</li>
<li>This class stores an ID for a votable object. The ID is comprised of two fields: a type, and an instance. The type field stores which kind of object is being voted on, and the instance stores which specific object of that type is being referenced by this ID.</li>
<li>A value of vote_id_type is implicitly convertible to an unsigned 32-bit integer containing only the instance. It may also be implicitly assigned from a uint32_t, which will update the instance. It may not, however, be implicitly constructed from a uint32_t, as in this case, the type would be unknown.</li>
<li>On the wire, a vote_id_type is represented as a 32-bit integer with the type in the lower 8 bits and the instance in the upper 24 bits. This means that types may never exceed 8 bits, and instances may never exceed 24 bits.</li>
<li>In JSON, a vote_id_type is represented as a string “type:instance”, i.e. “1:5” would be type 1 and instance 5.</li>
<li><strong>Note</strong>: In the Graphene protocol, vote_id_type instances are unique across types; that is to say, if an object of type 1 has instance 4, an object of type 0 may not also have instance 4. In other words, the type is not a namespace for instances; it is only an informational field.</li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">vote_id_type</span>
<span class="p">{</span>
   <span class="c1">/// Lower 8 bits are type; upper 24 bits are instance</span>
   <span class="kt">uint32_t</span> <span class="n">content</span><span class="p">;</span>

   <span class="k">friend</span> <span class="kt">size_t</span> <span class="nf">hash_value</span><span class="p">(</span> <span class="n">vote_id_type</span> <span class="n">v</span> <span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">std</span><span class="o">::</span><span class="n">hash</span><span class="o">&lt;</span><span class="kt">uint32_t</span><span class="o">&gt;</span><span class="p">()(</span><span class="n">v</span><span class="p">.</span><span class="n">content</span><span class="p">);</span> <span class="p">}</span>
   <span class="k">enum</span> <span class="n">vote_type</span>
   <span class="p">{</span>
          <span class="n">committee</span><span class="p">,</span>
          <span class="n">witness</span><span class="p">,</span>
          <span class="n">worker</span><span class="p">,</span>
          <span class="n">VOTE_TYPE_COUNT</span>
   <span class="p">};</span>

   <span class="c1">/// Default constructor. Sets type and instance to 0</span>
   <span class="n">vote_id_type</span><span class="p">()</span><span class="o">:</span><span class="n">content</span><span class="p">(</span><span class="mi">0</span><span class="p">){}</span>
   <span class="c1">/// Construct this vote_id_type with provided type and instance</span>
   <span class="n">vote_id_type</span><span class="p">(</span><span class="n">vote_type</span> <span class="n">type</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">instance</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
          <span class="o">:</span> <span class="n">content</span><span class="p">(</span><span class="n">instance</span><span class="o">&lt;&lt;</span><span class="mi">8</span> <span class="o">|</span> <span class="n">type</span><span class="p">)</span>
   <span class="p">{}</span>
   <span class="c1">/// Construct this vote_id_type from a serial string in the form &quot;type:instance&quot;</span>
   <span class="k">explicit</span> <span class="n">vote_id_type</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">serial</span><span class="p">)</span>
   <span class="p">{</span> <span class="k">try</span> <span class="p">{</span>
          <span class="k">auto</span> <span class="n">colon</span> <span class="o">=</span> <span class="n">serial</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="sc">&#39;:&#39;</span><span class="p">);</span>
          <span class="n">FC_ASSERT</span><span class="p">(</span> <span class="n">colon</span> <span class="o">!=</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">::</span><span class="n">npos</span> <span class="p">);</span>
          <span class="o">*</span><span class="k">this</span> <span class="o">=</span> <span class="n">vote_id_type</span><span class="p">(</span><span class="n">vote_type</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">stoul</span><span class="p">(</span><span class="n">serial</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">colon</span><span class="p">))),</span> <span class="n">std</span><span class="o">::</span><span class="n">stoul</span><span class="p">(</span><span class="n">serial</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="n">colon</span><span class="o">+</span><span class="mi">1</span><span class="p">)));</span>
   <span class="p">}</span> <span class="n">FC_CAPTURE_AND_RETHROW</span><span class="p">(</span> <span class="p">(</span><span class="n">serial</span><span class="p">)</span> <span class="p">)</span> <span class="p">}</span>

   <span class="c1">/// Set the type of this vote_id_type</span>
   <span class="kt">void</span> <span class="n">set_type</span><span class="p">(</span><span class="n">vote_type</span> <span class="n">type</span><span class="p">)</span>
   <span class="p">{</span>
          <span class="n">content</span> <span class="o">&amp;=</span> <span class="mh">0xffffff00</span><span class="p">;</span>
          <span class="n">content</span> <span class="o">|=</span> <span class="n">type</span> <span class="o">&amp;</span> <span class="mh">0xff</span><span class="p">;</span>
   <span class="p">}</span>
   <span class="c1">/// Get the type of this vote_id_type</span>
   <span class="n">vote_type</span> <span class="n">type</span><span class="p">()</span><span class="k">const</span>
   <span class="p">{</span>
          <span class="k">return</span> <span class="n">vote_type</span><span class="p">(</span><span class="n">content</span> <span class="o">&amp;</span> <span class="mh">0xff</span><span class="p">);</span>
   <span class="p">}</span>

   <span class="c1">/// Set the instance of this vote_id_type</span>
   <span class="kt">void</span> <span class="n">set_instance</span><span class="p">(</span><span class="kt">uint32_t</span> <span class="n">instance</span><span class="p">)</span>
   <span class="p">{</span>
          <span class="n">assert</span><span class="p">(</span><span class="n">instance</span> <span class="o">&lt;</span> <span class="mh">0x01000000</span><span class="p">);</span>
          <span class="n">content</span> <span class="o">&amp;=</span> <span class="mh">0xff</span><span class="p">;</span>
          <span class="n">content</span> <span class="o">|=</span> <span class="n">instance</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span><span class="p">;</span>
   <span class="p">}</span>
   <span class="c1">/// Get the instance of this vote_id_type</span>
   <span class="kt">uint32_t</span> <span class="n">instance</span><span class="p">()</span><span class="k">const</span>
   <span class="p">{</span>
          <span class="k">return</span> <span class="n">content</span> <span class="o">&gt;&gt;</span> <span class="mi">8</span><span class="p">;</span>
   <span class="p">}</span>

   <span class="n">vote_id_type</span><span class="o">&amp;</span> <span class="k">operator</span> <span class="o">=</span><span class="p">(</span><span class="n">vote_id_type</span> <span class="n">other</span><span class="p">)</span>
   <span class="p">{</span>
          <span class="n">content</span> <span class="o">=</span> <span class="n">other</span><span class="p">.</span><span class="n">content</span><span class="p">;</span>
          <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
   <span class="p">}</span>
   <span class="c1">/// Set the instance of this vote_id_type</span>
   <span class="n">vote_id_type</span><span class="o">&amp;</span> <span class="k">operator</span> <span class="o">=</span><span class="p">(</span><span class="kt">uint32_t</span> <span class="n">instance</span><span class="p">)</span>
   <span class="p">{</span>
          <span class="n">set_instance</span><span class="p">(</span><span class="n">instance</span><span class="p">);</span>
          <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
   <span class="p">}</span>
   <span class="c1">/// Get the instance of this vote_id_type</span>
   <span class="k">operator</span> <span class="kt">uint32_t</span><span class="p">()</span><span class="k">const</span>
   <span class="p">{</span>
          <span class="k">return</span> <span class="n">instance</span><span class="p">();</span>
   <span class="p">}</span>

   <span class="c1">/// Convert this vote_id_type to a serial string in the form &quot;type:instance&quot;</span>
   <span class="k">explicit</span> <span class="k">operator</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">()</span><span class="k">const</span>
   <span class="p">{</span>
          <span class="k">return</span> <span class="n">std</span><span class="o">::</span><span class="n">to_string</span><span class="p">(</span><span class="n">type</span><span class="p">())</span> <span class="o">+</span> <span class="s">&quot;:&quot;</span> <span class="o">+</span> <span class="n">std</span><span class="o">::</span><span class="n">to_string</span><span class="p">(</span><span class="n">instance</span><span class="p">());</span>
   <span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">global_property_object</span><span class="p">;</span>

<span class="n">vote_id_type</span> <span class="nf">get_next_vote_id</span><span class="p">(</span> <span class="n">global_property_object</span><span class="o">&amp;</span> <span class="n">gpo</span><span class="p">,</span> <span class="n">vote_id_type</span><span class="o">::</span><span class="n">vote_type</span> <span class="n">type</span> <span class="p">);</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="n">fc</span>
<span class="p">{</span>

<span class="k">class</span> <span class="nc">variant</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">to_variant</span><span class="p">(</span> <span class="k">const</span> <span class="n">graphene</span><span class="o">::</span><span class="n">chain</span><span class="o">::</span><span class="n">vote_id_type</span><span class="o">&amp;</span> <span class="n">var</span><span class="p">,</span> <span class="n">fc</span><span class="o">::</span><span class="n">variant</span><span class="o">&amp;</span> <span class="n">vo</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">max_depth</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">);</span>
<span class="kt">void</span> <span class="nf">from_variant</span><span class="p">(</span> <span class="k">const</span> <span class="n">fc</span><span class="o">::</span><span class="n">variant</span><span class="o">&amp;</span> <span class="n">var</span><span class="p">,</span> <span class="n">graphene</span><span class="o">::</span><span class="n">chain</span><span class="o">::</span><span class="n">vote_id_type</span><span class="o">&amp;</span> <span class="n">vo</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">max_depth</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">);</span>

<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="bts-holders">
<h2><a class="toc-backref" href="#id52">BTS Holders</a><a class="headerlink" href="#bts-holders" title="Permalink to this headline">¶</a></h2>
<div class="section" id="committee-member">
<h3><a class="toc-backref" href="#id53">committee_member</a><a class="headerlink" href="#committee-member" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="5%" />
<col width="95%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head">(Operations)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&#160;</td>
<td><ul class="first last simple">
<li>committee_member_create_operation</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td><ul class="first last simple">
<li>committee_member_update_operation</li>
</ul>
</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td><ul class="first last simple">
<li>committee_member_update_global_parameters_operation</li>
</ul>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="witness">
<h3><a class="toc-backref" href="#id54">witness</a><a class="headerlink" href="#witness" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>operations</li>
<li>Create a witness object, as a bid to hold a witness position on the network.</li>
<li>Accounts which wish to become witnesses may use this operation to create a witness object which stakeholders may vote on to approve its position as a witness.</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="93%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head">(Operations)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&#160;</td>
<td><ul class="first last simple">
<li>witness_create_operation</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td><ul class="first last simple">
<li>witness_update_operation</li>
</ul>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="worker">
<h3><a class="toc-backref" href="#id55">worker</a><a class="headerlink" href="#worker" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>operations</li>
<li>workers The Blockchain Worker System</li>
<li>Graphene blockchains allow the creation of special “workers” which are elected positions paid by the blockchain for services they provide. There may be several types of workers, and the semantics of how and when they are paid are defined by the &#64;ref worker_type_enum enumeration. All workers are elected by core stakeholder approval, by voting for or against them.</li>
<li>Workers are paid from the blockchain’s daily budget if their total approval (votes for - votes against) is positive, ordered from most positive approval to least, until the budget is exhausted. Payments are processed at the blockchain maintenance interval. If a worker does not have positive approval during payment processing, or if the chain’s budget is exhausted before the worker is paid, that worker is simply not paid at that interval.</li>
<li>Payment is not prorated based on percentage of the interval the worker was approved. If the chain attempts to pay a worker, but the budget is insufficient to cover its entire pay, the worker is paid the remaining budget funds, even though this does not fulfill his total pay. The worker will not receive extra pay to make up the difference later. Worker pay is placed in a vesting balance and vests over the number of days specified at the worker’s creation.</li>
<li>Once created, a worker is immutable and will be kept by the blockchain forever.</li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">vesting_balance_worker_initializer</span>
<span class="p">{</span>
  <span class="n">vesting_balance_worker_initializer</span><span class="p">(</span><span class="kt">uint16_t</span> <span class="n">days</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">:</span><span class="n">pay_vesting_period_days</span><span class="p">(</span><span class="n">days</span><span class="p">){}</span>
  <span class="kt">uint16_t</span> <span class="n">pay_vesting_period_days</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">burn_worker_initializer</span>
<span class="p">{};</span>

<span class="k">struct</span> <span class="n">refund_worker_initializer</span>
<span class="p">{};</span>

<span class="k">typedef</span> <span class="n">static_variant</span><span class="o">&lt;</span>
  <span class="n">refund_worker_initializer</span><span class="p">,</span>
  <span class="n">vesting_balance_worker_initializer</span><span class="p">,</span>
  <span class="n">burn_worker_initializer</span> <span class="o">&gt;</span> <span class="n">worker_initializer</span><span class="p">;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="91%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head">(Operations)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&#160;</td>
<td><ul class="first last simple">
<li>worker_create_operation</li>
</ul>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="other">
<h2><a class="toc-backref" href="#id56">Other</a><a class="headerlink" href="#other" title="Permalink to this headline">¶</a></h2>
<div class="section" id="config">
<h3><a class="toc-backref" href="#id57">config</a><a class="headerlink" href="#config" title="Permalink to this headline">¶</a></h3>
<p><em>(none)</em></p>
</div>
<div class="section" id="ext">
<h3><a class="toc-backref" href="#id58">ext</a><a class="headerlink" href="#ext" title="Permalink to this headline">¶</a></h3>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">amespace</span> <span class="n">graphene</span> <span class="p">{</span> <span class="k">namespace</span> <span class="n">chain</span> <span class="p">{</span>

        <span class="k">using</span> <span class="n">fc</span><span class="o">::</span><span class="n">unsigned_int</span><span class="p">;</span>

        <span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">T</span> <span class="o">&gt;</span>
        <span class="k">struct</span> <span class="n">extension</span>
        <span class="p">{</span>
           <span class="n">extension</span><span class="p">()</span> <span class="p">{}</span>

           <span class="n">T</span> <span class="n">value</span><span class="p">;</span>
        <span class="p">};</span>

        <span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">T</span> <span class="o">&gt;</span>
        <span class="k">struct</span> <span class="n">graphene_extension_pack_count_visitor</span><span class="p">{</span>  <span class="p">};</span>

        <span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">Stream</span><span class="p">,</span> <span class="k">typename</span> <span class="n">T</span> <span class="o">&gt;</span>
        <span class="k">struct</span> <span class="n">graphene_extension_pack_read_visitor</span><span class="p">{</span>  <span class="p">};</span>

        <span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">Stream</span><span class="p">,</span> <span class="k">typename</span> <span class="n">T</span> <span class="o">&gt;</span>
        <span class="k">struct</span> <span class="n">graphene_extension_unpack_visitor</span><span class="p">{</span>  <span class="p">};</span>
<span class="p">}};</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="n">fc</span> <span class="p">{</span>

<span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">T</span> <span class="o">&gt;</span>
<span class="k">struct</span> <span class="n">graphene_extension_from_variant_visitor</span>
<span class="p">{</span>


<span class="p">};</span>

<span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">T</span> <span class="o">&gt;</span>
<span class="kt">void</span> <span class="n">from_variant</span><span class="p">(</span> <span class="k">const</span> <span class="n">fc</span><span class="o">::</span><span class="n">variant</span><span class="o">&amp;</span> <span class="n">var</span><span class="p">,</span> <span class="n">graphene</span><span class="o">::</span><span class="n">chain</span><span class="o">::</span><span class="n">extension</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">value</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">max_depth</span> <span class="p">){</span>  <span class="p">};</span>

<span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">T</span> <span class="o">&gt;</span>
<span class="k">struct</span> <span class="n">graphene_extension_to_variant_visitor</span><span class="p">{</span>  <span class="p">};</span>

<span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">T</span> <span class="o">&gt;</span>
<span class="kt">void</span> <span class="n">to_variant</span><span class="p">(</span> <span class="k">const</span> <span class="n">graphene</span><span class="o">::</span><span class="n">chain</span><span class="o">::</span><span class="n">extension</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">value</span><span class="p">,</span> <span class="n">fc</span><span class="o">::</span><span class="n">variant</span><span class="o">&amp;</span> <span class="n">var</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">max_depth</span> <span class="p">){</span>  <span class="p">};</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="n">raw</span> <span class="p">{</span>

<span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">Stream</span><span class="p">,</span> <span class="k">typename</span> <span class="n">T</span> <span class="o">&gt;</span>
<span class="kt">void</span> <span class="n">pack</span><span class="p">(</span> <span class="n">Stream</span><span class="o">&amp;</span> <span class="n">stream</span><span class="p">,</span> <span class="k">const</span> <span class="n">graphene</span><span class="o">::</span><span class="n">chain</span><span class="o">::</span><span class="n">extension</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">value</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">_max_depth</span><span class="o">=</span><span class="n">FC_PACK_MAX_DEPTH</span> <span class="p">)</span>
<span class="p">{</span>
   <span class="n">FC_ASSERT</span><span class="p">(</span> <span class="n">_max_depth</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">);</span>
   <span class="o">--</span><span class="n">_max_depth</span><span class="p">;</span>
   <span class="n">graphene</span><span class="o">::</span><span class="n">chain</span><span class="o">::</span><span class="n">graphene_extension_pack_count_visitor</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">count_vtor</span><span class="p">(</span> <span class="n">value</span><span class="p">.</span><span class="n">value</span> <span class="p">);</span>
   <span class="n">fc</span><span class="o">::</span><span class="n">reflector</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">visit</span><span class="p">(</span> <span class="n">count_vtor</span> <span class="p">);</span>
   <span class="n">fc</span><span class="o">::</span><span class="n">raw</span><span class="o">::</span><span class="n">pack</span><span class="p">(</span> <span class="n">stream</span><span class="p">,</span> <span class="n">unsigned_int</span><span class="p">(</span> <span class="n">count_vtor</span><span class="p">.</span><span class="n">count</span> <span class="p">),</span> <span class="n">_max_depth</span> <span class="p">);</span>
   <span class="n">graphene</span><span class="o">::</span><span class="n">chain</span><span class="o">::</span><span class="n">graphene_extension_pack_read_visitor</span><span class="o">&lt;</span><span class="n">Stream</span><span class="p">,</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">read_vtor</span><span class="p">(</span> <span class="n">stream</span><span class="p">,</span> <span class="n">value</span><span class="p">.</span><span class="n">value</span><span class="p">,</span> <span class="n">_max_depth</span> <span class="p">);</span>
   <span class="n">fc</span><span class="o">::</span><span class="n">reflector</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">visit</span><span class="p">(</span> <span class="n">read_vtor</span> <span class="p">);</span>
<span class="p">}</span>


<span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="n">Stream</span><span class="p">,</span> <span class="k">typename</span> <span class="n">T</span> <span class="o">&gt;</span>
<span class="kt">void</span> <span class="n">unpack</span><span class="p">(</span> <span class="n">Stream</span><span class="o">&amp;</span> <span class="n">s</span><span class="p">,</span> <span class="n">graphene</span><span class="o">::</span><span class="n">chain</span><span class="o">::</span><span class="n">extension</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">value</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="n">_max_depth</span><span class="o">=</span><span class="n">FC_PACK_MAX_DEPTH</span> <span class="p">)</span>
<span class="p">{</span>
   <span class="n">FC_ASSERT</span><span class="p">(</span> <span class="n">_max_depth</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">);</span>
   <span class="o">--</span><span class="n">_max_depth</span><span class="p">;</span>
   <span class="n">value</span> <span class="o">=</span> <span class="n">graphene</span><span class="o">::</span><span class="n">chain</span><span class="o">::</span><span class="n">extension</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">();</span>
   <span class="n">graphene</span><span class="o">::</span><span class="n">chain</span><span class="o">::</span><span class="n">graphene_extension_unpack_visitor</span><span class="o">&lt;</span><span class="n">Stream</span><span class="p">,</span> <span class="n">T</span><span class="o">&gt;</span> <span class="n">vtor</span><span class="p">(</span> <span class="n">s</span><span class="p">,</span> <span class="n">value</span><span class="p">.</span><span class="n">value</span><span class="p">,</span> <span class="n">_max_depth</span> <span class="p">);</span>
   <span class="n">fc</span><span class="o">::</span><span class="n">reflector</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">visit</span><span class="p">(</span> <span class="n">vtor</span> <span class="p">);</span>
   <span class="n">FC_ASSERT</span><span class="p">(</span> <span class="n">vtor</span><span class="p">.</span><span class="n">count_left</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">);</span> <span class="c1">// unrecognized extension throws here</span>
<span class="p">}</span>

<span class="p">}</span> <span class="c1">// fc::raw</span>
<span class="p">};</span>
</pre></div>
</div>
<hr class="docutils" />
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="lib_operations.html" class="btn btn-neutral float-right" title="Operations" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="lib_db.html" class="btn btn-neutral" title="db folder - object/index" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright BitShares Blockchain Foundation.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'',
            LANGUAGE:'en',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>