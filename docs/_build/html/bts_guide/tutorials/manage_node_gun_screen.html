

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Manage a running Node in the background by using GNU screen &mdash; BItShares Developers Portal  documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> BItShares Developers Portal
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../intro/architectures.html">Introduction &amp; Architectures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../intro/environments.html">Development Environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../components/components.html">System Components Elements</a></li>
</ul>
<p class="caption"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../development/installation.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development/integration.html">Integration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development/interaction.html">Blockchain Interaction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development/testnets.html">Testnets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development/bsip.html">BitShares Improvement Proposal</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../supports_dev/supports.html">Support and Optimizations</a></li>
</ul>
<p class="caption"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../api/restrictions.html">1. API Access and Restrictions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/calls.html">2. Available Calls</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/blockchain_api.html">3. Blockchain API(s)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/wallet_api.html">4. Wallet API - Calls</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/objects_ids.html">5. Objects and IDs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/namespaces.html">6. Graphene - Namespaces</a></li>
</ul>
<p class="caption"><span class="caption-text">Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html">Developer Guide (Tutorials)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../index_faq.html">Frequently Asked Questions (FAQ)</a></li>
</ul>
<p class="caption"><span class="caption-text">References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../references/info_comunities.html">BitShares Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../references/info_comunities.html#bitshares-blockchain">BitShares Blockchain</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../references/tech_articles.html">Articles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../references/githubrepo.html">BitShares Repositories</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">BItShares Developers Portal</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>Manage a running Node in the background by using GNU screen</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="manage-a-running-node-in-the-background-by-using-gnu-screen">
<span id="manage-gun-screen"></span><h1>Manage a running Node in the background by using GNU screen<a class="headerlink" href="#manage-a-running-node-in-the-background-by-using-gnu-screen" title="Permalink to this headline">Â¶</a></h1>
<p><em>This section will explain how to manage your nodes by using gun screen and run the bode in the background.</em></p>
<p>When I started working in the bitshares-core one of the first problems I found after building a node was a proper way to run a node in the background.</p>
<p>When a node is started, it needs to sync all the chain and this takes time, when the ssh connection between my pc and my server is lost then I need to start all over again.</p>
<p>Also, this will help when you want to keep your node running and turn off your pc by closing the ssh connection, here is the best way to do it.</p>
<p>This is a very practical setup for developers and nodemasters that connect to their servers by ssh and run nodes in there.</p>
<p>Meet GNU Screen <a class="reference external" href="https://www.gnu.org/software/screen/">https://www.gnu.org/software/screen/</a></p>
<p>We will only use just a few commands for our needs.</p>
<p>Type screen in your terminal and you will see a msg as:</p>
<p>Hit enter. You are now in a new terminal.</p>
<p>You can go back to the original terminal by the following combination of keys.</p>
<p>Press <code class="docutils literal notranslate"><span class="pre">CTRL</span></code> key and while pressed press key <code class="docutils literal notranslate"><span class="pre">a</span></code>. Release <code class="docutils literal notranslate"><span class="pre">CTRL</span></code> and press <code class="docutils literal notranslate"><span class="pre">d</span></code>.</p>
<p>You will see something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">detached</span> <span class="kn">from</span> <span class="mf">11831.</span><span class="n">pts</span><span class="o">-</span><span class="mf">2.</span><span class="n">alfredo</span><span class="p">]</span>
</pre></div>
</div>
<p>This will return you to the original window detaching the screen created terminal, but anything running there will keep running in the background.</p>
<p>In order to gain control again to the screen window use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">screen</span> <span class="o">-</span><span class="n">r</span>
</pre></div>
</div>
<p>This will work as you only have one screen going.</p>
<p>Now what we need to do is create a screen terminal, run the node inside it, deattach it and turn everything off if you want and go to sleep. Then came back the next day, log in to your server, run screen <code class="docutils literal notranslate"><span class="pre">-r</span></code> and see how the node will be still running.</p>
<p>So, log in to your vps and then:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">screen</span>
</pre></div>
</div>
<p>You are now in a new terminal, navigate to your witness, start the witness by something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">programs</span><span class="o">/</span><span class="n">witness_node</span><span class="o">/</span><span class="n">witness_node</span> <span class="o">--</span><span class="n">data</span><span class="o">-</span><span class="nb">dir</span> <span class="n">data</span><span class="o">/</span><span class="n">my</span><span class="o">-</span><span class="n">blockprod</span>
                                   <span class="o">--</span><span class="n">genesis</span><span class="o">-</span><span class="n">json</span> <span class="n">genesis</span><span class="o">/</span><span class="n">my</span><span class="o">-</span><span class="n">genesis</span><span class="o">.</span><span class="n">json</span>
                                   <span class="o">--</span><span class="n">enable</span><span class="o">-</span><span class="n">stale</span><span class="o">-</span><span class="n">production</span> <span class="o">-</span><span class="n">w</span> \<span class="s2">&quot;&quot;</span><span class="mf">1.6</span><span class="o">.</span><span class="mi">0</span><span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2"> </span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="mf">1.6</span><span class="o">.</span><span class="mi">1</span><span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2"> </span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="mf">1.6</span><span class="o">.</span><span class="mi">2</span><span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2"> </span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="mf">1.6</span><span class="o">.</span><span class="mi">3</span><span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2"> </span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="mf">1.6</span><span class="o">.</span><span class="mi">4</span><span class="s2">&quot;</span><span class="se">\&quot;</span>
                                   <span class="o">--</span><span class="n">rpc</span><span class="o">-</span><span class="n">endpoint</span> <span class="s2">&quot;localhost:8090&quot;</span>
</pre></div>
</div>
<p>Node will start syncing or whatever, you then use the key combinations explained above(ctrl-a and then d) and you get back to the original terminal.</p>
<p>Then you leave:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">exit</span>
</pre></div>
</div>
<p>Next day after logging in:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">screen</span> <span class="o">-</span><span class="n">r</span>
</pre></div>
</div>
<p>will send you to the terminal with the running node.</p>
<p>More cool stuff can be done with screen but these are the basics for using it with bitshares nodes.</p>
<p>If you have several screens going on, the <code class="docutils literal notranslate"><span class="pre">screen</span> <span class="pre">-r</span></code> will not work for you, but follow the command suggestions and you will know how to gain control of each terminal again:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@alfredo</span><span class="p">:</span><span class="o">~/</span><span class="n">bitshares</span><span class="o">-</span><span class="n">munich</span><span class="o">/</span><span class="n">recurring</span><span class="o">/</span><span class="n">bitshares</span><span class="o">-</span><span class="n">core</span><span class="c1"># screen -r</span>
<span class="n">There</span> <span class="n">are</span> <span class="n">several</span> <span class="n">suitable</span> <span class="n">screens</span> <span class="n">on</span><span class="p">:</span>
        <span class="mf">11873.</span><span class="n">pts</span><span class="o">-</span><span class="mf">2.</span><span class="n">alfredo</span>     <span class="p">(</span><span class="mi">09</span><span class="o">/</span><span class="mi">01</span><span class="o">/</span><span class="mi">17</span> <span class="mi">20</span><span class="p">:</span><span class="mi">07</span><span class="p">:</span><span class="mi">00</span><span class="p">)</span>     <span class="p">(</span><span class="n">Detached</span><span class="p">)</span>
        <span class="mf">11831.</span><span class="n">pts</span><span class="o">-</span><span class="mf">2.</span><span class="n">alfredo</span>     <span class="p">(</span><span class="mi">09</span><span class="o">/</span><span class="mi">01</span><span class="o">/</span><span class="mi">17</span> <span class="mi">19</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">18</span><span class="p">)</span>     <span class="p">(</span><span class="n">Detached</span><span class="p">)</span>
<span class="n">Type</span> <span class="s2">&quot;screen [-d] -r [pid.]tty.host&quot;</span> <span class="n">to</span> <span class="n">resume</span> <span class="n">one</span> <span class="n">of</span> <span class="n">them</span><span class="o">.</span>
<span class="n">root</span><span class="nd">@alfredo</span><span class="p">:</span><span class="o">~/</span><span class="n">bitshares</span><span class="o">-</span><span class="n">munich</span><span class="o">/</span><span class="n">recurring</span><span class="o">/</span><span class="n">bitshares</span><span class="o">-</span><span class="n">core</span><span class="c1">#</span>
</pre></div>
</div>
<p>In this case I will do:</p>
<blockquote>
<div>screen -r 11873.pts-2.alfredo</div></blockquote>
<p>to get access to one of the terminals.</p>
<p>To end a screen session just gain control over it and type <code class="docutils literal notranslate"><span class="pre">exit</span></code>.</p>
<p>One last useful command I use when the connection drops while you are inside a screen session. When you came back, the screen command will tell you that the terminal is attached but you have no control over it.</p>
<p>What you need to use in that case is something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">screen</span> <span class="o">-</span><span class="n">D</span> <span class="o">-</span><span class="n">r</span> <span class="s1">&#39;1234.somescreensession&#39;</span>
</pre></div>
</div>
<p>to recover your screen session.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright BitShares Blockchain Foundation.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'',
            LANGUAGE:'en',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>