

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Claim Worker Pay &mdash; BItShares Developers Portal  documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> BItShares Developers Portal
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../intro/architectures.html">Introduction &amp; Architectures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../intro/environments.html">Development Environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../components/components.html">System Components Elements</a></li>
</ul>
<p class="caption"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../development/installation.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../accounts/bts_account.html">BitShares Accounts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development/integration.html">Integration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development/interaction.html">Blockchain Interaction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development/testnets.html">Testnets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development/bsip.html">BitShares Improvement Proposal</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../supports_dev/supports.html">Support and Optimizations</a></li>
</ul>
<p class="caption"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../api/api_about.html">1. API Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/restrictions.html">2. API Access and Restrictions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/calls.html">3. Available Calls, Object, and IDs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/blockchain_api.html">4. Blockchain API(s)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/wallet_api.html">5. Wallet API - Calls</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/objects_ids.html">6. Objects and IDs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/namespaces.html">7. Graphene - Namespaces</a></li>
</ul>
<p class="caption"><span class="caption-text">Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html">Developer Guide (Tutorials)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../index_faq.html">Frequently Asked Questions (FAQ)</a></li>
</ul>
<p class="caption"><span class="caption-text">References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../references/info_comunities.html">BitShares Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../references/info_comunities.html#bitshares-blockchain">BitShares Blockchain</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../references/info_bbf_events.html">BitShares Blockchain Foundation Events</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../references/tech_articles.html">BitShares Developers’ Contributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../references/tech_articles.html#articles">Articles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../references/githubrepo.html">BitShares Repositories</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">BItShares Developers Portal</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>Claim Worker Pay</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <span class="target" id="worker-budget"></span><div class="section" id="claim-worker-pay">
<h1>Claim Worker Pay<a class="headerlink" href="#claim-worker-pay" title="Permalink to this headline">¶</a></h1>
<p><strong>How to find how much per hour allocated for all worker</strong></p>
<p>Every second, <cite>[ 17/(2^32) * reserve fund ]</cite> is allocated for witnesses and
workers where reserve fund is how many BTS are currently not distributed (see
the <a class="reference external" href="https://github.com/cryptonomex/graphene/blob/f85dec1c23f6bf9259ad9f15311b2e4aac4f9d44/libraries/chain/include/graphene/chain/config.hpp">source code</a>).</p>
<p>Every hour the total available reserve fund is calculated by finding how many
BTS are available to be distributed and how many BTS will be returned to the
reserve fund (i.e., “burnt”) during the next maintenance interval.</p>
<p>First find how many BTS have not been distributed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># get max_supply from</span>
<span class="n">get_object</span> <span class="mf">1.3</span><span class="o">.</span><span class="mi">0</span>
<span class="c1"># get current_supply from</span>
<span class="n">get_object</span> <span class="mf">2.3</span><span class="o">.</span><span class="mi">0</span>

<span class="o">==&gt;</span> <span class="n">from_initial_reserve</span> <span class="o">=</span> <span class="n">max_supply</span> <span class="o">-</span> <span class="n">current</span> <span class="n">supply</span> <span class="n">of</span> <span class="n">BTS</span>
</pre></div>
</div>
<p>Then modify it by adding the accumulated fees and witness budget remaining
(i.e., 1.5 BTS per block is budgeted, so budget remaining is</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">1.5</span> <span class="n">BTS</span> <span class="o">*</span> <span class="p">(</span><span class="n">number</span> <span class="n">of</span> <span class="n">blocks</span> <span class="n">left</span> <span class="ow">in</span> <span class="n">maintenance</span> <span class="n">period</span><span class="o">+</span><span class="n">blocks</span> <span class="n">missed</span> <span class="n">by</span> <span class="n">witnesses</span><span class="p">))</span>
</pre></div>
</div>
<p>in this maintenance cycle (they will be added to the “reserve fund” permanently
at maintenance)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">get_object</span> <span class="mf">2.13</span><span class="o">.*</span>

<span class="o">==&gt;</span> <span class="n">updated</span> <span class="n">reserve</span> <span class="n">fund</span> <span class="o">=</span> <span class="n">from_initial_reserve</span> <span class="o">+</span>  <span class="n">from_accumulated_fees</span> <span class="o">+</span> <span class="n">from_unused_witness_budget</span>
</pre></div>
</div>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">get_object</span> <span class="mf">2.13</span><span class="o">.</span><span class="mi">361</span>
<span class="go">get_object 2.13.361</span>
<span class="go">[{</span>
<span class="go">    &quot;id&quot;: &quot;2.13.361&quot;,</span>
<span class="go">    &quot;time&quot;: &quot;2015-10-28T15:00:00&quot;,</span>
<span class="go">    &quot;record&quot;: {</span>
<span class="go">      &quot;time_since_last_budget&quot;: 3600,</span>
<span class="go">      &quot;from_initial_reserve&quot;: &quot;106736452914941&quot;,</span>
<span class="go">      &quot;from_accumulated_fees&quot;: 15824269,</span>
<span class="go">      &quot;from_unused_witness_budget&quot;: 2250000,</span>
<span class="go">      &quot;requested_witness_budget&quot;: 180000000,</span>
<span class="go">      &quot;total_budget&quot;: 1520913100,</span>
<span class="go">      &quot;witness_budget&quot;: 180000000,</span>
<span class="go">      &quot;worker_budget&quot;: 1340913100,</span>
<span class="go">      &quot;leftover_worker_funds&quot;: 0,</span>
<span class="go">      &quot;supply_delta&quot;: 1502838831</span>
<span class="go">    }</span>
<span class="go">  }</span>
<span class="go">]</span>
</pre></div>
</div>
<p>Then calculate how much is available to be spent on workers and witnesses is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">total_budget</span> <span class="o">=</span> <span class="p">(</span><span class="n">updated</span> <span class="n">reserve</span> <span class="n">fund</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">time_since_last_budget</span><span class="p">)</span><span class="o">*</span><span class="mi">17</span><span class="o">/</span><span class="p">(</span><span class="mi">2</span><span class="o">^</span><span class="mi">32</span><span class="p">)</span>  <span class="c1">#rounded up to the nearest integer</span>
</pre></div>
</div>
<p>Ok, now to find how much workers will get in this budget period (1 hour), you
find the smaller of the available pay AFTER subtracting witness budget from the
total_budget OR the worker_budget_per_day/24 from “get_global_properties”</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">worker_budget</span><span class="o">=</span><span class="nb">min</span><span class="p">(</span><span class="n">total_budget</span><span class="o">-</span><span class="n">witness_budget</span><span class="p">,</span><span class="n">worker_budget_per_day</span><span class="o">/</span><span class="mi">24</span><span class="p">)</span>
</pre></div>
</div>
<p>That is how much per hour allocated for all workers. NOW you rank each worker
and pay them one hours worth of pay in order or # votes.</p>
<div class="section" id="references">
<h2>References:<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="https://bitshares.org/doxygen/group__workers.html">The Blockchain Worker System</a> (<a href="#id1"><span class="problematic" id="id2">*</span></a>open a doxygen documentation)</li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<hr class="docutils" />
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright BitShares Blockchain Foundation.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'',
            LANGUAGE:'en',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>