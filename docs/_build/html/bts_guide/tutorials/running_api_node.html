

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Running a BitShares API Node &mdash; BItShares Developers Portal  documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> BItShares Developers Portal
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../intro/architectures.html">Introduction &amp; Architectures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../intro/environments.html">Development Environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../components/components.html">System Components Elements</a></li>
</ul>
<p class="caption"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../development/installation.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development/integration.html">Integration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development/interaction.html">Blockchain Interaction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development/testnets.html">Testnets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development/bsip.html">BitShares Improvement Proposal</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../supports_dev/supports.html">Support and Optimizations</a></li>
</ul>
<p class="caption"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../api/restrictions.html">1. API Access and Restrictions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/calls.html">2. Available Calls</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/blockchain_api.html">3. Blockchain API(s)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/wallet_api.html">4. Wallet API - Calls</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/objects_ids.html">5. Objects and IDs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/namespaces.html">6. Graphene - Namespaces</a></li>
</ul>
<p class="caption"><span class="caption-text">Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html">Developer Guide (Tutorials)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../index_faq.html">Frequently Asked Questions (FAQ)</a></li>
</ul>
<p class="caption"><span class="caption-text">References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../references/info_comunities.html">BitShares Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../references/info_comunities.html#bitshares-blockchain">BitShares Blockchain</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../references/tech_articles.html">Articles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../references/githubrepo.html">BitShares Repositories</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">BItShares Developers Portal</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>Running a BitShares API Node</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="running-a-bitshares-api-node">
<span id="run-api-node-guide"></span><h1>Running a BitShares API Node<a class="headerlink" href="#running-a-bitshares-api-node" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#introduction" id="id1">Introduction</a></li>
<li><a class="reference internal" href="#running-a-basic-api-node" id="id2">Running a Basic API Node</a></li>
<li><a class="reference internal" href="#running-a-production-api-node" id="id3">Running a Production API Node</a><ul>
<li><a class="reference internal" href="#gnu-screen" id="id4">GNU screen</a></li>
<li><a class="reference internal" href="#docker" id="id5">Docker</a></li>
</ul>
</li>
</ul>
</div>
<hr class="docutils" />
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id1">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>A Bitshares API Node is a witness_node instance specially configured to serve applications with data endpoints. Any bitshares application(gateway, explorer, wallet, trading program, etc) interacts with the decentralized network(blockchain) by connecting to one or many API nodes.</p>
<p>If you plan to run a business on top of bitshares you will probably want one or several API nodes of your property. You can use public nodes but they are very busy and most of the time running old versions, the most API nodes around the better for the network and final users.</p>
<p>This tutorial is for users that already have witness_node compiled successfully.</p>
</div>
<div class="section" id="running-a-basic-api-node">
<h2><a class="toc-backref" href="#id2">Running a Basic API Node</a><a class="headerlink" href="#running-a-basic-api-node" title="Permalink to this headline">¶</a></h2>
<p>We have witness_node executable and we know we can run it by terminal. First thing is to check the options available:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">programs</span><span class="o">/</span><span class="n">witness_node</span><span class="o">/</span><span class="n">witness_node</span> <span class="o">--</span><span class="n">help</span>
</pre></div>
</div>
<p>It is important to know what version you are using to know what to expect from a node. Get the version of the node by using the –version flag:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">programs</span><span class="o">/</span><span class="n">witness_node</span><span class="o">/</span><span class="n">witness_node</span> <span class="o">--</span><span class="n">version</span>
</pre></div>
</div>
<p>The basic API node will run by:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">programs</span><span class="o">/</span><span class="n">witness_node</span><span class="o">/</span><span class="n">witness_node</span> <span class="o">--</span><span class="n">rpc</span><span class="o">-</span><span class="n">endpoint</span> <span class="s2">&quot;127.0.0.1:8090&quot;</span>
</pre></div>
</div>
<p>With the above command you are starting a node that will listen for api calls at port 8090, only at localhost. This can be changed to listen in the internet, local area network or any IP address you own.</p>
<p>By default, the blockchain directory will be witness_node_data_dir unless you specify a data directory, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">programs</span><span class="o">/</span><span class="n">witness_node</span><span class="o">/</span><span class="n">witness_node</span> <span class="o">--</span><span class="n">rpc</span><span class="o">-</span><span class="n">endpoint</span> <span class="s2">&quot;127.0.0.1:8090&quot;</span> <span class="o">--</span><span class="n">data</span><span class="o">-</span><span class="nb">dir</span> <span class="n">data</span><span class="o">/</span><span class="n">my</span><span class="o">-</span><span class="n">blockprod</span>
</pre></div>
</div>
<p>Depending on your hardware and use purposes of your API node, you will start it with some custom parameters, enabling and disabling plugins. This will be explained as we go.</p>
<p>Options to the witness_node binary can be added to the config file or passed by command line as we did above. Check the default config.ini created when started the node by the first time to make an idea on how you can customize it.</p>
<p>A typical node start command can be something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">programs</span><span class="o">/</span><span class="n">witness_node</span><span class="o">/</span><span class="n">witness_node</span> <span class="o">--</span><span class="n">data</span><span class="o">-</span><span class="nb">dir</span> <span class="n">data</span><span class="o">/</span><span class="n">my</span><span class="o">-</span><span class="n">blockprod</span> <span class="o">--</span><span class="n">rpc</span><span class="o">-</span><span class="n">endpoint</span> <span class="s2">&quot;127.0.0.1:8090&quot;</span> <span class="o">--</span><span class="nb">max</span><span class="o">-</span><span class="n">ops</span><span class="o">-</span><span class="n">per</span><span class="o">-</span><span class="n">account</span> <span class="mi">10000</span> <span class="o">--</span><span class="n">partial</span><span class="o">-</span><span class="n">operations</span> <span class="n">true</span>
</pre></div>
</div>
<p>Above we limit the operations per account to 1000 to save RAM. This is the default behaviour for newest versions of witness_node as a full node needs more than 80 gigs of ram to run.</p>
<p>We call full node to an API node that have all the account history from all the accounts in the bitshares blockchain. As the amount of RAM needed is so big and increasing this kind of nodes are each time more rare.</p>
<p>Look in the terminal for messages like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">1256186</span><span class="n">ms</span> <span class="n">th_a</span>       <span class="n">application</span><span class="o">.</span><span class="n">cpp</span><span class="p">:</span><span class="mi">499</span>           <span class="n">handle_block</span>         <span class="p">]</span> <span class="n">Got</span> <span class="n">block</span><span class="p">:</span> <span class="c1">#10000 time: 2015-10-13T23:15:42 latency: 73184714186 ms from: cyrano  irreversible: 9976 (-24)</span>
<span class="mi">1267475</span><span class="n">ms</span> <span class="n">th_a</span>       <span class="n">application</span><span class="o">.</span><span class="n">cpp</span><span class="p">:</span><span class="mi">499</span>           <span class="n">handle_block</span>         <span class="p">]</span> <span class="n">Got</span> <span class="n">block</span><span class="p">:</span> <span class="c1">#20000 time: 2015-10-14T07:37:33 latency: 73154614475 ms from: bitcube  irreversible: 19975 (-25)</span>
</pre></div>
</div>
<p>If you see this, the blockchain is synchronizing ok. Complete the sync is a long process that depends a lot in your hardware. While you see the blocks coming in the witness node terminal you are in good track.</p>
</div>
<div class="section" id="running-a-production-api-node">
<h2><a class="toc-backref" href="#id3">Running a Production API Node</a><a class="headerlink" href="#running-a-production-api-node" title="Permalink to this headline">¶</a></h2>
<div class="section" id="gnu-screen">
<h3><a class="toc-backref" href="#id4">GNU screen</a><a class="headerlink" href="#gnu-screen" title="Permalink to this headline">¶</a></h3>
<p>This is the easier way, start a screen terminal and run your node on it. See: Manage a running Node in the background by using GNU screen</p>
<p>This works but it is not the most recommended, in a reboot the node admin will need to run everything again.</p>
</div>
<div class="section" id="docker">
<h3><a class="toc-backref" href="#id5">Docker</a><a class="headerlink" href="#docker" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span><span class="o">-</span><span class="n">compose</span><span class="o">.</span><span class="n">yaml</span><span class="p">:</span>

<span class="n">version</span><span class="p">:</span> <span class="s1">&#39;3&#39;</span>
<span class="n">services</span><span class="p">:</span>

<span class="n">fullnode</span><span class="p">:</span>
 <span class="c1"># Image to run</span>
 <span class="n">image</span><span class="p">:</span> <span class="n">fb3d7a273ce4</span>
 <span class="c1"># Optional environmental variables</span>
 <span class="c1"># environment:</span>
 <span class="n">ports</span><span class="p">:</span>
  <span class="o">-</span> <span class="s2">&quot;0.0.0.0:8090:8090&quot;</span>
 <span class="n">volumes</span><span class="p">:</span>
 <span class="o">-</span> <span class="s2">&quot;bitshares-fullnode:/var/lib/bitshares&quot;</span>

<span class="n">delayed_node</span><span class="p">:</span>
 <span class="c1"># Image to run</span>
 <span class="n">image</span><span class="p">:</span> <span class="n">fb3d7a273ce4</span>
 <span class="c1"># Optional environmental variables</span>
 <span class="n">environment</span><span class="p">:</span>
  <span class="o">-</span> <span class="s1">&#39;BITSHARESD_PLUGINS=delayed_node witness&#39;</span>
  <span class="o">-</span> <span class="s1">&#39;BITSHARESD_TRUSTED_NODE=ws://fullnode:8090&#39;</span>
 <span class="n">ports</span><span class="p">:</span>
  <span class="o">-</span> <span class="s2">&quot;0.0.0.0:8091:8090&quot;</span>
 <span class="n">volumes</span><span class="p">:</span>
 <span class="o">-</span> <span class="s2">&quot;bitshares-fullnode:/var/lib/bitshares&quot;</span>
   <span class="c1">#  links:</span>
   <span class="c1">#- fullnode</span>

<span class="n">volumes</span><span class="p">:</span>
 <span class="n">bitshares</span><span class="o">-</span><span class="n">fullnode</span><span class="p">:</span>
</pre></div>
</div>
<p>then</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span><span class="o">-</span><span class="n">compose</span> <span class="n">up</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<hr class="docutils" />
<p>Contributor:</p>
<blockquote>
<div>&#64;oxarbitrage</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright BitShares Blockchain Foundation.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'',
            LANGUAGE:'en',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>