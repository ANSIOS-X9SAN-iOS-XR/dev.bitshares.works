

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Network and Wallet Configuration &mdash; BItShares Developers Portal  documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> BItShares Developers Portal
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../intro/architectures.html">Introduction &amp; Architectures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../intro/environments.html">Development Environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../components/components.html">System Components Elements</a></li>
</ul>
<p class="caption"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bts_guide/accounts/bts_account.html">BitShares Accounts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integration.html">Integration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interaction.html">Blockchain Interaction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testnets.html">Testnets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bsip.html">BitShares Improvement Proposal</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../supports_dev/supports.html">Support and Optimizations</a></li>
</ul>
<p class="caption"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../api/api_about.html">1. API Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/restrictions.html">2. API Access and Restrictions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/calls.html">3. Available Calls, Object, and IDs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/blockchain_api.html">4. Blockchain API(s)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/wallet_api.html">5. Wallet API - Calls</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/objects_ids.html">6. Objects and IDs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/namespaces.html">7. Graphene - Namespaces</a></li>
</ul>
<p class="caption"><span class="caption-text">Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../bts_guide/tutorials/index.html">Developer Guide (Tutorials)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bts_guide/index_faq.html">Frequently Asked Questions (FAQ)</a></li>
</ul>
<p class="caption"><span class="caption-text">References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../references/info_comunities.html">BitShares Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../references/info_comunities.html#bitshares-blockchain">BitShares Blockchain</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../references/tech_articles.html">BitShares Developers’ Contributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../references/tech_articles.html#articles">Articles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../references/githubrepo.html">BitShares Repositories</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">BItShares Developers Portal</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>Network and Wallet Configuration</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="network-and-wallet-configuration">
<span id="network-setups"></span><h1><a class="toc-backref" href="#id8">Network and Wallet Configuration</a><a class="headerlink" href="#network-and-wallet-configuration" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#network-and-wallet-configuration" id="id8">Network and Wallet Configuration</a><ul>
<li><a class="reference internal" href="#components" id="id9">Components</a></li>
<li><a class="reference internal" href="#general-network-and-wallet-configuration" id="id10">General Network and Wallet Configuration</a></li>
<li><a class="reference internal" href="#secure-network-and-wallet-configuration" id="id11">Secure Network and Wallet Configuration</a></li>
</ul>
</li>
</ul>
</div>
<hr class="docutils" />
<div class="section" id="components">
<h2><a class="toc-backref" href="#id9">Components</a><a class="headerlink" href="#components" title="Permalink to this headline">¶</a></h2>
<div class="section" id="p2p-network">
<h3>P2P Network<a class="headerlink" href="#p2p-network" title="Permalink to this headline">¶</a></h3>
<p>The BitShares client uses a peer-to-peer network to connect and broadcasts transactions there. A block producing full node will eventually catch your transcaction and validates it by adding it into a new block.</p>
</div>
<div class="section" id="trusted-full-node">
<h3>Trusted Full Node<a class="headerlink" href="#trusted-full-node" title="Permalink to this headline">¶</a></h3>
<p>We will use a Full node to connect to the network directly. We call it trusted since it is supposed to be under our control.</p>
</div>
<div class="section" id="wallet">
<h3>Wallet<a class="headerlink" href="#wallet" title="Permalink to this headline">¶</a></h3>
<p>The wallet is used to initiate transfers (customer withdrawals) and connects to the trusted full node.</p>
</div>
<div class="section" id="wallet-api">
<h3>Wallet API<a class="headerlink" href="#wallet-api" title="Permalink to this headline">¶</a></h3>
<p>Since we have a delayed full node that we can fully trust, we will interface with this node to query the blockchain and receive notifications from it one balance changes. Hence, we use this API to watch deposits of users into the exchange’s account. Because the delayed node only knows about irreversible blocks all transactions are at this point irreversible as well. For customer withdrawals, we will interface with the wallet to initiate transfers to the accounts of the customers on request. As we are connected to the trusted node directly, there will not be any delay on withdrawals.</p>
</div>
</div>
<hr class="docutils" />
<div class="section" id="general-network-and-wallet-configuration">
<h2><a class="toc-backref" href="#id10">General Network and Wallet Configuration</a><a class="headerlink" href="#general-network-and-wallet-configuration" title="Permalink to this headline">¶</a></h2>
<div class="contents local topic" id="id1">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#set-up" id="id12">Set up</a></li>
<li><a class="reference internal" href="#id2" id="id13">Trusted Full Node</a></li>
<li><a class="reference internal" href="#id3" id="id14">Wallet</a></li>
</ul>
</div>
<hr class="docutils" />
<p>For general purpose setups, we recommend a reduced complexity setup that looks as follows.</p>
<div class="section" id="set-up">
<h3><a class="toc-backref" href="#id12">Set up</a><a class="headerlink" href="#set-up" title="Permalink to this headline">¶</a></h3>
<a class="reference internal image-reference" href="development\apps\../../../../_images/general-setup.png"><img alt="BitShares Architecture" class="align-center" src="development\apps\../../../../_images/general-setup.png" style="width: 650px;" /></a>
<p><strong>We will work with the following IPs and open the corresponding RPC ports:</strong></p>
<ul class="simple">
<li>Trusted Full Node:<ul>
<li>extern: internet access <strong>required</strong></li>
<li>intern: <cite>192.168.0.100</cite></li>
<li>port: <cite>8090</cite></li>
</ul>
</li>
<li>Wallet:<ul>
<li>extern: <strong>no</strong> internet access required</li>
<li>intern: <cite>192.168.0.102</cite></li>
<li>port: <cite>8092</cite></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id2">
<h3><a class="toc-backref" href="#id13">Trusted Full Node</a><a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>The trusted full node is your entry point to the BitShares P2P network. It will hold the blockchain, connect to other peers, and will receive new blocks in real-time.</p>
<p>For the trusted full node, the default settings can be used. For later, we will need to open the RPC port and listen to an IP address to connect the wallet to.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">programs</span><span class="o">/</span><span class="n">witness_node</span><span class="o">/</span><span class="n">witness_node</span> <span class="o">--</span><span class="n">rpc</span><span class="o">-</span><span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;192.168.0.100:8090&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A witness node is identical to a full node if no authorized block-signing private key is provided.</p>
</div>
</div>
<div class="section" id="id3">
<h3><a class="toc-backref" href="#id14">Wallet</a><a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>We open up a <code class="docutils literal notranslate"><span class="pre">RPC-JSON-HTTP</span></code> port to be able to interface with API requests. The wallet can be connected to the trusted node and listens for RPC requests on port <code class="docutils literal notranslate"><span class="pre">8092</span></code> with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">programs</span><span class="o">/</span><span class="n">cli_wallet</span><span class="o">/</span><span class="n">cli_wallet</span> <span class="o">--</span><span class="n">server</span><span class="o">-</span><span class="n">rpc</span><span class="o">-</span><span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;ws://192.168.0.100:8090&quot;</span> \
                                <span class="o">--</span><span class="n">rpc</span><span class="o">-</span><span class="n">http</span><span class="o">-</span><span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;192.168.0.102:8092&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For security reasons, the wallet should only listen to localhost or the local network and should <strong>NEVER</strong> be exposed to the internet.</p>
</div>
<p><strong>For customer withdrawals, we will interface to the wallet’s API using 192.168.0.102:8092.</strong></p>
<hr class="docutils" />
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="secure-network-and-wallet-configuration">
<span id="secure-network-configuration"></span><h2><a class="toc-backref" href="#id11">Secure Network and Wallet Configuration</a><a class="headerlink" href="#secure-network-and-wallet-configuration" title="Permalink to this headline">¶</a></h2>
<div class="contents local topic" id="id4">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#id5" id="id15">Set up</a></li>
<li><a class="reference internal" href="#id6" id="id16">Trusted Full Node</a></li>
<li><a class="reference internal" href="#delayed-full-node" id="id17">Delayed Full Node</a></li>
<li><a class="reference internal" href="#id7" id="id18">Wallet</a></li>
</ul>
</div>
<hr class="docutils" />
<p>For high security, we provide a so called <strong>delayed</strong> full node which accepts the parameter <cite>trusted-node</cite> for an RPC endpoint of a trusted validating node. The trusted-node is a regular full node directly connected to the P2P network that works as a proxy. The delayed node will delay blocks until they are <strong>irreversible</strong>. Depending on the block interval and the number of witnesses, this may lead to a few minutes of delay.</p>
<div class="section" id="id5">
<h3><a class="toc-backref" href="#id15">Set up</a><a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<a class="reference internal image-reference" href="development\apps\../../../../_images/secure-setup.png"><img alt="BitShares Architecture" class="align-center" src="development\apps\../../../../_images/secure-setup.png" style="width: 650px;" /></a>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The delayed full node should be in the same <em>local</em> network as the trusted full node is in the same network and has internet access.</p>
</div>
<p>Hence we will work with the following IPs and open the corresponding RPC ports</p>
<ul class="simple">
<li>Trusted Full Node:<ul>
<li>extern: internet access <strong>required</strong></li>
<li>intern: <cite>192.168.0.100</cite></li>
<li>port: <cite>8090</cite></li>
</ul>
</li>
<li>Delayed Full Node:<ul>
<li>extern: <strong>no</strong> internet access required</li>
<li>intern: <cite>192.168.0.101</cite></li>
<li>port: <cite>8090</cite></li>
</ul>
</li>
<li>Wallet:<ul>
<li>extern: <strong>no</strong> internet access required</li>
<li>intern: <cite>192.168.0.102</cite></li>
<li>port: <cite>8092</cite></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id6">
<h3><a class="toc-backref" href="#id16">Trusted Full Node</a><a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<p>The trusted full node is your entry point to the BitShares P2P network. It will hold the blockchain, connect to other peers, and will receive new blocks in real-time.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">programs</span><span class="o">/</span><span class="n">witness_node</span><span class="o">/</span><span class="n">witness_node</span> <span class="o">--</span><span class="n">rpc</span><span class="o">-</span><span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;192.168.0.100:8090&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A _witness_ node is identical to a full node if no authorized block-signing private key is provided.</p>
</div>
</div>
<div class="section" id="delayed-full-node">
<h3><a class="toc-backref" href="#id17">Delayed Full Node</a><a class="headerlink" href="#delayed-full-node" title="Permalink to this headline">¶</a></h3>
<p>The delayed full node will provide us with a delayed and several times confirmed and verified blockchain. Even though DPOS is more resistant against forks than most other blockchain consensus schemes, we delay the blockchain here to reduces the risk of forks even more. In the end, the delayed full node is supposed to never enter an invalid fork. All transactions that are confirmed by the delayed node are irreversible.</p>
<p>The delayed full node will need the IP address and port of the p2p-endpoint from the trusted full node. We also need to open the RPC/Websocket port (to the local network!) so that we can interface using RPC-JSON calls.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">programs</span><span class="o">/</span><span class="n">witness_node</span><span class="o">/</span><span class="n">witness_node</span> <span class="o">--</span><span class="n">trusted</span><span class="o">-</span><span class="n">node</span><span class="o">=</span><span class="s2">&quot;192.168.0.100:8090&quot;</span> \
                                    <span class="o">--</span><span class="n">rpc</span><span class="o">-</span><span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;192.168.0.101:8090&quot;</span>
                                    <span class="o">-</span><span class="n">s</span> <span class="s2">&quot;0.0.0.0:0&quot;</span> \
                                    <span class="o">--</span><span class="n">p2p</span><span class="o">-</span><span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;0.0.0.0:0&quot;</span> \
                                    <span class="o">--</span><span class="n">seed</span><span class="o">-</span><span class="n">nodes</span> <span class="s2">&quot;[]&quot;</span>
</pre></div>
</div>
<p>We could now connect via RPC:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">192.168.0.100:8090</span></code> : The trusted full node exposed to the internet</li>
<li><code class="docutils literal notranslate"><span class="pre">192.168.0.101:8090</span></code> : The delayed full node not exposed to the internet</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For security reasons, an exchange should only interface with the delayed full node.</p>
</div>
<p>For obvious reasons, the trusted full node is should be running before attempting to start the delayed full node.</p>
<p><strong>For customer deposits, we will interface to the delayed node’s API using 192.168.0.101:8090.</strong></p>
</div>
<div class="section" id="id7">
<h3><a class="toc-backref" href="#id18">Wallet</a><a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<p>The wallet initiates outgoing transfers and has to connect to your trusted node because the _delayed_ node has no P2P connections. We furthermore open up a <strong>RPC-JSON-HTTP</strong> port to be able to interface with API requests. The wallet can be connected to the trusted node and listens for RPC requests on port <cite>8092</cite> with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">programs</span><span class="o">/</span><span class="n">cli_wallet</span><span class="o">/</span><span class="n">cli_wallet</span> <span class="o">--</span><span class="n">server</span><span class="o">-</span><span class="n">rpc</span><span class="o">-</span><span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;ws://192.168.0.100:8090&quot;</span> \
                                 <span class="o">--</span><span class="n">rpc</span><span class="o">-</span><span class="n">http</span><span class="o">-</span><span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;192.168.0.102:8092&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For security reasons, the wallet should only listen to localhost or the local network and should <strong>NEVER</strong> be exposed to the internet.</p>
</div>
<p><strong>For customer withdrawals, we will interface to the wallet’s API using 192.168.0.102:8092.</strong></p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright BitShares Blockchain Foundation.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'',
            LANGUAGE:'en',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>