

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Private Testnet &mdash; BItShares Developers Portal  documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="BitShares Improvement Proposal" href="../bsip.html" />
    <link rel="prev" title="Public Testnet" href="public_testnet.html" /> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> BItShares Developers Portal
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../intro/architectures.html">Introduction &amp; Architectures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../intro/environments.html">Development Environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../components/components.html">System Components Elements</a></li>
</ul>
<p class="caption"><span class="caption-text">Development</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bts_guide/accounts/bts_account.html">BitShares Accounts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integration.html">Integration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interaction.html">Blockchain Interaction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../testnets.html">Testnets</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../testnets.html#quick-start">Quick Start</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../testnets.html#deploy-testnets">Deploy Testnets</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="public_testnet.html">Public Testnet</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Private Testnet</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#how-to-set-up-private-testnet">How to Set up Private Testnet</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../testnets.html#other-references">Other References</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testnets.html#tools">Tools</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../bsip.html">BitShares Improvement Proposal</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../supports_dev/supports.html">Support and Optimizations</a></li>
</ul>
<p class="caption"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../api/api_about.html">1. API Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/restrictions.html">2. API Access and Restrictions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/calls.html">3. Available Calls, Object, and IDs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/blockchain_api.html">4. Blockchain API(s)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/wallet_api.html">5. Wallet API - Calls</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/objects_ids.html">6. Objects and IDs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/namespaces.html">7. Graphene - Namespaces</a></li>
</ul>
<p class="caption"><span class="caption-text">Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../bts_guide/tutorials/index.html">Developer Guide (Tutorials)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bts_guide/index_faq.html">Frequently Asked Questions (FAQ)</a></li>
</ul>
<p class="caption"><span class="caption-text">References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../references/info_comunities.html">BitShares Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../references/info_comunities.html#bitshares-blockchain">BitShares Blockchain</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../references/info_bbf_events.html">BitShares Blockchain Foundation Events</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../references/tech_articles.html">BitShares Developers’ Contributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../references/tech_articles.html#articles">Articles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../references/githubrepo.html">BitShares Repositories</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">BItShares Developers Portal</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../testnets.html">Testnets</a> &raquo;</li>
        
      <li>Private Testnet</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="private-testnet">
<span id="private-testnet-guide"></span><h1>Private Testnet<a class="headerlink" href="#private-testnet" title="Permalink to this headline">¶</a></h1>
<p>Some developers may want to deploy their own graphene blockchain locally for governance, and speed reasons. This section explains how to prepare the private testnet environment and what steps to take to be a block producing node (witness node).</p>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#how-to-set-up-private-testnet" id="id1">How to Set up Private Testnet</a><ul>
<li><a class="reference internal" href="#prerequisites" id="id2">1. Prerequisites</a></li>
<li><a class="reference internal" href="#create-a-testnet-folder" id="id3">2. Create a Testnet Folder</a></li>
<li><a class="reference internal" href="#create-a-genesis-file-for-a-private-testnet" id="id4">3. Create a Genesis File for a Private Testnet</a></li>
<li><a class="reference internal" href="#customization-of-the-genesis-file" id="id5">4. Customization of the Genesis File</a><ul>
<li><a class="reference internal" href="#default-genesis" id="id6">Default Genesis</a></li>
</ul>
</li>
<li><a class="reference internal" href="#embed-genesis-optional" id="id7">5. Embed Genesis (optional)</a></li>
<li><a class="reference internal" href="#create-a-data-directory" id="id8">6. Create a Data Directory</a></li>
<li><a class="reference internal" href="#set-up-witness-configuration" id="id9">7. Set up Witness Configuration</a></li>
<li><a class="reference internal" href="#start-block-production" id="id10">8. Start Block Production</a></li>
<li><a class="reference internal" href="#obtain-the-chain-id" id="id11">9. Obtain the Chain ID</a></li>
<li><a class="reference internal" href="#create-a-new-wallet" id="id12">10. Create a new Wallet</a></li>
<li><a class="reference internal" href="#gain-access-to-the-genesis-stake" id="id13">11. Gain Access to the Genesis Stake</a></li>
<li><a class="reference internal" href="#create-another-account" id="id14">12. Create Another Account</a><ul>
<li><a class="reference internal" href="#transfer-funds-between-accounts" id="id15">Transfer funds between accounts</a></li>
</ul>
</li>
<li><a class="reference internal" href="#create-committee-members" id="id16">13. Create Committee Members</a></li>
</ul>
</li>
</ul>
</div>
<hr class="docutils" />
<div class="section" id="how-to-set-up-private-testnet">
<h2><a class="toc-backref" href="#id1">How to Set up Private Testnet</a><a class="headerlink" href="#how-to-set-up-private-testnet" title="Permalink to this headline">¶</a></h2>
<div class="section" id="prerequisites">
<h3><a class="toc-backref" href="#id2">1. Prerequisites</a><a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h3>
<p>If you have not installed BitShares-Core and built yet. Please see <a class="reference internal" href="../../supports_dev/monitoring_python.html#installation"><span class="std std-ref">Installation Guide</span></a>. And make sure you have both <code class="docutils literal notranslate"><span class="pre">witness_node</span></code> and <code class="docutils literal notranslate"><span class="pre">cli_wallet</span></code> already compiled successfully.</p>
</div>
<div class="section" id="create-a-testnet-folder">
<h3><a class="toc-backref" href="#id3">2. Create a Testnet Folder</a><a class="headerlink" href="#create-a-testnet-folder" title="Permalink to this headline">¶</a></h3>
<p>Create a new folder (e.g., <code class="docutils literal notranslate"><span class="pre">[Testnet-Home]</span></code>) in any location you like and copy <cite>witness_node</cite> and <cite>cli_wallet</cite> there. The <cite>[Testnet-Home]</cite> folder will contain all files and folders related to the Testnet.</p>
<p>Open a <strong>Command Prompt</strong> window and switch the current directory to <code class="docutils literal notranslate"><span class="pre">[Testnet-Home]</span></code>.</p>
</div>
<div class="section" id="create-a-genesis-file-for-a-private-testnet">
<h3><a class="toc-backref" href="#id4">3. Create a Genesis File for a Private Testnet</a><a class="headerlink" href="#create-a-genesis-file-for-a-private-testnet" title="Permalink to this headline">¶</a></h3>
<p>The genesis.json is the initial state of the network. We create a new genesis json file named <code class="docutils literal notranslate"><span class="pre">my-genesis.json</span></code> for a Private Testnet in the same folder just created.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">witness_node</span> <span class="o">--</span><span class="n">create</span><span class="o">-</span><span class="n">genesis</span><span class="o">-</span><span class="n">json</span><span class="o">=</span><span class="n">my</span><span class="o">-</span><span class="n">genesis</span><span class="o">.</span><span class="n">json</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">my-genesis.json</span></code> file will be created in the <code class="docutils literal notranslate"><span class="pre">[Testnet-Home]</span></code> folder. Once this task is done, the witness node will terminate on its own.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><code class="docutils literal notranslate"><span class="pre">witness_node</span></code> startup will create a <code class="docutils literal notranslate"><span class="pre">itness_node_data_dir</span></code> as a default data directory (with config.ini). If you want to use a differnt folder name and directory for the data, you have to use <code class="docutils literal notranslate"><span class="pre">--data-dir</span></code> in a startup command line and set your data directory folder path. Otherwise, the <code class="docutils literal notranslate"><span class="pre">witness_node_data_dir</span></code> folder will be created and use a default <code class="docutils literal notranslate"><span class="pre">config.ini</span></code> file to start the witness_node.</p>
</div>
</div>
<div class="section" id="customization-of-the-genesis-file">
<h3><a class="toc-backref" href="#id5">4. Customization of the Genesis File</a><a class="headerlink" href="#customization-of-the-genesis-file" title="Permalink to this headline">¶</a></h3>
<p>If you want to customize the network’s initial state, edit <code class="docutils literal notranslate"><span class="pre">my-genesis.json</span></code>. This allows you to control things such as:</p>
<ul class="simple">
<li>The accounts that exist at genesis, their names and public keys</li>
<li>Assets and their initial distribution (including core asset)</li>
<li>The initial values of chain parameters</li>
<li>The account / signing keys of the <cite>init</cite> witnesses (or in fact any account at all).</li>
</ul>
<div class="section" id="default-genesis">
<h4><a class="toc-backref" href="#id6">Default Genesis</a><a class="headerlink" href="#default-genesis" title="Permalink to this headline">¶</a></h4>
<p>The graphene code base has a default genesis block integrated that has all witnesses, committee members and funds and a single account called <cite>nathan</cite> available from a single private key:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">5</span><span class="n">KQwrPbwdL6PhXujxW37FSSQZ1JiwsST4cqQzDeyXtP79zkvFD3</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="embed-genesis-optional">
<h3><a class="toc-backref" href="#id7">5. Embed Genesis (optional)</a><a class="headerlink" href="#embed-genesis-optional" title="Permalink to this headline">¶</a></h3>
<p>Once you have <code class="docutils literal notranslate"><span class="pre">genesis.json</span></code>, you may set a cmake variable like so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cmake</span> <span class="o">-</span><span class="n">DGRAPHENE_EGENESIS_JSON</span><span class="o">=</span><span class="s2">&quot;$(pwd)/genesis/my-genesis.json&quot;</span>
</pre></div>
</div>
<p>and then rebuild. Note, sometimes I’ve had to clean the build and CMake cache variables in order for <code class="docutils literal notranslate"><span class="pre">GRAPHENE_EGENESIS_JSON</span></code> to take effect:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">clean</span>
<span class="n">find</span> <span class="o">.</span> <span class="o">-</span><span class="n">name</span> <span class="s2">&quot;CMakeCache.txt&quot;</span> <span class="o">|</span> <span class="n">xargs</span> <span class="n">rm</span> <span class="o">-</span><span class="n">f</span>
<span class="n">find</span> <span class="o">.</span> <span class="o">-</span><span class="n">name</span> <span class="s2">&quot;CMakeFiles&quot;</span> <span class="o">|</span> <span class="n">xargs</span> <span class="n">rm</span> <span class="o">-</span><span class="n">Rf</span>
<span class="n">cmake</span> <span class="o">-</span><span class="n">DGRAPHENE_EGENESIS_JSON</span><span class="o">=</span><span class="s2">&quot;$(pwd)/genesis/my-genesis.json&quot;</span> <span class="o">.</span>
</pre></div>
</div>
<p>Deleting caches will reset all <code class="docutils literal notranslate"><span class="pre">cmake</span></code> variables, so if you have used instructions like build-ubuntu which tells you to set other <code class="docutils literal notranslate"><span class="pre">cmake</span></code> variables, you will have to add those variables to the <code class="docutils literal notranslate"><span class="pre">cmake</span></code> line above.</p>
<p>Embedding the genesis copies the entire content of genesis.json into the witness_node binary, and additionally copies the chain ID into the cli_wallet binary. Embedded genesis allows the following simplifications to the subsequent instructions:</p>
<ul class="simple">
<li>You do not need to specify the <code class="docutils literal notranslate"><span class="pre">genesis.json</span></code> file on the witness node command line, or in the witness node configuration file.</li>
<li>You do not need to specify the chain ID on the <code class="docutils literal notranslate"><span class="pre">cli_wallet</span></code> command line when starting a new wallet.</li>
</ul>
<p>Embedded genesis is a feature designed to make life easier for consumers of pre-compiled binaries, in exchange for slight, optional complication of the process for producing binaries.</p>
</div>
<div class="section" id="create-a-data-directory">
<h3><a class="toc-backref" href="#id8">6. Create a Data Directory</a><a class="headerlink" href="#create-a-data-directory" title="Permalink to this headline">¶</a></h3>
<p>We create a new data directory for our witness.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">witness_node</span> <span class="o">--</span><span class="n">data</span><span class="o">-</span><span class="nb">dir</span> <span class="n">data</span><span class="o">/</span><span class="n">my</span><span class="o">-</span><span class="n">blockprod</span> <span class="o">--</span><span class="n">genesis</span><span class="o">-</span><span class="n">json</span> <span class="n">my</span><span class="o">-</span><span class="n">genesis</span><span class="o">.</span><span class="n">json</span> <span class="o">--</span><span class="n">seed</span><span class="o">-</span><span class="n">nodes</span> <span class="s2">&quot;[]&quot;</span>   <span class="c1"># or</span>

<span class="o">./</span><span class="n">witness_node</span> <span class="o">--</span><span class="n">data</span><span class="o">-</span><span class="nb">dir</span><span class="o">=</span><span class="n">data</span><span class="o">/</span><span class="n">my</span><span class="o">-</span><span class="n">blockprod</span> <span class="o">--</span><span class="n">genesis</span><span class="o">-</span><span class="n">json</span><span class="o">=</span><span class="n">my</span><span class="o">-</span><span class="n">genesis</span><span class="o">.</span><span class="n">json</span> <span class="o">--</span><span class="n">seed</span><span class="o">-</span><span class="n">nodes</span> <span class="s2">&quot;[]&quot;</span>
</pre></div>
</div>
<p><strong>Note:</strong></p>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">data/my-blockprod</span></code> directory does not exist, it will be created by the witness node.</li>
<li><code class="docutils literal notranslate"><span class="pre">seed-nodes</span> <span class="pre">=</span> <span class="pre">[]</span></code> creates a list of empty seed nodes to avoid connecting to default hardcoded seeds.</li>
<li><strong>Known issue:</strong> Missing <code class="docutils literal notranslate"><span class="pre">=</span></code> sign between input parameter and value. –&gt; This is due to a bug of a boost 1.60. If you compile with boost 1.58, the <code class="docutils literal notranslate"><span class="pre">=</span></code> sign can be omitted.</li>
</ul>
<p>The below message means the initialization is complete. It will complete nearly instantaneously with the tiny example genesis, unless you added a ton of balances. Use <code class="docutils literal notranslate"><span class="pre">ctrl-c</span></code> to close the witness node.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">3501235</span><span class="n">ms</span> <span class="n">th_a</span> <span class="n">main</span><span class="o">.</span><span class="n">cpp</span><span class="p">:</span><span class="mi">165</span> <span class="n">main</span><span class="p">]</span> <span class="n">Started</span> <span class="n">witness</span> <span class="n">node</span> <span class="n">on</span> <span class="n">a</span> <span class="n">chain</span> <span class="k">with</span> <span class="mi">0</span> <span class="n">blocks</span><span class="o">.</span>
<span class="mi">3501235</span><span class="n">ms</span> <span class="n">th_a</span> <span class="n">main</span><span class="o">.</span><span class="n">cpp</span><span class="p">:</span><span class="mi">166</span> <span class="n">main</span><span class="p">]</span> <span class="n">Chain</span> <span class="n">ID</span> <span class="ow">is</span> <span class="n">cf307110d029cb882d126bf0488dc4864772f68d9888d86b458d16e6c36aa74b</span>
</pre></div>
</div>
<p>As a result, you should get two items:</p>
<ul class="simple">
<li>A directory named <code class="docutils literal notranslate"><span class="pre">data/my-blockprod</span></code> has been created (initialized) with a file named <code class="docutils literal notranslate"><span class="pre">config.ini</span></code> located in it.</li>
<li>The chain ID is now known - it’s displayed in the message above (i.g., Chain ID).</li>
</ul>
</div>
<div class="section" id="set-up-witness-configuration">
<h3><a class="toc-backref" href="#id9">7. Set up Witness Configuration</a><a class="headerlink" href="#set-up-witness-configuration" title="Permalink to this headline">¶</a></h3>
<p>Open the <code class="docutils literal notranslate"><span class="pre">[Testnet-Home]/data/my-blockprod/config.ini</span></code> file and set the following settings, uncommenting them if necessary.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rpc</span><span class="o">-</span><span class="n">endpoint</span> <span class="o">=</span> <span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="p">:</span><span class="mi">8090</span>
<span class="n">genesis</span><span class="o">-</span><span class="n">json</span> <span class="o">=</span> <span class="n">my</span><span class="o">-</span><span class="n">genesis</span><span class="o">.</span><span class="n">json</span>
<span class="n">enable</span><span class="o">-</span><span class="n">stale</span><span class="o">-</span><span class="n">production</span> <span class="o">=</span> <span class="n">true</span>

<span class="n">private</span><span class="o">-</span><span class="n">key</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;GPH6MRyAjQq8ud7hVNYcfnVPJqcVpscN5So8BhtHuGYqET5GDW5CV&quot;</span><span class="p">,</span><span class="s2">&quot;5KQwrPbwdL6PhXujxW37FSSQZ1JiwsST4cqQzDeyXtP79zkvFD3&quot;</span><span class="p">]</span>

<span class="n">witness</span><span class="o">-</span><span class="nb">id</span> <span class="o">=</span> <span class="s2">&quot;1.6.1&quot;</span>
<span class="n">witness</span><span class="o">-</span><span class="nb">id</span> <span class="o">=</span> <span class="s2">&quot;1.6.2&quot;</span>
<span class="n">witness</span><span class="o">-</span><span class="nb">id</span> <span class="o">=</span> <span class="s2">&quot;1.6.3&quot;</span>
<span class="n">witness</span><span class="o">-</span><span class="nb">id</span> <span class="o">=</span> <span class="s2">&quot;1.6.4&quot;</span>
<span class="n">witness</span><span class="o">-</span><span class="nb">id</span> <span class="o">=</span> <span class="s2">&quot;1.6.5&quot;</span>
<span class="n">witness</span><span class="o">-</span><span class="nb">id</span> <span class="o">=</span> <span class="s2">&quot;1.6.6&quot;</span>
<span class="n">witness</span><span class="o">-</span><span class="nb">id</span> <span class="o">=</span> <span class="s2">&quot;1.6.7&quot;</span>
<span class="n">witness</span><span class="o">-</span><span class="nb">id</span> <span class="o">=</span> <span class="s2">&quot;1.6.8&quot;</span>
<span class="n">witness</span><span class="o">-</span><span class="nb">id</span> <span class="o">=</span> <span class="s2">&quot;1.6.9&quot;</span>
<span class="n">witness</span><span class="o">-</span><span class="nb">id</span> <span class="o">=</span> <span class="s2">&quot;1.6.10&quot;</span>
<span class="n">witness</span><span class="o">-</span><span class="nb">id</span> <span class="o">=</span> <span class="s2">&quot;1.6.11&quot;</span>
</pre></div>
</div>
<p>The above list authorizes the <code class="docutils literal notranslate"><span class="pre">witness_node</span></code> to produce blocks on behalf of the listed <code class="docutils literal notranslate"><span class="pre">witness-id`s</span></code> and specifies the private key needed to sign those blocks. Normally each witness would be on a different node, but for the purpose of this <strong>private testnet</strong>, we will start out with all witnesses signing blocks on a single node.</p>
</div>
<div class="section" id="start-block-production">
<h3><a class="toc-backref" href="#id10">8. Start Block Production</a><a class="headerlink" href="#start-block-production" title="Permalink to this headline">¶</a></h3>
<p>Now run witness_node again:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">witness_node</span> <span class="o">--</span><span class="n">data</span><span class="o">-</span><span class="nb">dir</span> <span class="n">data</span><span class="o">/</span><span class="n">my</span><span class="o">-</span><span class="n">blockprod</span> <span class="o">--</span><span class="n">enable</span><span class="o">-</span><span class="n">stale</span><span class="o">-</span><span class="n">production</span> <span class="o">--</span><span class="n">seed</span><span class="o">-</span><span class="n">nodes</span> <span class="s2">&quot;[]&quot;</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If you want to use a different folder name and directory for the data, you have to use <code class="docutils literal notranslate"><span class="pre">--data-dir</span></code> in a startup command line and set your data directory folder path. Otherwise, the <cite>witness_node_data_dir</cite> folder will be created and used a default <code class="docutils literal notranslate"><span class="pre">config.ini</span></code> file to start the witness_node!!</p>
</div>
<p><strong>Note:</strong></p>
<ul class="simple">
<li>Since this is a testnet, we do not need to specify <code class="docutils literal notranslate"><span class="pre">genesis.json</span></code> on the command line. We now specify it in the <code class="docutils literal notranslate"><span class="pre">config</span> <span class="pre">file</span></code>.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">--enable-stale-production</span></code> flag tells the <code class="docutils literal notranslate"><span class="pre">witness_node</span></code> to produce on a chain with zero blocks or very old blocks. We specify the <code class="docutils literal notranslate"><span class="pre">--enable-stale-production</span></code> parameter on the command line as we will not normally need it (although it can also be specified in the config file).</li>
<li>The empty <code class="docutils literal notranslate"><span class="pre">--seed-nodes</span></code> is added to avoid connecting to the default seed nodes hardcoded for production.</li>
<li>Subsequent runs which connect to an existing witness node over the p2p network, or which get blockchain state from an existing data directory, need not have the <code class="docutils literal notranslate"><span class="pre">--enable-stale-production</span></code> flag.</li>
</ul>
</div>
<div class="section" id="obtain-the-chain-id">
<h3><a class="toc-backref" href="#id11">9. Obtain the Chain ID</a><a class="headerlink" href="#obtain-the-chain-id" title="Permalink to this headline">¶</a></h3>
<p>(<em>see #6.when we created a data directory, we also obtained a chain ID.</em>)</p>
<p>The chain ID (i.g., blockchain id) is a hash of the genesis state. All transaction signatures are only valid for a single chain ID. So editing the genesis file will change your chain ID, and make you unable to sync with all existing chains (unless one of them has exactly the same genesis file you do).</p>
<p>For testing purposes, the <code class="docutils literal notranslate"><span class="pre">--dbg-init-key</span></code> option will allow you to quickly create a new chain against any genesis file, by replacing the witnesses’ block production keys.</p>
<p><strong>Each wallet is specifically associated with a single chain, specified by its chain ID. This is to protect the user from (e.g., unintentionally) using a testnet wallet on the real chain.</strong></p>
<p>The chain ID is printed at witness node startup. It can also be obtained by using the API to query a running witness node with the <cite>get_chain_properties</cite> API call:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">--</span><span class="n">data</span> <span class="s1">&#39;{&quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;method&quot;: &quot;get_chain_properties&quot;, &quot;params&quot;: [], &quot;id&quot;: 1}&#39;</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="p">:</span><span class="mi">11011</span><span class="o">/</span><span class="n">rpc</span> <span class="o">&amp;&amp;</span> <span class="n">echo</span>
</pre></div>
</div>
<p>This curl command will return a short JSON object including the <code class="docutils literal notranslate"><span class="pre">chain_id</span></code>.</p>
</div>
<div class="section" id="create-a-new-wallet">
<h3><a class="toc-backref" href="#id12">10. Create a new Wallet</a><a class="headerlink" href="#create-a-new-wallet" title="Permalink to this headline">¶</a></h3>
<p>We are now ready to connect a new wallet to your Private testnet witness node. You must specify a chain ID and server. Keep your witness node running and in another _Command <a href="#id17"><span class="problematic" id="id18">Prompt_</span></a> window run this command (a blank username and password will suffice):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">cli_wallet</span> <span class="o">--</span><span class="n">wallet</span><span class="o">-</span><span class="n">file</span> <span class="n">my</span><span class="o">-</span><span class="n">wallet</span><span class="o">.</span><span class="n">json</span>
           <span class="o">--</span><span class="n">chain</span><span class="o">-</span><span class="nb">id</span> <span class="n">cf307110d029cb882d126bf0488dc4864772f68d9888d86b458d16e6c36aa74b</span>
           <span class="o">--</span><span class="n">server</span><span class="o">-</span><span class="n">rpc</span><span class="o">-</span><span class="n">endpoint</span> <span class="n">ws</span><span class="p">:</span><span class="o">//</span><span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="p">:</span><span class="mi">11011</span> <span class="o">-</span><span class="n">u</span> <span class="s1">&#39;&#39;</span> <span class="o">-</span><span class="n">p</span> <span class="s1">&#39;&#39;</span>
</pre></div>
</div>
<p><strong>Note:</strong></p>
<ul class="simple">
<li>Make sure to replace the above chain ID (i.e., blockchain id) <code class="docutils literal notranslate"><span class="pre">cf307110d0...36aa74b</span></code> with <strong>your own chain ID</strong> reported by your witness_node. The chain-id passed to the CLI-wallet needs to match the id generated and used by the witness node.</li>
<li><code class="docutils literal notranslate"><span class="pre">--server-rpc-endpoint</span></code> - The port number is how you defined (opened) <code class="docutils literal notranslate"><span class="pre">--rpc-endpoint</span></code> for the witness_node.</li>
</ul>
<p>If you get the <cite>set_password</cite> prompt, it means your wallet has successfully connected to the testnet witness node.</p>
<p>Fist you need to create a new password for your wallet. This password is used to encrypt all the private keys in the wallet. For this example, we will use the password <cite>supersecret</cite>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">set_password</span> <span class="n">supersecret</span>
</pre></div>
</div>
</div>
<div class="section" id="gain-access-to-the-genesis-stake">
<h3><a class="toc-backref" href="#id13">11. Gain Access to the Genesis Stake</a><a class="headerlink" href="#gain-access-to-the-genesis-stake" title="Permalink to this headline">¶</a></h3>
<p>In Graphene, balances are contained in accounts. To import an account that exists in the Graphene genesis into your wallet, all you need to know its name and its private key. We will now import into the wallet an account called <cite>nathan</cite> (a general purpose test account) by using the <cite>import_key</cite> command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">unlock</span> <span class="n">supersecret</span>
<span class="n">import_key</span> <span class="n">nathan</span> <span class="s2">&quot;5KQwrPbwdL6PhXujxW37FSSQZ1JiwsST4cqQzDeyXtP79zkvFD3&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><cite>nathan</cite> happens to be the account name defined in the genesis file. If you had edited your <code class="docutils literal notranslate"><span class="pre">my-genesies.json</span></code> file just after it was created, you could have put a different name there. Also, note that <code class="docutils literal notranslate"><span class="pre">5KQwrPbwdL...P79zkvFD3</span></code> is the private key defined in the <code class="docutils literal notranslate"><span class="pre">config.ini</span></code> file.</p>
</div>
<p>Now we have the private key imported into the wallet but still no funds assocciated with it. Funds are stored in genesis balance objects. These funds can be claimed, with no fee, using the <cite>import_balance</cite> command.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">import_balance</span> <span class="n">nathan</span> <span class="p">[</span><span class="s2">&quot;5KQwrPbwdL6PhXujxW37FSSQZ1JiwsST4cqQzDeyXtP79zkvFD3&quot;</span><span class="p">]</span> <span class="n">true</span>
</pre></div>
</div>
<p>As a result, we have one account (named <cite>nathan</cite>) imported into the wallet and this account is well funded with BTS as we have claimed the funds stored in the genesis file. You can view this account information and the balance by using the below commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">get_account</span> <span class="n">nathan</span>
<span class="n">list_account_balances</span> <span class="n">nathan</span>
</pre></div>
</div>
</div>
<div class="section" id="create-another-account">
<h3><a class="toc-backref" href="#id14">12. Create Another Account</a><a class="headerlink" href="#create-another-account" title="Permalink to this headline">¶</a></h3>
<p>We will now create another account (named <cite>alpha</cite>) so that we can transfer funds back and forth between <cite>nathan</cite> and <cite>alpha</cite>.</p>
<p>Creating a new account is always done by using an existing account - we need it because someone (i.e. the registrar) has to fund the registration fee. Also, there is the requirement for the registrar account to have a lifetime member (LTM) status. Therefore we need to upgrade the account <cite>nathan</cite> to LTM, before we can proceed with creating other accounts.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">upgrade_account</span> <span class="n">nathan</span> <span class="n">true</span>
<span class="n">get_account</span> <span class="n">nathan</span>
</pre></div>
</div>
<p>In the response, next to <cite>membership_expiration_date</cite> you should see <code class="docutils literal notranslate"><span class="pre">1969-12-31T23:59:59</span></code>. If you get <code class="docutils literal notranslate"><span class="pre">1970-01-01T00:00:00</span></code> something is wrong and <cite>nathan</cite> has not been successfully upgraded.</p>
<p>We can now register an account by using <cite>nathan</cite> as registrar. But first we need to get hold of the public key for the new account. We do it by using the <code class="docutils literal notranslate"><span class="pre">suggest_brain_key</span></code> command.</p>
<p>And the resposne should be something similar to this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">suggest_brain_key</span>
<span class="p">{</span>
<span class="s2">&quot;brain_priv_key&quot;</span><span class="p">:</span> <span class="s2">&quot;MYAL SOEVER UNSHARP PHYSIC JOURNEY SHEUGH BEDLAM WLOKA FOOLERY GUAYABA DENTILE RADIATE TIEPIN ARMS FOGYISH COQUET&quot;</span><span class="p">,</span>
<span class="s2">&quot;wif_priv_key&quot;</span><span class="p">:</span> <span class="s2">&quot;5JDh3XmHK8CDaQSxQZHh5PUV3zwzG68uVcrTfmg9yQ9idNisYnE&quot;</span><span class="p">,</span>
<span class="s2">&quot;pub_key&quot;</span><span class="p">:</span> <span class="s2">&quot;BTS78CuY47Vds2nfw2t88ckjTaggPkw16tLhcmg4ReVx1WPr1zRL5&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>We can now register an account. The <code class="docutils literal notranslate"><span class="pre">register_account</span></code> command allows you to register an account using only a public key:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">register_account</span> <span class="n">alpha</span> <span class="n">BTS78CuY47Vds2nfw2t88ckjTaggPkw16tLhcmg4ReVx1WPr1zRL5</span> <span class="n">BTS78CuY47Vds2nfw2t88ckjTaggPkw16tLhcmg4ReVx1WPr1zRL5</span> <span class="n">nathan</span> <span class="n">nathan</span> <span class="mi">0</span> <span class="n">true</span>
</pre></div>
</div>
<p>&gt; Use a public key <code class="docutils literal notranslate"><span class="pre">pub_key</span></code> which you just created by <code class="docutils literal notranslate"><span class="pre">suggest_brain_key</span></code>.</p>
<div class="section" id="transfer-funds-between-accounts">
<h4><a class="toc-backref" href="#id15">Transfer funds between accounts</a><a class="headerlink" href="#transfer-funds-between-accounts" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">transfer</span> <span class="n">nathan</span> <span class="n">alpha</span> <span class="mi">100000</span> <span class="n">CORE</span> <span class="s2">&quot;here is the cash&quot;</span> <span class="n">true</span>
<span class="n">list_account_balances</span> <span class="n">alpha</span>
</pre></div>
</div>
<p>The text <code class="docutils literal notranslate"><span class="pre">here</span> <span class="pre">is</span> <span class="pre">some</span> <span class="pre">cash</span></code> is an arbitrary memo you can attatch to a transfer. If you don’t need it, just use <code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code> instead.</p>
<p>We can now open a new wallet for alpha user:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">import_key</span> <span class="n">alpha</span> <span class="mi">5</span><span class="n">JDh3XmHK8CDaQSxQZHh5PUV3zwzG68uVcrTfmg9yQ9idNisYnE</span>
<span class="n">upgrade_account</span> <span class="n">alpha</span> <span class="n">true</span>
<span class="n">create_witness</span> <span class="n">alpha</span> <span class="s2">&quot;http://www.alpha&quot;</span> <span class="n">true</span>
</pre></div>
</div>
<p>&gt; Use a private key <code class="docutils literal notranslate"><span class="pre">wif_priv_key</span></code> which you just created by <code class="docutils literal notranslate"><span class="pre">suggest_brain_key</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">get_private_key</span></code> command allows us to obtain the WIF private key corresponding to a public key. The private key must already be in the wallet:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">get_private_key</span> <span class="n">BTS78CuY47Vds2nfw2t88ckjTaggPkw16tLhcmg4ReVx1WPr1zRL5</span>
</pre></div>
</div>
<p>&gt; You can try to make sure your <code class="docutils literal notranslate"><span class="pre">suggest_brain_key</span></code> outputs key pair. You should get the same pair of keys set.</p>
</div>
</div>
<div class="section" id="create-committee-members">
<h3><a class="toc-backref" href="#id16">13. Create Committee Members</a><a class="headerlink" href="#create-committee-members" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">create_account_with_brain_key</span> <span class="n">com0</span> <span class="n">com0</span> <span class="n">nathan</span> <span class="n">nathan</span> <span class="n">true</span>
<span class="n">create_account_with_brain_key</span> <span class="n">com1</span> <span class="n">com1</span> <span class="n">nathan</span> <span class="n">nathan</span> <span class="n">true</span>
<span class="n">create_account_with_brain_key</span> <span class="n">com2</span> <span class="n">com2</span> <span class="n">nathan</span> <span class="n">nathan</span> <span class="n">true</span>
<span class="n">create_account_with_brain_key</span> <span class="n">com3</span> <span class="n">com3</span> <span class="n">nathan</span> <span class="n">nathan</span> <span class="n">true</span>
<span class="n">create_account_with_brain_key</span> <span class="n">com4</span> <span class="n">com4</span> <span class="n">nathan</span> <span class="n">nathan</span> <span class="n">true</span>
<span class="n">create_account_with_brain_key</span> <span class="n">com5</span> <span class="n">com5</span> <span class="n">nathan</span> <span class="n">nathan</span> <span class="n">true</span>
<span class="n">create_account_with_brain_key</span> <span class="n">com6</span> <span class="n">com6</span> <span class="n">nathan</span> <span class="n">nathan</span> <span class="n">true</span>
<span class="n">transfer</span> <span class="n">nathan</span> <span class="n">com0</span> <span class="mi">100000</span> <span class="n">CORE</span> <span class="s2">&quot;some cash&quot;</span> <span class="n">true</span>
<span class="n">transfer</span> <span class="n">nathan</span> <span class="n">com1</span> <span class="mi">100000</span> <span class="n">CORE</span> <span class="s2">&quot;some cash&quot;</span> <span class="n">true</span>
<span class="n">transfer</span> <span class="n">nathan</span> <span class="n">com2</span> <span class="mi">100000</span> <span class="n">CORE</span> <span class="s2">&quot;some cash&quot;</span> <span class="n">true</span>
<span class="n">transfer</span> <span class="n">nathan</span> <span class="n">com3</span> <span class="mi">100000</span> <span class="n">CORE</span> <span class="s2">&quot;some cash&quot;</span> <span class="n">true</span>
<span class="n">transfer</span> <span class="n">nathan</span> <span class="n">com4</span> <span class="mi">100000</span> <span class="n">CORE</span> <span class="s2">&quot;some cash&quot;</span> <span class="n">true</span>
<span class="n">transfer</span> <span class="n">nathan</span> <span class="n">com5</span> <span class="mi">100000</span> <span class="n">CORE</span> <span class="s2">&quot;some cash&quot;</span> <span class="n">true</span>
<span class="n">transfer</span> <span class="n">nathan</span> <span class="n">com6</span> <span class="mi">100000</span> <span class="n">CORE</span> <span class="s2">&quot;some cash&quot;</span> <span class="n">true</span>
<span class="n">upgrade_account</span> <span class="n">com0</span> <span class="n">true</span>
<span class="n">upgrade_account</span> <span class="n">com1</span> <span class="n">true</span>
<span class="n">upgrade_account</span> <span class="n">com2</span> <span class="n">true</span>
<span class="n">upgrade_account</span> <span class="n">com3</span> <span class="n">true</span>
<span class="n">upgrade_account</span> <span class="n">com4</span> <span class="n">true</span>
<span class="n">upgrade_account</span> <span class="n">com5</span> <span class="n">true</span>
<span class="n">upgrade_account</span> <span class="n">com6</span> <span class="n">true</span>
<span class="n">create_committee_member</span> <span class="n">com0</span> <span class="s2">&quot;http://www.com0&quot;</span> <span class="n">true</span>
<span class="n">create_committee_member</span> <span class="n">com1</span> <span class="s2">&quot;http://www.com1&quot;</span> <span class="n">true</span>
<span class="n">create_committee_member</span> <span class="n">com2</span> <span class="s2">&quot;http://www.com2&quot;</span> <span class="n">true</span>
<span class="n">create_committee_member</span> <span class="n">com3</span> <span class="s2">&quot;http://www.com3&quot;</span> <span class="n">true</span>
<span class="n">create_committee_member</span> <span class="n">com4</span> <span class="s2">&quot;http://www.com4&quot;</span> <span class="n">true</span>
<span class="n">create_committee_member</span> <span class="n">com5</span> <span class="s2">&quot;http://www.com5&quot;</span> <span class="n">true</span>
<span class="n">create_committee_member</span> <span class="n">com6</span> <span class="s2">&quot;http://www.com6&quot;</span> <span class="n">true</span>
<span class="n">vote_for_committee_member</span> <span class="n">nathan</span> <span class="n">com0</span> <span class="n">true</span> <span class="n">true</span>
<span class="n">vote_for_committee_member</span> <span class="n">nathan</span> <span class="n">com1</span> <span class="n">true</span> <span class="n">true</span>
<span class="n">vote_for_committee_member</span> <span class="n">nathan</span> <span class="n">com2</span> <span class="n">true</span> <span class="n">true</span>
<span class="n">vote_for_committee_member</span> <span class="n">nathan</span> <span class="n">com3</span> <span class="n">true</span> <span class="n">true</span>
<span class="n">vote_for_committee_member</span> <span class="n">nathan</span> <span class="n">com4</span> <span class="n">true</span> <span class="n">true</span>
<span class="n">vote_for_committee_member</span> <span class="n">nathan</span> <span class="n">com5</span> <span class="n">true</span> <span class="n">true</span>
<span class="n">vote_for_committee_member</span> <span class="n">nathan</span> <span class="n">com6</span> <span class="n">true</span> <span class="n">true</span>

<span class="n">propose_parameter_change</span> <span class="n">com0</span> <span class="p">{</span><span class="s2">&quot;block_interval&quot;</span> <span class="p">:</span> <span class="mi">6</span><span class="p">}</span> <span class="n">true</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../bsip.html" class="btn btn-neutral float-right" title="BitShares Improvement Proposal" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="public_testnet.html" class="btn btn-neutral" title="Public Testnet" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright BitShares Blockchain Foundation.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'',
            LANGUAGE:'en',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>